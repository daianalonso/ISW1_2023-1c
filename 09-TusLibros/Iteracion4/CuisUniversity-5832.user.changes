

----QUIT----(30 May 2023 00:05:32) CuisUniversity-5832.image priorSource: 4928100!

----STARTUP---- (30 May 2023 00:05:33) as /Users/hernan/Documents/Cuis/5.0-64Bits/Cuis-University-Installer/CuisUniversity-5832.image!


----QUIT----(30 May 2023 00:05:33) CuisUniversity-5832.image priorSource: 9366537!

----STARTUP---- (20 June 2023 20:40:47) as C:\Users\crist\Desktop\TusLibrosIT4\CuisUniversity-5832.image!


----SNAPSHOT----(20 June 2023 20:41:04) CuisUniversity-5832.image priorSource: 9366758!

----End fileIn of C:\Users\crist\Desktop\TusLibrosIT4\Packages\System\Collections-CompactArrays.pck.st----!

----End fileIn of C:\Users\crist\Desktop\TusLibrosIT4\Packages\Features\Compression.pck.st----!

----End fileIn of C:\Users\crist\Desktop\TusLibrosIT4\Packages\Features\Sound.pck.st----!

----End fileIn of C:\Users\crist\Desktop\TusLibrosIT4\Packages\Features\Cryptography-DigitalSignatures.pck.st----!

----End fileIn of C:\Users\crist\Desktop\TusLibrosIT4\Packages\Features\Identities-UUID.pck.st----!

----End fileIn of C:\Users\crist\Desktop\TusLibrosIT4\Packages\System\Network-Kernel.pck.st----!

----End fileIn of D:\tuslibrosIT4\WebClient.pck.st----!

----SNAPSHOT----(20 June 2023 20:44:24) CuisUniversity-5832.image priorSource: 9366950!

----SNAPSHOT----(20 June 2023 20:46:55) CuisUniversity-5832.image priorSource: 10541199!

----End fileIn of C:\Users\crist\Desktop\TusLibrosIT4\TusLibros-Model Ejercicio it4.st----!

----End fileIn of C:\Users\crist\Desktop\TusLibrosIT4\TusLibros-Tests Ejercicio it4.st----!

----End fileIn of C:\Users\crist\Desktop\TusLibrosIT4\TusLibrosREST Ejercicio it4.st----!

----SNAPSHOT----(20 June 2023 20:49:34) CuisUniversity-5832.image priorSource: 10541288!

Object subclass: #BlockExecutor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Model'!

!classDefinition: #BlockExecutor category: 'TusLibros-Model' stamp: 'JULI 6/20/2023 20:57:17'!
Object subclass: #BlockExecutor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Model'!

!classRemoval: #BlockExecutor stamp: 'JULI 6/20/2023 20:57:29'!
Object subclass: #BlockExecutor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Model'!

----STARTUP---- (20 June 2023 20:57:53) as C:\Users\crist\Desktop\TusLibrosIT4\CuisUniversity-5832.image!

!TusLibrosSystemFacade methodsFor: 'private' stamp: 'JULI 6/20/2023 21:08:38' prior: 50661887!
bookPerformance: anItem

	| bookPerformance totalMoney totalSales |

	bookPerformance := Dictionary new.
	
	totalSales := self totalSalesOf: anItem.
	totalMoney := self totalMoneyRaisedBy: anItem.
	
"	bookPerformance at: 'quantity' put: totalSales.
	bookPerformance at: 'total' put: totalMoney.
	bookPerformance at: 'summary' put: anItem,' was selled ',totalSales asString, ' times and raised a total amount of money equal to: ', totalMoney asString.
"	
	^self generateBookSummaryOf: anItem withSales: totalSales  withMoney: totalMoney.
	"^bookPerformance"
	

! !

!testRun: #TusLibrosSystemFacadeTest #test20BookPerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:09:07'!
ERROR!
!TusLibrosSystemFacade methodsFor: 'as yet unclassified' stamp: 'JULI 6/20/2023 21:09:30'!
generateBookSummaryOf: anItem withSales: totalSales withMoney: totalMoney 
	self shouldBeImplemented.! !
!TusLibrosSystemFacade methodsFor: 'as yet unclassified' stamp: 'JULI 6/20/2023 21:10:46' prior: 50663956!
generateBookSummaryOf: anItem withSales: totalSales withMoney: totalMoney 
	|bookSummary|
	bookSummary := Dictionary new.
	bookSummary at: 'quantity' put: totalSales.
	bookSummary at: 'total' put: totalMoney.
	bookSummary at: 'summary' put: anItem,' was selled ',totalSales asString, ' times and raised a total amount of money equal to: ', totalMoney asString.
	
	^bookSummary! !

!testRun: #TusLibrosSystemFacadeTest #test20BookPerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:10:49'!
FAILURE!

!testRun: #TusLibrosSystemFacadeTest #test20BookPerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test01CanCreateCartWithValidUserAndPassword stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test02CanNotCreateCartWithInvalidUser stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test03CanNotCreateCartWithInvalidPassword stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test04CanAddItemsToACreatedCart stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test05CanNotAddItemToNotCreatedCart stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test06CanNotAddItemNotSellByTheStore stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test08CanNotListCartOfInvalidCartId stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test09ListCartReturnsTheRightNumberOfItems stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test10CheckOutReturnsTransactionIdAndImpactsCustomerPurchases stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test10_1_CanNotCheckoutAnAlreadyCheckedOutCart stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test11CanNotCheckoutANotCreatedCart stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test12CanNotCheckoutAnEmptyCart stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test13CanNotCheckoutWithAnExpiredCreditCard stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test14ListPurchasesIncludesBoughtItems stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test15CanNotListPurchasesOfInvalidCustomer stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test16CanNotListPurchasesOfValidCustomerWithInvalidPassword stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test17CanNotAddToCartWhenSessionIsExpired stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test18CanNotListCartWhenSessionIsExpired stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test19CanNotCheckOutCartWhenSessionIsExpired stamp: 'JULI 6/20/2023 21:10:59'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test20BookPerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:11:01'!
FAILURE!

!testRun: #TusLibrosSystemFacadeTest #test21StorePerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:11:03'!
FAILURE!
!TusLibrosSystemFacade methodsFor: 'private' stamp: 'JULI 6/20/2023 21:11:21' prior: 50663931!
bookPerformance: anItem

	| bookPerformance totalMoney totalSales |

	bookPerformance := Dictionary new.
	
	totalSales := self totalSalesOf: anItem.
	totalMoney := self totalMoneyRaisedBy: anItem.
	

	^self generateBookSummaryOf: anItem withSales: totalSales  withMoney: totalMoney.

	

! !
!TusLibrosSystemFacade methodsFor: 'private' stamp: 'JULI 6/20/2023 21:12:09' prior: 50661928!
storePerformance

	| totalMoney totalSales performance |
	
	performance := Dictionary new.
	
	totalSales := self totalSales.
	totalMoney := self totalMoneyRaised.
	
"	performance at: 'quantity' put: totalSales.
	performance at: 'total' put: totalMoney.
	performance at: 'summary' put: 'The store selled a total of ',totalSales asString, ' books and raised a total amount of money equal to: ', totalMoney asString.
"	
	^self generateStoreSummaryWithSales: totalSales withMoney: totalMoney. 
! !

!testRun: #TusLibrosSystemFacadeTest #test21StorePerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:13:03'!
ERROR!
!TusLibrosSystemFacade methodsFor: 'private' stamp: 'JULI 6/20/2023 21:13:10'!
generateStoreSummaryWithSales: totalSales withMoney: totalMoney 
	self shouldBeImplemented.! !
!TusLibrosSystemFacade methodsFor: 'private' stamp: 'JULI 6/20/2023 21:13:28' prior: 50664102!
generateStoreSummaryWithSales: totalSales withMoney: totalMoney 
	| storeSummary |
	storeSummary := Dictionary new. 
	
	storeSummary at: 'quantity' put: totalSales.
	storeSummary at: 'total' put: totalMoney.
	storeSummary at: 'summary' put: 'The store selled a total of ',totalSales asString, ' books and raised a total amount of money equal to: ', totalMoney asString.
	
	^storeSummary! !

!testRun: #TusLibrosSystemFacadeTest #test21StorePerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:13:32'!
FAILURE!
!TusLibrosSystemFacade methodsFor: 'private' stamp: 'JULI 6/20/2023 21:13:47' prior: 50664080!
storePerformance

	| totalMoney totalSales performance |
	
	performance := Dictionary new.
	
	totalSales := self totalSales.
	totalMoney := self totalMoneyRaised.
	
	^self generateStoreSummaryWithSales: totalSales withMoney: totalMoney. 
! !
!TusLibrosSystemFacade methodsFor: 'private' stamp: 'JULI 6/20/2023 21:13:57' prior: 50664128!
storePerformance

	| totalMoney totalSales |
	
	totalSales := self totalSales.
	totalMoney := self totalMoneyRaised.
	
	^self generateStoreSummaryWithSales: totalSales withMoney: totalMoney. 
! !
!TusLibrosSystemFacade methodsFor: 'private' stamp: 'JULI 6/20/2023 21:14:07' prior: 50664067!
bookPerformance: anItem

	|  totalMoney totalSales |

	
	totalSales := self totalSalesOf: anItem.
	totalMoney := self totalMoneyRaisedBy: anItem.
	

	^self generateBookSummaryOf: anItem withSales: totalSales  withMoney: totalMoney.

	

! !
!Behavior method!
test02CanNotAddItemsThatDoNotBelongToStore
	| cart |
	#_coverageTracker987667_ markAsExecuted.
	#_coverageTracker987667_
		cover: (58 to: 61)
		declaredAt: (48 to: 51)
		by:
			(cart _ [ | receiver1 |
			receiver1 _ #_coverageTracker987667_
				cover: (66 to: 83)
				declaredAt: (66 to: 83)
				by: testObjectsFactory.
			#_coverageTracker987667_
				coverAll:
					{85 to: 94}
				evaluating: [ receiver1 createCart ]
				thatSends: #createCart
				to: receiver1 ] value).
	[ | receiver11 |
	receiver11 _ #_coverageTracker987667_
		coverAll:
			{100 to: 103}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker987667_
		coverAll:
			{108 to: 114. 173 to: 178. 211 to: 226}
		evaluating: [
			receiver11
				should: [
					[ | receiver3 |
					receiver3 _ #_coverageTracker987667_
						cover: (118 to: 121)
						declaredAt: (48 to: 51)
						by: cart.
					#_coverageTracker987667_
						coverAll:
							{123 to: 126}
						evaluating: [
							receiver3 add:
								[ | receiver2 |
								receiver2 _ #_coverageTracker987667_
									cover: (128 to: 145)
									declaredAt: (66 to: 83)
									by: testObjectsFactory.
								#_coverageTracker987667_
									coverAll:
										{147 to: 167}
									evaluating: [ receiver2 itemNotSellByTheStore ]
									thatSends: #itemNotSellByTheStore
									to: receiver2 ] value ]
						thatSends: #add:
						to: receiver3 ] value ]
				raise:
					[ | receiver4 |
					receiver4 _ #_coverageTracker987667_
						coverAll:
							{180 to: 184}
						by: Error.
					#_coverageTracker987667_
						coverAll:
							{186 to: 186}
						evaluating: [
							receiver4 -
								(#_coverageTracker987667_
									coverAll:
										{188 to: 207}
									by: MessageNotUnderstood) ]
						thatSends: #-
						to: receiver4 ] value
				withExceptionDo: [ :anError |
					[ | receiver8 |
					receiver8 _ #_coverageTracker987667_
						coverAll:
							{244 to: 247}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker987667_
						coverAll:
							{249 to: 255}
						evaluating: [
							receiver8 assert:
								[ | receiver7 |
								receiver7 _ [ | receiver5 |
								receiver5 _ #_coverageTracker987667_
									cover: (257 to: 263)
									declaredAt: (231 to: 237)
									by: anError.
								#_coverageTracker987667_
									coverAll:
										{265 to: 275}
									evaluating: [ receiver5 messageText ]
									thatSends: #messageText
									to: receiver5 ] value.
								#_coverageTracker987667_
									coverAll:
										{277 to: 277}
									evaluating: [
										receiver7 =
											[ | receiver6 |
											receiver6 _ #_coverageTracker987667_
												cover: (279 to: 282)
												declaredAt: (48 to: 51)
												by: cart.
											#_coverageTracker987667_
												coverAll:
													{284 to: 306}
												evaluating: [ receiver6 invalidItemErrorMessage ]
												thatSends: #invalidItemErrorMessage
												to: receiver6 ] value ]
									thatSends: #=
									to: receiver7 ] value ]
						thatSends: #assert:
						to: receiver8 ] value.
					[ | receiver10 |
					receiver10 _ #_coverageTracker987667_
						coverAll:
							{312 to: 315}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker987667_
						coverAll:
							{317 to: 323}
						evaluating: [
							receiver10 assert:
								[ | receiver9 |
								receiver9 _ #_coverageTracker987667_
									cover: (325 to: 328)
									declaredAt: (48 to: 51)
									by: cart.
								#_coverageTracker987667_
									coverAll:
										{330 to: 336}
									evaluating: [ receiver9 isEmpty ]
									thatSends: #isEmpty
									to: receiver9 ] value ]
						thatSends: #assert:
						to: receiver10 ] value ]]
		thatSends: #should:raise:withExceptionDo:
		to: receiver11 ] value.! !
!Behavior method!
README
	"Aunque nadie subclasifica esta clase, esta para definir el protocolo que se espera que todo MerchantProcessor sepa responder - Hernan"
	#_coverageTracker987721_ markAsExecuted.! !
!Behavior method!
test08CartRemembersTheNumberOfAddedItems
	| cart |
	#_coverageTracker987742_ markAsExecuted.
	#_coverageTracker987742_
		cover: (56 to: 59)
		declaredAt: (46 to: 49)
		by:
			(cart _ [ | receiver1 |
			receiver1 _ #_coverageTracker987742_
				cover: (64 to: 81)
				declaredAt: (64 to: 81)
				by: testObjectsFactory.
			#_coverageTracker987742_
				coverAll:
					{83 to: 92}
				evaluating: [ receiver1 createCart ]
				thatSends: #createCart
				to: receiver1 ] value).
	[ | receiver3 |
	receiver3 _ #_coverageTracker987742_
		cover: (98 to: 101)
		declaredAt: (46 to: 49)
		by: cart.
	#_coverageTracker987742_
		coverAll:
			{103 to: 106. 110 to: 112}
		evaluating: [
			receiver3
				add:
					(#_coverageTracker987742_
						coverAll:
							{108 to: 108}
						byLiteralOrPseudoVariable: 2)
				of:
					[ | receiver2 |
					receiver2 _ #_coverageTracker987742_
						cover: (114 to: 131)
						declaredAt: (64 to: 81)
						by: testObjectsFactory.
					#_coverageTracker987742_
						coverAll:
							{133 to: 150}
						evaluating: [ receiver2 itemSellByTheStore ]
						thatSends: #itemSellByTheStore
						to: receiver2 ] value ]
		thatSends: #add:of:
		to: receiver3 ] value.
	[ | receiver7 |
	receiver7 _ #_coverageTracker987742_
		coverAll:
			{154 to: 157}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker987742_
		coverAll:
			{159 to: 165}
		evaluating: [
			receiver7 assert:
				[ | receiver6 |
				receiver6 _ [ | receiver5 |
				receiver5 _ #_coverageTracker987742_
					cover: (168 to: 171)
					declaredAt: (46 to: 49)
					by: cart.
				#_coverageTracker987742_
					coverAll:
						{173 to: 186}
					evaluating: [
						receiver5 occurrencesOf:
							[ | receiver4 |
							receiver4 _ #_coverageTracker987742_
								cover: (188 to: 205)
								declaredAt: (64 to: 81)
								by: testObjectsFactory.
							#_coverageTracker987742_
								coverAll:
									{207 to: 224}
								evaluating: [ receiver4 itemSellByTheStore ]
								thatSends: #itemSellByTheStore
								to: receiver4 ] value ]
					thatSends: #occurrencesOf:
					to: receiver5 ] value.
				#_coverageTracker987742_
					coverAll:
						{227 to: 227}
					evaluating: [
						receiver6 =
							(#_coverageTracker987742_
								coverAll:
									{228 to: 229}
								byLiteralOrPseudoVariable: 2) ]
					thatSends: #=
					to: receiver6 ] value ]
		thatSends: #assert:
		to: receiver7 ] value.! !
!Behavior method!
canNotChargeAnExpiredCreditCardErrorMessage
	#_coverageTracker987767_ markAsExecuted.
	^ #_coverageTracker987767_
		coverAll:
			{49 to: 87}
		byLiteralOrPseudoVariable: 'Can not charge an expired credit card'.! !
!Behavior method!
includes: anItem
	#_coverageTracker987777_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker987777_
		cover: (21 to: 25)
		declaredAt: (21 to: 25)
		by: items.
	#_coverageTracker987777_
		coverAll:
			{27 to: 35}
		evaluating: [
			receiver1 includes:
				(#_coverageTracker987777_
					cover: (37 to: 42)
					declaredAt: (11 to: 16)
					by: anItem) ]
		thatSends: #includes:
		to: receiver1 ] value.! !
!Behavior method!
test03CreditCardNumberShouldBeDigitsOnly
	#_coverageTracker987795_ markAsExecuted.
	[ | receiver6 |
	receiver6 _ #_coverageTracker987795_
		coverAll:
			{44 to: 47}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker987795_
		coverAll:
			{52 to: 58. 161 to: 166. 200 to: 215}
		evaluating: [
			receiver6
				should: [
					[ | receiver3 |
					receiver3 _ #_coverageTracker987795_
						coverAll:
							{62 to: 71}
						by: CreditCard.
					#_coverageTracker987795_
						coverAll:
							{73 to: 81. 102 to: 109. 131 to: 141}
						evaluating: [
							receiver3
								numbered:
									(#_coverageTracker987795_
										coverAll:
											{83 to: 100}
										byLiteralOrPseudoVariable: 'a234567890123456')
								ownedBy:
									[ | receiver1 |
									receiver1 _ #_coverageTracker987795_
										coverAll:
											{111 to: 114}
										byLiteralOrPseudoVariable: self.
									#_coverageTracker987795_
										coverAll:
											{116 to: 129}
										evaluating: [ receiver1 validOwnerName ]
										thatSends: #validOwnerName
										to: receiver1 ] value
								expiringOn:
									[ | receiver2 |
									receiver2 _ #_coverageTracker987795_
										coverAll:
											{143 to: 147}
										by: Month.
									#_coverageTracker987795_
										coverAll:
											{149 to: 155}
										evaluating: [ receiver2 current ]
										thatSends: #current
										to: receiver2 ] value ]
						thatSends: #numbered:ownedBy:expiringOn:
						to: receiver3 ] value ]
				raise:
					[ | receiver4 |
					receiver4 _ #_coverageTracker987795_
						coverAll:
							{168 to: 172}
						by: Error.
					#_coverageTracker987795_
						coverAll:
							{174 to: 174}
						evaluating: [
							receiver4 -
								(#_coverageTracker987795_
									coverAll:
										{176 to: 195}
									by: MessageNotUnderstood) ]
						thatSends: #-
						to: receiver4 ] value
				withMessageText:
					[ | receiver5 |
					receiver5 _ #_coverageTracker987795_
						coverAll:
							{217 to: 226}
						by: CreditCard.
					#_coverageTracker987795_
						coverAll:
							{228 to: 256}
						evaluating: [ receiver5 invalidNumberErrorDescription ]
						thatSends: #invalidNumberErrorDescription
						to: receiver5 ] value ]
		thatSends: #should:raise:withMessageText:
		to: receiver6 ] value.! !
!Behavior method!
anotherItemSellByTheStorePrice
	#_coverageTracker987818_ markAsExecuted.
	^ #_coverageTracker987818_
		coverAll:
			{36 to: 37}
		byLiteralOrPseudoVariable: 15.! !
!Behavior method!
notExpiredCreditCard
	#_coverageTracker987834_ markAsExecuted.
	^ [ | receiver4 |
	receiver4 _ #_coverageTracker987834_
		coverAll:
			{26 to: 35}
		by: CreditCard.
	#_coverageTracker987834_
		coverAll:
			{37 to: 45. 74 to: 81. 103 to: 113}
		evaluating: [
			receiver4
				numbered:
					[ | receiver1 |
					receiver1 _ #_coverageTracker987834_
						coverAll:
							{47 to: 50}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker987834_
						coverAll:
							{52 to: 72}
						evaluating: [ receiver1 validCreditCardNumber ]
						thatSends: #validCreditCardNumber
						to: receiver1 ] value
				ownedBy:
					[ | receiver2 |
					receiver2 _ #_coverageTracker987834_
						coverAll:
							{83 to: 86}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker987834_
						coverAll:
							{88 to: 101}
						evaluating: [ receiver2 validOwnerName ]
						thatSends: #validOwnerName
						to: receiver2 ] value
				expiringOn:
					[ | receiver3 |
					receiver3 _ #_coverageTracker987834_
						coverAll:
							{115 to: 118}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker987834_
						coverAll:
							{120 to: 140}
						evaluating: [ receiver3 notExpiredMonthOfYear ]
						thatSends: #notExpiredMonthOfYear
						to: receiver3 ] value ]
		thatSends: #numbered:ownedBy:expiringOn:
		to: receiver4 ] value.! !
!Behavior method!
signalInvalidOwnerName
	#_coverageTracker987853_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ #_coverageTracker987853_
		coverAll:
			{27 to: 30}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker987853_
		coverAll:
			{32 to: 37}
		evaluating: [
			receiver2 error:
				[ | receiver1 |
				receiver1 _ #_coverageTracker987853_
					coverAll:
						{39 to: 42}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker987853_
					coverAll:
						{44 to: 75}
					evaluating: [ receiver1 invalidOwnerNameErrorDescription ]
					thatSends: #invalidOwnerNameErrorDescription
					to: receiver1 ] value ]
		thatSends: #error:
		to: receiver2 ] value.! !
!Behavior method!
listCartIdentifiedAs: aCartId
	#_coverageTracker987865_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ #_coverageTracker987865_
		coverAll:
			{35 to: 38}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker987865_
		coverAll:
			{40 to: 67. 77 to: 79}
		evaluating: [
			receiver2
				withCartSessionIdentifiedAs:
					(#_coverageTracker987865_
						cover: (69 to: 75)
						declaredAt: (23 to: 29)
						by: aCartId)
				do: [ :cartSession |
					[ | receiver1 |
					receiver1 _ #_coverageTracker987865_
						cover: (98 to: 108)
						declaredAt: (84 to: 94)
						by: cartSession.
					#_coverageTracker987865_
						coverAll:
							{110 to: 120}
						evaluating: [ receiver1 cartContent ]
						thatSends: #cartContent
						to: receiver1 ] value ]]
		thatSends: #withCartSessionIdentifiedAs:do:
		to: receiver2 ] value.! !
!Behavior method!
generateStoreSummaryWithSales: totalSales withMoney: totalMoney
	| storeSummary |
	#_coverageTracker987886_ markAsExecuted.
	#_coverageTracker987886_
		cover: (85 to: 96)
		declaredAt: (69 to: 80)
		by:
			(storeSummary _ [ | receiver1 |
			receiver1 _ #_coverageTracker987886_
				coverAll:
					{101 to: 110}
				by: Dictionary.
			#_coverageTracker987886_
				coverAll:
					{112 to: 114}
				evaluating: [ receiver1 new ]
				thatSends: #new
				to: receiver1 ] value).
	[ | receiver2 |
	receiver2 _ #_coverageTracker987886_
		cover: (121 to: 132)
		declaredAt: (69 to: 80)
		by: storeSummary.
	#_coverageTracker987886_
		coverAll:
			{134 to: 136. 149 to: 152}
		evaluating: [
			receiver2
				at:
					(#_coverageTracker987886_
						coverAll:
							{138 to: 147}
						byLiteralOrPseudoVariable: 'quantity')
				put:
					(#_coverageTracker987886_
						cover: (154 to: 163)
						declaredAt: (32 to: 41)
						by: totalSales) ]
		thatSends: #at:put:
		to: receiver2 ] value.
	[ | receiver3 |
	receiver3 _ #_coverageTracker987886_
		cover: (167 to: 178)
		declaredAt: (69 to: 80)
		by: storeSummary.
	#_coverageTracker987886_
		coverAll:
			{180 to: 182. 192 to: 195}
		evaluating: [
			receiver3
				at:
					(#_coverageTracker987886_
						coverAll:
							{184 to: 190}
						byLiteralOrPseudoVariable: 'total')
				put:
					(#_coverageTracker987886_
						cover: (197 to: 206)
						declaredAt: (54 to: 63)
						by: totalMoney) ]
		thatSends: #at:put:
		to: receiver3 ] value.
	[ | receiver9 |
	receiver9 _ #_coverageTracker987886_
		cover: (210 to: 221)
		declaredAt: (69 to: 80)
		by: storeSummary.
	#_coverageTracker987886_
		coverAll:
			{223 to: 225. 237 to: 240}
		evaluating: [
			receiver9
				at:
					(#_coverageTracker987886_
						coverAll:
							{227 to: 235}
						byLiteralOrPseudoVariable: 'summary')
				put:
					[ | receiver8 |
					receiver8 _ [ | receiver6 |
					receiver6 _ [ | receiver5 |
					receiver5 _ #_coverageTracker987886_
						coverAll:
							{242 to: 271}
						byLiteralOrPseudoVariable: 'The store selled a total of '.
					#_coverageTracker987886_
						coverAll:
							{272 to: 272}
						evaluating: [
							receiver5 ,
								[ | receiver4 |
								receiver4 _ #_coverageTracker987886_
									cover: (273 to: 282)
									declaredAt: (32 to: 41)
									by: totalSales.
								#_coverageTracker987886_
									coverAll:
										{284 to: 291}
									evaluating: [ receiver4 asString ]
									thatSends: #asString
									to: receiver4 ] value ]
						thatSends: #,
						to: receiver5 ] value.
					#_coverageTracker987886_
						coverAll:
							{292 to: 292}
						evaluating: [
							receiver6 ,
								(#_coverageTracker987886_
									coverAll:
										{294 to: 347}
									byLiteralOrPseudoVariable: ' books and raised a total amount of money equal to: ') ]
						thatSends: #,
						to: receiver6 ] value.
					#_coverageTracker987886_
						coverAll:
							{348 to: 348}
						evaluating: [
							receiver8 ,
								[ | receiver7 |
								receiver7 _ #_coverageTracker987886_
									cover: (350 to: 359)
									declaredAt: (54 to: 63)
									by: totalMoney.
								#_coverageTracker987886_
									coverAll:
										{361 to: 368}
									evaluating: [ receiver7 asString ]
									thatSends: #asString
									to: receiver7 ] value ]
						thatSends: #,
						to: receiver8 ] value ]
		thatSends: #at:put:
		to: receiver9 ] value.
	^ #_coverageTracker987886_
		cover: (375 to: 386)
		declaredAt: (69 to: 80)
		by: storeSummary.! !
!Behavior method!
listPurchasesOf: aUser authenticatingWith: aPassword
	#_coverageTracker987917_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ #_coverageTracker987917_
		coverAll:
			{57 to: 60}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker987917_
		coverAll:
			{62 to: 64. 72 to: 89. 101 to: 103}
		evaluating: [
			receiver2
				if:
					(#_coverageTracker987917_
						cover: (66 to: 70)
						declaredAt: (18 to: 22)
						by: aUser)
				authenticatesWith:
					(#_coverageTracker987917_
						cover: (91 to: 99)
						declaredAt: (44 to: 52)
						by: aPassword)
				do: [
					[ | receiver1 |
					receiver1 _ #_coverageTracker987917_
						coverAll:
							{107 to: 110}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker987917_
						coverAll:
							{112 to: 127}
						evaluating: [
							receiver1 listPurchasesOf:
								(#_coverageTracker987917_
									cover: (129 to: 133)
									declaredAt: (18 to: 22)
									by: aUser) ]
						thatSends: #listPurchasesOf:
						to: receiver1 ] value ]]
		thatSends: #if:authenticatesWith:do:
		to: receiver2 ] value.! !
!Behavior method!
of: anItem quantity: aQuantity total: aTotal
	#_coverageTracker987937_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker987937_
		coverAll:
			{49 to: 52}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker987937_
		coverAll:
			{54 to: 56}
		evaluating: [ receiver1 new ]
		thatSends: #new
		to: receiver1 ] value.
	#_coverageTracker987937_
		coverAll:
			{58 to: 70. 79 to: 87. 99 to: 104}
		evaluating: [
			receiver2
				initializeOf:
					(#_coverageTracker987937_
						cover: (72 to: 77)
						declaredAt: (5 to: 10)
						by: anItem)
				quantity:
					(#_coverageTracker987937_
						cover: (89 to: 97)
						declaredAt: (22 to: 30)
						by: aQuantity)
				total:
					(#_coverageTracker987937_
						cover: (106 to: 111)
						declaredAt: (39 to: 44)
						by: aTotal) ]
		thatSends: #initializeOf:quantity:total:
		to: receiver2 ] value.! !
!Behavior method!
createCart
	#_coverageTracker987944_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ #_coverageTracker987944_
		coverAll:
			{16 to: 19}
		by: Cart.
	#_coverageTracker987944_
		coverAll:
			{21 to: 37}
		evaluating: [
			receiver2 acceptingItemsOf:
				[ | receiver1 |
				receiver1 _ #_coverageTracker987944_
					coverAll:
						{39 to: 42}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker987944_
					coverAll:
						{44 to: 57}
					evaluating: [ receiver1 defaultCatalog ]
					thatSends: #defaultCatalog
					to: receiver1 ] value ]
		thatSends: #acceptingItemsOf:
		to: receiver2 ] value.! !
!Behavior method!
setUp
	#_coverageTracker987954_ markAsExecuted.
	#_coverageTracker987954_
		cover: (10 to: 27)
		declaredAt: (10 to: 27)
		by:
			(testObjectsFactory _ [ | receiver1 |
			receiver1 _ #_coverageTracker987954_
				coverAll:
					{32 to: 54}
				by: StoreTestObjectsFactory.
			#_coverageTracker987954_
				coverAll:
					{56 to: 58}
				evaluating: [ receiver1 new ]
				thatSends: #new
				to: receiver1 ] value).! !
!Behavior method!
test06CartRemembersAddedItems
	| cart |
	#_coverageTracker987973_ markAsExecuted.
	#_coverageTracker987973_
		cover: (45 to: 48)
		declaredAt: (35 to: 38)
		by:
			(cart _ [ | receiver1 |
			receiver1 _ #_coverageTracker987973_
				cover: (53 to: 70)
				declaredAt: (53 to: 70)
				by: testObjectsFactory.
			#_coverageTracker987973_
				coverAll:
					{72 to: 81}
				evaluating: [ receiver1 createCart ]
				thatSends: #createCart
				to: receiver1 ] value).
	[ | receiver3 |
	receiver3 _ #_coverageTracker987973_
		cover: (87 to: 90)
		declaredAt: (35 to: 38)
		by: cart.
	#_coverageTracker987973_
		coverAll:
			{92 to: 95}
		evaluating: [
			receiver3 add:
				[ | receiver2 |
				receiver2 _ #_coverageTracker987973_
					cover: (97 to: 114)
					declaredAt: (53 to: 70)
					by: testObjectsFactory.
				#_coverageTracker987973_
					coverAll:
						{116 to: 133}
					evaluating: [ receiver2 itemSellByTheStore ]
					thatSends: #itemSellByTheStore
					to: receiver2 ] value ]
		thatSends: #add:
		to: receiver3 ] value.
	[ | receiver6 |
	receiver6 _ #_coverageTracker987973_
		coverAll:
			{137 to: 140}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker987973_
		coverAll:
			{142 to: 148}
		evaluating: [
			receiver6 assert:
				[ | receiver5 |
				receiver5 _ #_coverageTracker987973_
					cover: (151 to: 154)
					declaredAt: (35 to: 38)
					by: cart.
				#_coverageTracker987973_
					coverAll:
						{156 to: 164}
					evaluating: [
						receiver5 includes:
							[ | receiver4 |
							receiver4 _ #_coverageTracker987973_
								cover: (166 to: 183)
								declaredAt: (53 to: 70)
								by: testObjectsFactory.
							#_coverageTracker987973_
								coverAll:
									{185 to: 202}
								evaluating: [ receiver4 itemSellByTheStore ]
								thatSends: #itemSellByTheStore
								to: receiver4 ] value ]
					thatSends: #includes:
					to: receiver5 ] value ]
		thatSends: #assert:
		to: receiver6 ] value.! !
!Behavior method!
invalidItemErrorMessage
	#_coverageTracker987994_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker987994_
		coverAll:
			{29 to: 32}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker987994_
		coverAll:
			{34 to: 38}
		evaluating: [ receiver1 class ]
		thatSends: #class
		to: receiver1 ] value.
	#_coverageTracker987994_
		coverAll:
			{40 to: 62}
		evaluating: [ receiver2 invalidItemErrorMessage ]
		thatSends: #invalidItemErrorMessage
		to: receiver2 ] value.! !
!Behavior method!
initializeAcceptingItemsOf: aCatalog
	#_coverageTracker988013_ markAsExecuted.
	#_coverageTracker988013_
		cover: (40 to: 46)
		declaredAt: (40 to: 46)
		by:
			(catalog _ #_coverageTracker988013_
				cover: (51 to: 58)
				declaredAt: (29 to: 36)
				by: aCatalog).
	#_coverageTracker988013_
		cover: (62 to: 66)
		declaredAt: (62 to: 66)
		by:
			(items _ [ | receiver1 |
			receiver1 _ #_coverageTracker988013_
				coverAll:
					{71 to: 73}
				by: Bag.
			#_coverageTracker988013_
				coverAll:
					{75 to: 77}
				evaluating: [ receiver1 new ]
				thatSends: #new
				to: receiver1 ] value).! !
!Behavior method!
invalidItemErrorMessage
	#_coverageTracker988022_ markAsExecuted.
	^ #_coverageTracker988022_
		coverAll:
			{29 to: 52}
		byLiteralOrPseudoVariable: 'Item is not in catalog'.! !
!Behavior method!
addToCart: anAmount of: aBook
	#_coverageTracker988042_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker988042_
		cover: (34 to: 37)
		declaredAt: (34 to: 37)
		by: cart.
	#_coverageTracker988042_
		coverAll:
			{39 to: 42. 53 to: 55}
		evaluating: [
			receiver1
				add:
					(#_coverageTracker988042_
						cover: (44 to: 51)
						declaredAt: (12 to: 19)
						by: anAmount)
				of:
					(#_coverageTracker988042_
						cover: (57 to: 61)
						declaredAt: (25 to: 29)
						by: aBook) ]
		thatSends: #add:of:
		to: receiver1 ] value.! !
!Behavior method!
test04CanNotAddNonPositiveNumberOfItems
	| cart |
	#_coverageTracker988055_ markAsExecuted.
	#_coverageTracker988055_
		cover: (55 to: 58)
		declaredAt: (45 to: 48)
		by:
			(cart _ [ | receiver1 |
			receiver1 _ #_coverageTracker988055_
				cover: (63 to: 80)
				declaredAt: (63 to: 80)
				by: testObjectsFactory.
			#_coverageTracker988055_
				coverAll:
					{82 to: 91}
				evaluating: [ receiver1 createCart ]
				thatSends: #createCart
				to: receiver1 ] value).
	[ | receiver11 |
	receiver11 _ #_coverageTracker988055_
		coverAll:
			{97 to: 100}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988055_
		coverAll:
			{105 to: 111. 172 to: 177. 210 to: 225}
		evaluating: [
			receiver11
				should: [
					[ | receiver3 |
					receiver3 _ #_coverageTracker988055_
						cover: (114 to: 117)
						declaredAt: (45 to: 48)
						by: cart.
					#_coverageTracker988055_
						coverAll:
							{119 to: 122. 126 to: 128}
						evaluating: [
							receiver3
								add:
									(#_coverageTracker988055_
										coverAll:
											{124 to: 124}
										byLiteralOrPseudoVariable: 0)
								of:
									[ | receiver2 |
									receiver2 _ #_coverageTracker988055_
										cover: (130 to: 147)
										declaredAt: (63 to: 80)
										by: testObjectsFactory.
									#_coverageTracker988055_
										coverAll:
											{149 to: 166}
										evaluating: [ receiver2 itemSellByTheStore ]
										thatSends: #itemSellByTheStore
										to: receiver2 ] value ]
						thatSends: #add:of:
						to: receiver3 ] value ]
				raise:
					[ | receiver4 |
					receiver4 _ #_coverageTracker988055_
						coverAll:
							{179 to: 183}
						by: Error.
					#_coverageTracker988055_
						coverAll:
							{185 to: 185}
						evaluating: [
							receiver4 -
								(#_coverageTracker988055_
									coverAll:
										{187 to: 206}
									by: MessageNotUnderstood) ]
						thatSends: #-
						to: receiver4 ] value
				withExceptionDo: [ :anError |
					[ | receiver8 |
					receiver8 _ #_coverageTracker988055_
						coverAll:
							{243 to: 246}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker988055_
						coverAll:
							{248 to: 254}
						evaluating: [
							receiver8 assert:
								[ | receiver7 |
								receiver7 _ [ | receiver5 |
								receiver5 _ #_coverageTracker988055_
									cover: (256 to: 262)
									declaredAt: (230 to: 236)
									by: anError.
								#_coverageTracker988055_
									coverAll:
										{264 to: 274}
									evaluating: [ receiver5 messageText ]
									thatSends: #messageText
									to: receiver5 ] value.
								#_coverageTracker988055_
									coverAll:
										{276 to: 276}
									evaluating: [
										receiver7 =
											[ | receiver6 |
											receiver6 _ #_coverageTracker988055_
												cover: (278 to: 281)
												declaredAt: (45 to: 48)
												by: cart.
											#_coverageTracker988055_
												coverAll:
													{283 to: 309}
												evaluating: [ receiver6 invalidQuantityErrorMessage ]
												thatSends: #invalidQuantityErrorMessage
												to: receiver6 ] value ]
									thatSends: #=
									to: receiver7 ] value ]
						thatSends: #assert:
						to: receiver8 ] value.
					[ | receiver10 |
					receiver10 _ #_coverageTracker988055_
						coverAll:
							{315 to: 318}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker988055_
						coverAll:
							{320 to: 326}
						evaluating: [
							receiver10 assert:
								[ | receiver9 |
								receiver9 _ #_coverageTracker988055_
									cover: (328 to: 331)
									declaredAt: (45 to: 48)
									by: cart.
								#_coverageTracker988055_
									coverAll:
										{333 to: 339}
									evaluating: [ receiver9 isEmpty ]
									thatSends: #isEmpty
									to: receiver9 ] value ]
						thatSends: #assert:
						to: receiver10 ] value ]]
		thatSends: #should:raise:withExceptionDo:
		to: receiver11 ] value.! !
!Behavior method!
lineItemsDo: aBlock
	#_coverageTracker988086_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker988086_
		cover: (25 to: 33)
		declaredAt: (25 to: 33)
		by: lineItems.
	#_coverageTracker988086_
		coverAll:
			{35 to: 37}
		evaluating: [
			receiver1 do:
				(#_coverageTracker988086_
					cover: (39 to: 44)
					declaredAt: (14 to: 19)
					by: aBlock) ]
		thatSends: #do:
		to: receiver1 ] value.! !
!Behavior method!
initializeOf: anItem quantity: aQuantity total: aTotal
	#_coverageTracker988104_ markAsExecuted.
	#_coverageTracker988104_
		cover: (58 to: 61)
		declaredAt: (58 to: 61)
		by:
			(item _ #_coverageTracker988104_
				cover: (66 to: 71)
				declaredAt: (15 to: 20)
				by: anItem).
	#_coverageTracker988104_
		cover: (75 to: 82)
		declaredAt: (75 to: 82)
		by:
			(quantity _ #_coverageTracker988104_
				cover: (87 to: 95)
				declaredAt: (32 to: 40)
				by: aQuantity).
	#_coverageTracker988104_
		cover: (99 to: 103)
		declaredAt: (99 to: 103)
		by:
			(total _ #_coverageTracker988104_
				cover: (108 to: 113)
				declaredAt: (49 to: 54)
				by: aTotal).! !
!Behavior method!
test04NameCanNotBeEmpty
	#_coverageTracker988115_ markAsExecuted.
	[ | receiver5 |
	receiver5 _ #_coverageTracker988115_
		coverAll:
			{27 to: 30}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988115_
		coverAll:
			{35 to: 41. 127 to: 132. 166 to: 181}
		evaluating: [
			receiver5
				should: [
					[ | receiver2 |
					receiver2 _ #_coverageTracker988115_
						coverAll:
							{45 to: 54}
						by: CreditCard.
					#_coverageTracker988115_
						coverAll:
							{56 to: 64. 85 to: 92. 97 to: 107}
						evaluating: [
							receiver2
								numbered:
									(#_coverageTracker988115_
										coverAll:
											{66 to: 83}
										byLiteralOrPseudoVariable: '1234567890123456')
								ownedBy:
									(#_coverageTracker988115_
										coverAll:
											{94 to: 95}
										byLiteralOrPseudoVariable: '')
								expiringOn:
									[ | receiver1 |
									receiver1 _ #_coverageTracker988115_
										coverAll:
											{109 to: 113}
										by: Month.
									#_coverageTracker988115_
										coverAll:
											{115 to: 121}
										evaluating: [ receiver1 current ]
										thatSends: #current
										to: receiver1 ] value ]
						thatSends: #numbered:ownedBy:expiringOn:
						to: receiver2 ] value ]
				raise:
					[ | receiver3 |
					receiver3 _ #_coverageTracker988115_
						coverAll:
							{134 to: 138}
						by: Error.
					#_coverageTracker988115_
						coverAll:
							{140 to: 140}
						evaluating: [
							receiver3 -
								(#_coverageTracker988115_
									coverAll:
										{142 to: 161}
									by: MessageNotUnderstood) ]
						thatSends: #-
						to: receiver3 ] value
				withMessageText:
					[ | receiver4 |
					receiver4 _ #_coverageTracker988115_
						coverAll:
							{183 to: 192}
						by: CreditCard.
					#_coverageTracker988115_
						coverAll:
							{194 to: 225}
						evaluating: [ receiver4 invalidOwnerNameErrorDescription ]
						thatSends: #invalidOwnerNameErrorDescription
						to: receiver4 ] value ]
		thatSends: #should:raise:withMessageText:
		to: receiver5 ] value.! !
!Behavior method!
lineItemsDo: aBlock
	#_coverageTracker988135_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker988135_
		cover: (25 to: 30)
		declaredAt: (25 to: 30)
		by: ticket.
	#_coverageTracker988135_
		coverAll:
			{32 to: 43}
		evaluating: [
			receiver1 lineItemsDo:
				(#_coverageTracker988135_
					cover: (45 to: 50)
					declaredAt: (14 to: 19)
					by: aBlock) ]
		thatSends: #lineItemsDo:
		to: receiver1 ] value.! !
!Behavior method!
isExpiredAt: aTime
	#_coverageTracker988148_ markAsExecuted.
	^ [ | receiver3 |
	receiver3 _ [ | receiver2 |
	receiver2 _ #_coverageTracker988148_
		cover: (27 to: 38)
		declaredAt: (27 to: 38)
		by: lastUsedTime.
	#_coverageTracker988148_
		coverAll:
			{40 to: 40}
		evaluating: [
			receiver2 +
				[ | receiver1 |
				receiver1 _ #_coverageTracker988148_
					cover: (42 to: 53)
					declaredAt: (42 to: 53)
					by: systemFacade.
				#_coverageTracker988148_
					coverAll:
						{55 to: 69}
					evaluating: [ receiver1 sessionDuration ]
					thatSends: #sessionDuration
					to: receiver1 ] value ]
		thatSends: #+
		to: receiver2 ] value.
	#_coverageTracker988148_
		coverAll:
			{72 to: 72}
		evaluating: [
			receiver3 <
				(#_coverageTracker988148_
					cover: (74 to: 78)
					declaredAt: (14 to: 18)
					by: aTime) ]
		thatSends: #<
		to: receiver3 ] value.! !
!Behavior method!
test03CanNotCheckoutWithAnExpiredCreditCart
	| cart salesBook |
	#_coverageTracker988170_ markAsExecuted.
	#_coverageTracker988170_
		cover: (68 to: 71)
		declaredAt: (49 to: 52)
		by:
			(cart _ [ | receiver1 |
			receiver1 _ #_coverageTracker988170_
				cover: (76 to: 93)
				declaredAt: (76 to: 93)
				by: testObjectsFactory.
			#_coverageTracker988170_
				coverAll:
					{95 to: 104}
				evaluating: [ receiver1 createCart ]
				thatSends: #createCart
				to: receiver1 ] value).
	[ | receiver3 |
	receiver3 _ #_coverageTracker988170_
		cover: (108 to: 111)
		declaredAt: (49 to: 52)
		by: cart.
	#_coverageTracker988170_
		coverAll:
			{113 to: 116}
		evaluating: [
			receiver3 add:
				[ | receiver2 |
				receiver2 _ #_coverageTracker988170_
					cover: (118 to: 135)
					declaredAt: (76 to: 93)
					by: testObjectsFactory.
				#_coverageTracker988170_
					coverAll:
						{137 to: 154}
					evaluating: [ receiver2 itemSellByTheStore ]
					thatSends: #itemSellByTheStore
					to: receiver2 ] value ]
		thatSends: #add:
		to: receiver3 ] value.
	#_coverageTracker988170_
		cover: (158 to: 166)
		declaredAt: (54 to: 62)
		by:
			(salesBook _ [ | receiver4 |
			receiver4 _ #_coverageTracker988170_
				coverAll:
					{171 to: 187}
				by: OrderedCollection.
			#_coverageTracker988170_
				coverAll:
					{189 to: 191}
				evaluating: [ receiver4 new ]
				thatSends: #new
				to: receiver4 ] value).
	[ | receiver16 |
	receiver16 _ #_coverageTracker988170_
		coverAll:
			{197 to: 200}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988170_
		coverAll:
			{204 to: 210. 424 to: 429. 462 to: 477}
		evaluating: [
			receiver16
				should: [
					[ | receiver8 |
					receiver8 _ #_coverageTracker988170_
						coverAll:
							{214 to: 220}
						by: Cashier.
					#_coverageTracker988170_
						coverAll:
							{227 to: 237. 249 to: 256. 291 to: 299. 343 to: 351. 362 to: 364. 395 to: 408}
						evaluating: [
							receiver8
								toCheckout:
									(#_coverageTracker988170_
										cover: (239 to: 242)
										declaredAt: (49 to: 52)
										by: cart)
								ownedBy:
									[ | receiver5 |
									receiver5 _ #_coverageTracker988170_
										cover: (258 to: 275)
										declaredAt: (76 to: 93)
										by: testObjectsFactory.
									#_coverageTracker988170_
										coverAll:
											{277 to: 284}
										evaluating: [ receiver5 customer ]
										thatSends: #customer
										to: receiver5 ] value
								charging:
									[ | receiver6 |
									receiver6 _ #_coverageTracker988170_
										cover: (301 to: 318)
										declaredAt: (76 to: 93)
										by: testObjectsFactory.
									#_coverageTracker988170_
										coverAll:
											{320 to: 336}
										evaluating: [ receiver6 expiredCreditCard ]
										thatSends: #expiredCreditCard
										to: receiver6 ] value
								throught:
									(#_coverageTracker988170_
										coverAll:
											{353 to: 356}
										byLiteralOrPseudoVariable: self)
								on:
									[ | receiver7 |
									receiver7 _ #_coverageTracker988170_
										cover: (366 to: 383)
										declaredAt: (76 to: 93)
										by: testObjectsFactory.
									#_coverageTracker988170_
										coverAll:
											{385 to: 389}
										evaluating: [ receiver7 today ]
										thatSends: #today
										to: receiver7 ] value
								registeringOn:
									(#_coverageTracker988170_
										cover: (410 to: 418)
										declaredAt: (54 to: 62)
										by: salesBook) ]
						thatSends: #toCheckout:ownedBy:charging:throught:on:registeringOn:
						to: receiver8 ] value ]
				raise:
					[ | receiver9 |
					receiver9 _ #_coverageTracker988170_
						coverAll:
							{431 to: 435}
						by: Error.
					#_coverageTracker988170_
						coverAll:
							{437 to: 437}
						evaluating: [
							receiver9 -
								(#_coverageTracker988170_
									coverAll:
										{439 to: 458}
									by: MessageNotUnderstood) ]
						thatSends: #-
						to: receiver9 ] value
				withExceptionDo: [ :anError |
					[ | receiver13 |
					receiver13 _ #_coverageTracker988170_
						coverAll:
							{496 to: 499}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker988170_
						coverAll:
							{501 to: 507}
						evaluating: [
							receiver13 assert:
								[ | receiver12 |
								receiver12 _ [ | receiver10 |
								receiver10 _ #_coverageTracker988170_
									cover: (509 to: 515)
									declaredAt: (482 to: 488)
									by: anError.
								#_coverageTracker988170_
									coverAll:
										{517 to: 527}
									evaluating: [ receiver10 messageText ]
									thatSends: #messageText
									to: receiver10 ] value.
								#_coverageTracker988170_
									coverAll:
										{529 to: 529}
									evaluating: [
										receiver12 =
											[ | receiver11 |
											receiver11 _ #_coverageTracker988170_
												coverAll:
													{531 to: 537}
												by: Cashier.
											#_coverageTracker988170_
												coverAll:
													{539 to: 581}
												evaluating: [ receiver11 canNotChargeAnExpiredCreditCardErrorMessage ]
												thatSends: #canNotChargeAnExpiredCreditCardErrorMessage
												to: receiver11 ] value ]
									thatSends: #=
									to: receiver12 ] value ]
						thatSends: #assert:
						to: receiver13 ] value.
					[ | receiver15 |
					receiver15 _ #_coverageTracker988170_
						coverAll:
							{587 to: 590}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker988170_
						coverAll:
							{592 to: 598}
						evaluating: [
							receiver15 assert:
								[ | receiver14 |
								receiver14 _ #_coverageTracker988170_
									cover: (600 to: 608)
									declaredAt: (54 to: 62)
									by: salesBook.
								#_coverageTracker988170_
									coverAll:
										{610 to: 616}
									evaluating: [ receiver14 isEmpty ]
									thatSends: #isEmpty
									to: receiver14 ] value ]
						thatSends: #assert:
						to: receiver15 ] value ]]
		thatSends: #should:raise:withExceptionDo:
		to: receiver16 ] value.! !
!Behavior method!
test05CanNotAddMoreThanOneItemNotSellByTheStore
	| cart |
	#_coverageTracker988213_ markAsExecuted.
	#_coverageTracker988213_
		cover: (63 to: 66)
		declaredAt: (53 to: 56)
		by:
			(cart _ [ | receiver1 |
			receiver1 _ #_coverageTracker988213_
				cover: (71 to: 88)
				declaredAt: (71 to: 88)
				by: testObjectsFactory.
			#_coverageTracker988213_
				coverAll:
					{90 to: 99}
				evaluating: [ receiver1 createCart ]
				thatSends: #createCart
				to: receiver1 ] value).
	[ | receiver11 |
	receiver11 _ #_coverageTracker988213_
		coverAll:
			{105 to: 108}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988213_
		coverAll:
			{113 to: 119. 184 to: 189. 222 to: 237}
		evaluating: [
			receiver11
				should: [
					[ | receiver3 |
					receiver3 _ #_coverageTracker988213_
						cover: (122 to: 125)
						declaredAt: (53 to: 56)
						by: cart.
					#_coverageTracker988213_
						coverAll:
							{127 to: 130. 134 to: 136}
						evaluating: [
							receiver3
								add:
									(#_coverageTracker988213_
										coverAll:
											{132 to: 132}
										byLiteralOrPseudoVariable: 2)
								of:
									[ | receiver2 |
									receiver2 _ #_coverageTracker988213_
										cover: (138 to: 155)
										declaredAt: (71 to: 88)
										by: testObjectsFactory.
									#_coverageTracker988213_
										coverAll:
											{157 to: 177}
										evaluating: [ receiver2 itemNotSellByTheStore ]
										thatSends: #itemNotSellByTheStore
										to: receiver2 ] value ]
						thatSends: #add:of:
						to: receiver3 ] value ]
				raise:
					[ | receiver4 |
					receiver4 _ #_coverageTracker988213_
						coverAll:
							{191 to: 195}
						by: Error.
					#_coverageTracker988213_
						coverAll:
							{197 to: 197}
						evaluating: [
							receiver4 -
								(#_coverageTracker988213_
									coverAll:
										{199 to: 218}
									by: MessageNotUnderstood) ]
						thatSends: #-
						to: receiver4 ] value
				withExceptionDo: [ :anError |
					[ | receiver8 |
					receiver8 _ #_coverageTracker988213_
						coverAll:
							{255 to: 258}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker988213_
						coverAll:
							{260 to: 266}
						evaluating: [
							receiver8 assert:
								[ | receiver7 |
								receiver7 _ [ | receiver5 |
								receiver5 _ #_coverageTracker988213_
									cover: (268 to: 274)
									declaredAt: (242 to: 248)
									by: anError.
								#_coverageTracker988213_
									coverAll:
										{276 to: 286}
									evaluating: [ receiver5 messageText ]
									thatSends: #messageText
									to: receiver5 ] value.
								#_coverageTracker988213_
									coverAll:
										{288 to: 288}
									evaluating: [
										receiver7 =
											[ | receiver6 |
											receiver6 _ #_coverageTracker988213_
												cover: (290 to: 293)
												declaredAt: (53 to: 56)
												by: cart.
											#_coverageTracker988213_
												coverAll:
													{295 to: 317}
												evaluating: [ receiver6 invalidItemErrorMessage ]
												thatSends: #invalidItemErrorMessage
												to: receiver6 ] value ]
									thatSends: #=
									to: receiver7 ] value ]
						thatSends: #assert:
						to: receiver8 ] value.
					[ | receiver10 |
					receiver10 _ #_coverageTracker988213_
						coverAll:
							{323 to: 326}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker988213_
						coverAll:
							{328 to: 334}
						evaluating: [
							receiver10 assert:
								[ | receiver9 |
								receiver9 _ #_coverageTracker988213_
									cover: (336 to: 339)
									declaredAt: (53 to: 56)
									by: cart.
								#_coverageTracker988213_
									coverAll:
										{341 to: 347}
									evaluating: [ receiver9 isEmpty ]
									thatSends: #isEmpty
									to: receiver9 ] value ]
						thatSends: #assert:
						to: receiver10 ] value ]]
		thatSends: #should:raise:withExceptionDo:
		to: receiver11 ] value.! !
!Behavior method!
test02CalculatedTotalIsCorrect
	| cart cashier |
	#_coverageTracker988250_ markAsExecuted.
	#_coverageTracker988250_
		cover: (54 to: 57)
		declaredAt: (36 to: 39)
		by:
			(cart _ [ | receiver1 |
			receiver1 _ #_coverageTracker988250_
				cover: (62 to: 79)
				declaredAt: (62 to: 79)
				by: testObjectsFactory.
			#_coverageTracker988250_
				coverAll:
					{81 to: 90}
				evaluating: [ receiver1 createCart ]
				thatSends: #createCart
				to: receiver1 ] value).
	[ | receiver3 |
	receiver3 _ #_coverageTracker988250_
		cover: (94 to: 97)
		declaredAt: (36 to: 39)
		by: cart.
	#_coverageTracker988250_
		coverAll:
			{99 to: 102. 106 to: 108}
		evaluating: [
			receiver3
				add:
					(#_coverageTracker988250_
						coverAll:
							{104 to: 104}
						byLiteralOrPseudoVariable: 2)
				of:
					[ | receiver2 |
					receiver2 _ #_coverageTracker988250_
						cover: (110 to: 127)
						declaredAt: (62 to: 79)
						by: testObjectsFactory.
					#_coverageTracker988250_
						coverAll:
							{129 to: 146}
						evaluating: [ receiver2 itemSellByTheStore ]
						thatSends: #itemSellByTheStore
						to: receiver2 ] value ]
		thatSends: #add:of:
		to: receiver3 ] value.
	#_coverageTracker988250_
		cover: (152 to: 158)
		declaredAt: (41 to: 47)
		by:
			(cashier _ [ | receiver8 |
			receiver8 _ #_coverageTracker988250_
				coverAll:
					{164 to: 170}
				by: Cashier.
			#_coverageTracker988250_
				coverAll:
					{174 to: 184. 194 to: 201. 233 to: 241. 286 to: 294. 303 to: 305. 335 to: 348}
				evaluating: [
					receiver8
						toCheckout:
							(#_coverageTracker988250_
								cover: (186 to: 189)
								declaredAt: (36 to: 39)
								by: cart)
						ownedBy:
							[ | receiver4 |
							receiver4 _ #_coverageTracker988250_
								cover: (203 to: 220)
								declaredAt: (62 to: 79)
								by: testObjectsFactory.
							#_coverageTracker988250_
								coverAll:
									{222 to: 229}
								evaluating: [ receiver4 customer ]
								thatSends: #customer
								to: receiver4 ] value
						charging:
							[ | receiver5 |
							receiver5 _ #_coverageTracker988250_
								cover: (243 to: 260)
								declaredAt: (62 to: 79)
								by: testObjectsFactory.
							#_coverageTracker988250_
								coverAll:
									{262 to: 281}
								evaluating: [ receiver5 notExpiredCreditCard ]
								thatSends: #notExpiredCreditCard
								to: receiver5 ] value
						throught:
							(#_coverageTracker988250_
								coverAll:
									{296 to: 299}
								byLiteralOrPseudoVariable: self)
						on:
							[ | receiver6 |
							receiver6 _ #_coverageTracker988250_
								cover: (307 to: 324)
								declaredAt: (62 to: 79)
								by: testObjectsFactory.
							#_coverageTracker988250_
								coverAll:
									{326 to: 330}
								evaluating: [ receiver6 today ]
								thatSends: #today
								to: receiver6 ] value
						registeringOn:
							[ | receiver7 |
							receiver7 _ #_coverageTracker988250_
								coverAll:
									{350 to: 366}
								by: OrderedCollection.
							#_coverageTracker988250_
								coverAll:
									{368 to: 370}
								evaluating: [ receiver7 new ]
								thatSends: #new
								to: receiver7 ] value ]
				thatSends: #toCheckout:ownedBy:charging:throught:on:registeringOn:
				to: receiver8 ] value).
	[ | receiver14 |
	receiver14 _ #_coverageTracker988250_
		coverAll:
			{377 to: 380}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988250_
		coverAll:
			{382 to: 388}
		evaluating: [
			receiver14 assert:
				[ | receiver13 |
				receiver13 _ [ | receiver10 |
				receiver10 _ [ | receiver9 |
				receiver9 _ #_coverageTracker988250_
					cover: (390 to: 396)
					declaredAt: (41 to: 47)
					by: cashier.
				#_coverageTracker988250_
					coverAll:
						{398 to: 405}
					evaluating: [ receiver9 checkOut ]
					thatSends: #checkOut
					to: receiver9 ] value.
				#_coverageTracker988250_
					coverAll:
						{407 to: 411}
					evaluating: [ receiver10 total ]
					thatSends: #total
					to: receiver10 ] value.
				#_coverageTracker988250_
					coverAll:
						{413 to: 413}
					evaluating: [
						receiver13 =
							[ | receiver12 |
							receiver12 _ [ | receiver11 |
							receiver11 _ #_coverageTracker988250_
								cover: (416 to: 433)
								declaredAt: (62 to: 79)
								by: testObjectsFactory.
							#_coverageTracker988250_
								coverAll:
									{435 to: 457}
								evaluating: [ receiver11 itemSellByTheStorePrice ]
								thatSends: #itemSellByTheStorePrice
								to: receiver11 ] value.
							#_coverageTracker988250_
								coverAll:
									{459 to: 459}
								evaluating: [
									receiver12 *
										(#_coverageTracker988250_
											coverAll:
												{461 to: 461}
											byLiteralOrPseudoVariable: 2) ]
								thatSends: #*
								to: receiver12 ] value ]
					thatSends: #=
					to: receiver13 ] value ]
		thatSends: #assert:
		to: receiver14 ] value.! !
!Behavior method!
notExpiredMonthOfYear
	#_coverageTracker988290_ markAsExecuted.
	^ [ | receiver4 |
	receiver4 _ #_coverageTracker988290_
		coverAll:
			{27 to: 31}
		by: Month.
	#_coverageTracker988290_
		coverAll:
			{33 to: 38. 57 to: 61}
		evaluating: [
			receiver4
				month:
					[ | receiver1 |
					receiver1 _ #_coverageTracker988290_
						cover: (40 to: 44)
						declaredAt: (40 to: 44)
						by: today.
					#_coverageTracker988290_
						coverAll:
							{46 to: 55}
						evaluating: [ receiver1 monthIndex ]
						thatSends: #monthIndex
						to: receiver1 ] value
				year:
					[ | receiver3 |
					receiver3 _ [ | receiver2 |
					receiver2 _ #_coverageTracker988290_
						cover: (63 to: 67)
						declaredAt: (40 to: 44)
						by: today.
					#_coverageTracker988290_
						coverAll:
							{69 to: 78}
						evaluating: [ receiver2 yearNumber ]
						thatSends: #yearNumber
						to: receiver2 ] value.
					#_coverageTracker988290_
						coverAll:
							{80 to: 80}
						evaluating: [
							receiver3 +
								(#_coverageTracker988290_
									coverAll:
										{81 to: 82}
									byLiteralOrPseudoVariable: 1) ]
						thatSends: #+
						to: receiver3 ] value ]
		thatSends: #month:year:
		to: receiver4 ] value.! !
!Behavior method!
list: aSale on: quantitiesByItem
	"Esto es un indicio de que por ahi conviene empezar a pensar en modelar un SaleBook - Hernan"
	#_coverageTracker988302_ markAsExecuted.
	[ | receiver7 |
	receiver7 _ #_coverageTracker988302_
		cover: (132 to: 136)
		declaredAt: (7 to: 11)
		by: aSale.
	#_coverageTracker988302_
		coverAll:
			{138 to: 149}
		evaluating: [
			receiver7 lineItemsDo: [ :aLineItem | | oldQuantity newQuantity |
				#_coverageTracker988302_
					cover: (196 to: 206)
					declaredAt: (168 to: 178)
					by:
						(oldQuantity _ [ | receiver2 |
						receiver2 _ #_coverageTracker988302_
							cover: (211 to: 226)
							declaredAt: (17 to: 32)
							by: quantitiesByItem.
						#_coverageTracker988302_
							coverAll:
								{228 to: 230. 247 to: 258}
							evaluating: [
								receiver2
									at:
										[ | receiver1 |
										receiver1 _ #_coverageTracker988302_
											cover: (232 to: 240)
											declaredAt: (154 to: 162)
											by: aLineItem.
										#_coverageTracker988302_
											coverAll:
												{242 to: 245}
											evaluating: [ receiver1 item ]
											thatSends: #item
											to: receiver1 ] value
									ifAbsentPut: [
										#_coverageTracker988302_
											coverAll:
												{262 to: 262}
											byLiteralOrPseudoVariable: 0 ]]
							thatSends: #at:ifAbsentPut:
							to: receiver2 ] value).
				#_coverageTracker988302_
					cover: (269 to: 279)
					declaredAt: (180 to: 190)
					by:
						(newQuantity _ [ | receiver4 |
						receiver4 _ #_coverageTracker988302_
							cover: (284 to: 294)
							declaredAt: (168 to: 178)
							by: oldQuantity.
						#_coverageTracker988302_
							coverAll:
								{296 to: 296}
							evaluating: [
								receiver4 +
									[ | receiver3 |
									receiver3 _ #_coverageTracker988302_
										cover: (298 to: 306)
										declaredAt: (154 to: 162)
										by: aLineItem.
									#_coverageTracker988302_
										coverAll:
											{308 to: 315}
										evaluating: [ receiver3 quantity ]
										thatSends: #quantity
										to: receiver3 ] value ]
							thatSends: #+
							to: receiver4 ] value).
				[ | receiver6 |
				receiver6 _ #_coverageTracker988302_
					cover: (320 to: 335)
					declaredAt: (17 to: 32)
					by: quantitiesByItem.
				#_coverageTracker988302_
					coverAll:
						{337 to: 339. 356 to: 359}
					evaluating: [
						receiver6
							at:
								[ | receiver5 |
								receiver5 _ #_coverageTracker988302_
									cover: (341 to: 349)
									declaredAt: (154 to: 162)
									by: aLineItem.
								#_coverageTracker988302_
									coverAll:
										{351 to: 354}
									evaluating: [ receiver5 item ]
									thatSends: #item
									to: receiver5 ] value
							put:
								(#_coverageTracker988302_
									cover: (361 to: 371)
									declaredAt: (180 to: 190)
									by: newQuantity) ]
					thatSends: #at:put:
					to: receiver6 ] value ]]
		thatSends: #lineItemsDo:
		to: receiver7 ] value.! !
!Behavior method!
test01CreditCardNumberWithLessThan16DigitsIsNotValid
	#_coverageTracker988333_ markAsExecuted.
	[ | receiver6 |
	receiver6 _ #_coverageTracker988333_
		coverAll:
			{56 to: 59}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988333_
		coverAll:
			{64 to: 70. 172 to: 177. 211 to: 226}
		evaluating: [
			receiver6
				should: [
					[ | receiver3 |
					receiver3 _ #_coverageTracker988333_
						coverAll:
							{74 to: 83}
						by: CreditCard.
					#_coverageTracker988333_
						coverAll:
							{85 to: 93. 113 to: 120. 142 to: 152}
						evaluating: [
							receiver3
								numbered:
									(#_coverageTracker988333_
										coverAll:
											{95 to: 111}
										byLiteralOrPseudoVariable: '123456789012345')
								ownedBy:
									[ | receiver1 |
									receiver1 _ #_coverageTracker988333_
										coverAll:
											{122 to: 125}
										byLiteralOrPseudoVariable: self.
									#_coverageTracker988333_
										coverAll:
											{127 to: 140}
										evaluating: [ receiver1 validOwnerName ]
										thatSends: #validOwnerName
										to: receiver1 ] value
								expiringOn:
									[ | receiver2 |
									receiver2 _ #_coverageTracker988333_
										coverAll:
											{154 to: 158}
										by: Month.
									#_coverageTracker988333_
										coverAll:
											{160 to: 166}
										evaluating: [ receiver2 current ]
										thatSends: #current
										to: receiver2 ] value ]
						thatSends: #numbered:ownedBy:expiringOn:
						to: receiver3 ] value ]
				raise:
					[ | receiver4 |
					receiver4 _ #_coverageTracker988333_
						coverAll:
							{179 to: 183}
						by: Error.
					#_coverageTracker988333_
						coverAll:
							{185 to: 185}
						evaluating: [
							receiver4 -
								(#_coverageTracker988333_
									coverAll:
										{187 to: 206}
									by: MessageNotUnderstood) ]
						thatSends: #-
						to: receiver4 ] value
				withMessageText:
					[ | receiver5 |
					receiver5 _ #_coverageTracker988333_
						coverAll:
							{228 to: 237}
						by: CreditCard.
					#_coverageTracker988333_
						coverAll:
							{239 to: 267}
						evaluating: [ receiver5 invalidNumberErrorDescription ]
						thatSends: #invalidNumberErrorDescription
						to: receiver5 ] value ]
		thatSends: #should:raise:withMessageText:
		to: receiver6 ] value.! !
!Behavior method!
itemsAndQuantitiesDo: aBlock
	#_coverageTracker988348_ markAsExecuted.
	^ [ | receiver3 |
	receiver3 _ [ | receiver1 |
	receiver1 _ #_coverageTracker988348_
		cover: (35 to: 39)
		declaredAt: (35 to: 39)
		by: items.
	#_coverageTracker988348_
		coverAll:
			{41 to: 48}
		evaluating: [ receiver1 contents ]
		thatSends: #contents
		to: receiver1 ] value.
	#_coverageTracker988348_
		coverAll:
			{50 to: 65}
		evaluating: [
			receiver3 keysAndValuesDo: [ :anItem :aQuantity |
				[ | receiver2 |
				receiver2 _ #_coverageTracker988348_
					cover: (90 to: 95)
					declaredAt: (23 to: 28)
					by: aBlock.
				#_coverageTracker988348_
					coverAll:
						{97 to: 102. 111 to: 116}
					evaluating: [
						receiver2
							value:
								(#_coverageTracker988348_
									cover: (104 to: 109)
									declaredAt: (70 to: 75)
									by: anItem)
							value:
								(#_coverageTracker988348_
									cover: (118 to: 126)
									declaredAt: (78 to: 86)
									by: aQuantity) ]
					thatSends: #value:value:
					to: receiver2 ] value ]]
		thatSends: #keysAndValuesDo:
		to: receiver3 ] value.! !
!Behavior method!
advanceTime: aDuration
	#_coverageTracker988357_ markAsExecuted.
	#_coverageTracker988357_
		cover: (35 to: 37)
		declaredAt: (28 to: 30)
		by:
			(now _ [ | receiver1 |
			receiver1 _ #_coverageTracker988357_
				cover: (28 to: 30)
				declaredAt: (28 to: 30)
				by: now.
			#_coverageTracker988357_
				coverAll:
					{39 to: 39}
				evaluating: [
					receiver1 +
						(#_coverageTracker988357_
							cover: (41 to: 49)
							declaredAt: (14 to: 22)
							by: aDuration) ]
				thatSends: #+
				to: receiver1 ] value).! !
!Behavior method!
merchantProcessor
	#_coverageTracker988378_ markAsExecuted.
	^ #_coverageTracker988378_
		cover: (23 to: 39)
		declaredAt: (23 to: 39)
		by: merchantProcessor.! !
!Behavior method!
signalCanNotChargeAnExpiredCreditCard
	#_coverageTracker988382_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ #_coverageTracker988382_
		coverAll:
			{42 to: 45}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988382_
		coverAll:
			{47 to: 52}
		evaluating: [
			receiver2 error:
				[ | receiver1 |
				receiver1 _ #_coverageTracker988382_
					coverAll:
						{54 to: 57}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker988382_
					coverAll:
						{59 to: 101}
					evaluating: [ receiver1 canNotChargeAnExpiredCreditCardErrorMessage ]
					thatSends: #canNotChargeAnExpiredCreditCardErrorMessage
					to: receiver1 ] value ]
		thatSends: #error:
		to: receiver2 ] value.! !
!Behavior method!
signalCartSessionExpired
	#_coverageTracker988400_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ #_coverageTracker988400_
		coverAll:
			{29 to: 32}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988400_
		coverAll:
			{34 to: 39}
		evaluating: [
			receiver2 error:
				[ | receiver1 |
				receiver1 _ #_coverageTracker988400_
					cover: (41 to: 52)
					declaredAt: (41 to: 52)
					by: systemFacade.
				#_coverageTracker988400_
					coverAll:
						{54 to: 86}
					evaluating: [ receiver1 sessionHasExpiredErrorDescription ]
					thatSends: #sessionHasExpiredErrorDescription
					to: receiver1 ] value ]
		thatSends: #error:
		to: receiver2 ] value.! !
!Behavior method!
defaultCatalog
	#_coverageTracker988417_ markAsExecuted.
	^ [ | cascadeReceiver |
	cascadeReceiver _ [ | receiver1 |
	receiver1 _ #_coverageTracker988417_
		coverAll:
			{21 to: 30}
		by: Dictionary.
	#_coverageTracker988417_
		coverAll:
			{32 to: 34}
		evaluating: [ receiver1 new ]
		thatSends: #new
		to: receiver1 ] value.
	[ | receiver4 |
	receiver4 _ cascadeReceiver.
	#_coverageTracker988417_
		coverAll:
			{38 to: 40. 66 to: 69}
		evaluating: [
			receiver4
				at:
					[ | receiver2 |
					receiver2 _ #_coverageTracker988417_
						coverAll:
							{42 to: 45}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker988417_
						coverAll:
							{47 to: 64}
						evaluating: [ receiver2 itemSellByTheStore ]
						thatSends: #itemSellByTheStore
						to: receiver2 ] value
				put:
					[ | receiver3 |
					receiver3 _ #_coverageTracker988417_
						coverAll:
							{71 to: 74}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker988417_
						coverAll:
							{76 to: 98}
						evaluating: [ receiver3 itemSellByTheStorePrice ]
						thatSends: #itemSellByTheStorePrice
						to: receiver3 ] value ]
		thatSends: #at:put:
		to: receiver4 ] value.
	[ | receiver7 |
	receiver7 _ cascadeReceiver.
	#_coverageTracker988417_
		coverAll:
			{103 to: 105. 138 to: 141}
		evaluating: [
			receiver7
				at:
					[ | receiver5 |
					receiver5 _ #_coverageTracker988417_
						coverAll:
							{107 to: 110}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker988417_
						coverAll:
							{112 to: 136}
						evaluating: [ receiver5 anotherItemSellByTheStore ]
						thatSends: #anotherItemSellByTheStore
						to: receiver5 ] value
				put:
					[ | receiver6 |
					receiver6 _ #_coverageTracker988417_
						coverAll:
							{143 to: 146}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker988417_
						coverAll:
							{148 to: 177}
						evaluating: [ receiver6 anotherItemSellByTheStorePrice ]
						thatSends: #anotherItemSellByTheStorePrice
						to: receiver6 ] value ]
		thatSends: #at:put:
		to: receiver7 ] value.
	[ | receiver8 |
	receiver8 _ cascadeReceiver.
	#_coverageTracker988417_
		coverAll:
			{182 to: 189}
		evaluating: [ receiver8 yourself ]
		thatSends: #yourself
		to: receiver8 ] value ] value.! !
!Behavior method!
of: aCollectionOfLineItems
	#_coverageTracker988440_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker988440_
		coverAll:
			{31 to: 34}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988440_
		coverAll:
			{36 to: 38}
		evaluating: [ receiver1 new ]
		thatSends: #new
		to: receiver1 ] value.
	#_coverageTracker988440_
		coverAll:
			{40 to: 52}
		evaluating: [
			receiver2 initializeOf:
				(#_coverageTracker988440_
					cover: (54 to: 75)
					declaredAt: (5 to: 26)
					by: aCollectionOfLineItems) ]
		thatSends: #initializeOf:
		to: receiver2 ] value.! !
!Behavior method!
invalidOwnerNameErrorDescription
	#_coverageTracker988451_ markAsExecuted.
	^ #_coverageTracker988451_
		coverAll:
			{38 to: 66}
		byLiteralOrPseudoVariable: 'Owner name can not be empty'.! !
!Behavior method!
initializeAuthenticatingWith: aValidUsersAndPasswords acceptingItemsOf: aCatalog registeringOn: aSalesBook debitingThrought: aMerchantProcessor measuringTimeWith: aClock
	#_coverageTracker988467_ markAsExecuted.
	#_coverageTracker988467_
		cover: (181 to: 202)
		declaredAt: (181 to: 202)
		by:
			(validUsersAndPasswords _ #_coverageTracker988467_
				cover: (207 to: 229)
				declaredAt: (31 to: 53)
				by: aValidUsersAndPasswords).
	#_coverageTracker988467_
		cover: (233 to: 239)
		declaredAt: (233 to: 239)
		by:
			(catalog _ #_coverageTracker988467_
				cover: (244 to: 251)
				declaredAt: (75 to: 82)
				by: aCatalog).
	#_coverageTracker988467_
		cover: (255 to: 263)
		declaredAt: (255 to: 263)
		by:
			(salesBook _ #_coverageTracker988467_
				cover: (268 to: 277)
				declaredAt: (101 to: 110)
				by: aSalesBook).
	#_coverageTracker988467_
		cover: (281 to: 297)
		declaredAt: (281 to: 297)
		by:
			(merchantProcessor _ #_coverageTracker988467_
				cover: (302 to: 319)
				declaredAt: (132 to: 149)
				by: aMerchantProcessor).
	#_coverageTracker988467_
		cover: (323 to: 327)
		declaredAt: (323 to: 327)
		by:
			(clock _ #_coverageTracker988467_
				cover: (332 to: 337)
				declaredAt: (172 to: 177)
				by: aClock).
	#_coverageTracker988467_
		cover: (343 to: 354)
		declaredAt: (343 to: 354)
		by:
			(cartSessions _ [ | receiver1 |
			receiver1 _ #_coverageTracker988467_
				coverAll:
					{359 to: 368}
				by: Dictionary.
			#_coverageTracker988467_
				coverAll:
					{370 to: 372}
				evaluating: [ receiver1 new ]
				thatSends: #new
				to: receiver1 ] value).
	#_coverageTracker988467_
		cover: (376 to: 381)
		declaredAt: (376 to: 381)
		by:
			(lastId _ #_coverageTracker988467_
				coverAll:
					{386 to: 386}
				byLiteralOrPseudoVariable: 0).! !
!Behavior method!
test04CheckoutRegistersASale
	| cart cashier salesBook total |
	#_coverageTracker988486_ markAsExecuted.
	#_coverageTracker988486_
		cover: (67 to: 70)
		declaredAt: (34 to: 37)
		by:
			(cart _ [ | receiver1 |
			receiver1 _ #_coverageTracker988486_
				cover: (75 to: 92)
				declaredAt: (75 to: 92)
				by: testObjectsFactory.
			#_coverageTracker988486_
				coverAll:
					{94 to: 103}
				evaluating: [ receiver1 createCart ]
				thatSends: #createCart
				to: receiver1 ] value).
	[ | receiver3 |
	receiver3 _ #_coverageTracker988486_
		cover: (107 to: 110)
		declaredAt: (34 to: 37)
		by: cart.
	#_coverageTracker988486_
		coverAll:
			{112 to: 115}
		evaluating: [
			receiver3 add:
				[ | receiver2 |
				receiver2 _ #_coverageTracker988486_
					cover: (117 to: 134)
					declaredAt: (75 to: 92)
					by: testObjectsFactory.
				#_coverageTracker988486_
					coverAll:
						{136 to: 153}
					evaluating: [ receiver2 itemSellByTheStore ]
					thatSends: #itemSellByTheStore
					to: receiver2 ] value ]
		thatSends: #add:
		to: receiver3 ] value.
	#_coverageTracker988486_
		cover: (157 to: 165)
		declaredAt: (47 to: 55)
		by:
			(salesBook _ [ | receiver4 |
			receiver4 _ #_coverageTracker988486_
				coverAll:
					{170 to: 186}
				by: OrderedCollection.
			#_coverageTracker988486_
				coverAll:
					{188 to: 190}
				evaluating: [ receiver4 new ]
				thatSends: #new
				to: receiver4 ] value).
	#_coverageTracker988486_
		cover: (196 to: 202)
		declaredAt: (39 to: 45)
		by:
			(cashier _ [ | receiver8 |
			receiver8 _ #_coverageTracker988486_
				coverAll:
					{206 to: 212}
				by: Cashier.
			#_coverageTracker988486_
				coverAll:
					{217 to: 227. 237 to: 244. 277 to: 285. 329 to: 337. 346 to: 348. 377 to: 390}
				evaluating: [
					receiver8
						toCheckout:
							(#_coverageTracker988486_
								cover: (229 to: 232)
								declaredAt: (34 to: 37)
								by: cart)
						ownedBy:
							[ | receiver5 |
							receiver5 _ #_coverageTracker988486_
								cover: (246 to: 263)
								declaredAt: (75 to: 92)
								by: testObjectsFactory.
							#_coverageTracker988486_
								coverAll:
									{265 to: 272}
								evaluating: [ receiver5 customer ]
								thatSends: #customer
								to: receiver5 ] value
						charging:
							[ | receiver6 |
							receiver6 _ #_coverageTracker988486_
								cover: (287 to: 304)
								declaredAt: (75 to: 92)
								by: testObjectsFactory.
							#_coverageTracker988486_
								coverAll:
									{306 to: 325}
								evaluating: [ receiver6 notExpiredCreditCard ]
								thatSends: #notExpiredCreditCard
								to: receiver6 ] value
						throught:
							(#_coverageTracker988486_
								coverAll:
									{339 to: 342}
								byLiteralOrPseudoVariable: self)
						on:
							[ | receiver7 |
							receiver7 _ #_coverageTracker988486_
								cover: (350 to: 367)
								declaredAt: (75 to: 92)
								by: testObjectsFactory.
							#_coverageTracker988486_
								coverAll:
									{369 to: 373}
								evaluating: [ receiver7 today ]
								thatSends: #today
								to: receiver7 ] value
						registeringOn:
							(#_coverageTracker988486_
								cover: (392 to: 400)
								declaredAt: (47 to: 55)
								by: salesBook) ]
				thatSends: #toCheckout:ownedBy:charging:throught:on:registeringOn:
				to: receiver8 ] value).
	#_coverageTracker988486_
		cover: (407 to: 411)
		declaredAt: (57 to: 61)
		by:
			(total _ [ | receiver10 |
			receiver10 _ [ | receiver9 |
			receiver9 _ #_coverageTracker988486_
				cover: (416 to: 422)
				declaredAt: (39 to: 45)
				by: cashier.
			#_coverageTracker988486_
				coverAll:
					{424 to: 431}
				evaluating: [ receiver9 checkOut ]
				thatSends: #checkOut
				to: receiver9 ] value.
			#_coverageTracker988486_
				coverAll:
					{433 to: 437}
				evaluating: [ receiver10 total ]
				thatSends: #total
				to: receiver10 ] value).
	[ | receiver13 |
	receiver13 _ #_coverageTracker988486_
		coverAll:
			{447 to: 450}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988486_
		coverAll:
			{452 to: 458}
		evaluating: [
			receiver13 assert:
				[ | receiver12 |
				receiver12 _ [ | receiver11 |
				receiver11 _ #_coverageTracker988486_
					cover: (460 to: 468)
					declaredAt: (47 to: 55)
					by: salesBook.
				#_coverageTracker988486_
					coverAll:
						{470 to: 473}
					evaluating: [ receiver11 size ]
					thatSends: #size
					to: receiver11 ] value.
				#_coverageTracker988486_
					coverAll:
						{475 to: 475}
					evaluating: [
						receiver12 =
							(#_coverageTracker988486_
								coverAll:
									{477 to: 477}
								byLiteralOrPseudoVariable: 1) ]
					thatSends: #=
					to: receiver12 ] value ]
		thatSends: #assert:
		to: receiver13 ] value.
	[ | receiver17 |
	receiver17 _ #_coverageTracker988486_
		coverAll:
			{481 to: 484}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988486_
		coverAll:
			{486 to: 492}
		evaluating: [
			receiver17 assert:
				[ | receiver16 |
				receiver16 _ [ | receiver15 |
				receiver15 _ [ | receiver14 |
				receiver14 _ #_coverageTracker988486_
					cover: (494 to: 502)
					declaredAt: (47 to: 55)
					by: salesBook.
				#_coverageTracker988486_
					coverAll:
						{504 to: 508}
					evaluating: [ receiver14 first ]
					thatSends: #first
					to: receiver14 ] value.
				#_coverageTracker988486_
					coverAll:
						{510 to: 514}
					evaluating: [ receiver15 total ]
					thatSends: #total
					to: receiver15 ] value.
				#_coverageTracker988486_
					coverAll:
						{516 to: 516}
					evaluating: [
						receiver16 =
							(#_coverageTracker988486_
								cover: (518 to: 522)
								declaredAt: (57 to: 61)
								by: total) ]
					thatSends: #=
					to: receiver16 ] value ]
		thatSends: #assert:
		to: receiver17 ] value.! !
!Behavior method!
test05CashierChargesCreditCardUsingMerchantProcessor
	| cart cashier salesBook total creditCard debitedAmout debitedCreditCard |
	#_coverageTracker988542_ markAsExecuted.
	#_coverageTracker988542_
		cover: (134 to: 137)
		declaredAt: (58 to: 61)
		by:
			(cart _ [ | receiver1 |
			receiver1 _ #_coverageTracker988542_
				cover: (142 to: 159)
				declaredAt: (142 to: 159)
				by: testObjectsFactory.
			#_coverageTracker988542_
				coverAll:
					{161 to: 170}
				evaluating: [ receiver1 createCart ]
				thatSends: #createCart
				to: receiver1 ] value).
	[ | receiver3 |
	receiver3 _ #_coverageTracker988542_
		cover: (174 to: 177)
		declaredAt: (58 to: 61)
		by: cart.
	#_coverageTracker988542_
		coverAll:
			{179 to: 182}
		evaluating: [
			receiver3 add:
				[ | receiver2 |
				receiver2 _ #_coverageTracker988542_
					cover: (184 to: 201)
					declaredAt: (142 to: 159)
					by: testObjectsFactory.
				#_coverageTracker988542_
					coverAll:
						{203 to: 220}
					evaluating: [ receiver2 itemSellByTheStore ]
					thatSends: #itemSellByTheStore
					to: receiver2 ] value ]
		thatSends: #add:
		to: receiver3 ] value.
	#_coverageTracker988542_
		cover: (224 to: 233)
		declaredAt: (87 to: 96)
		by:
			(creditCard _ [ | receiver4 |
			receiver4 _ #_coverageTracker988542_
				cover: (238 to: 255)
				declaredAt: (142 to: 159)
				by: testObjectsFactory.
			#_coverageTracker988542_
				coverAll:
					{257 to: 276}
				evaluating: [ receiver4 notExpiredCreditCard ]
				thatSends: #notExpiredCreditCard
				to: receiver4 ] value).
	#_coverageTracker988542_
		cover: (280 to: 288)
		declaredAt: (71 to: 79)
		by:
			(salesBook _ [ | receiver5 |
			receiver5 _ #_coverageTracker988542_
				coverAll:
					{293 to: 309}
				by: OrderedCollection.
			#_coverageTracker988542_
				coverAll:
					{311 to: 313}
				evaluating: [ receiver5 new ]
				thatSends: #new
				to: receiver5 ] value).
	#_coverageTracker988542_
		cover: (319 to: 325)
		declaredAt: (63 to: 69)
		by:
			(cashier _ [ | receiver8 |
			receiver8 _ #_coverageTracker988542_
				coverAll:
					{329 to: 335}
				by: Cashier.
			#_coverageTracker988542_
				coverAll:
					{340 to: 350. 359 to: 366. 399 to: 407. 422 to: 430. 439 to: 441. 470 to: 483}
				evaluating: [
					receiver8
						toCheckout:
							(#_coverageTracker988542_
								cover: (352 to: 355)
								declaredAt: (58 to: 61)
								by: cart)
						ownedBy:
							[ | receiver6 |
							receiver6 _ #_coverageTracker988542_
								cover: (368 to: 385)
								declaredAt: (142 to: 159)
								by: testObjectsFactory.
							#_coverageTracker988542_
								coverAll:
									{387 to: 394}
								evaluating: [ receiver6 customer ]
								thatSends: #customer
								to: receiver6 ] value
						charging:
							(#_coverageTracker988542_
								cover: (409 to: 418)
								declaredAt: (87 to: 96)
								by: creditCard)
						throught:
							(#_coverageTracker988542_
								coverAll:
									{432 to: 435}
								byLiteralOrPseudoVariable: self)
						on:
							[ | receiver7 |
							receiver7 _ #_coverageTracker988542_
								cover: (443 to: 460)
								declaredAt: (142 to: 159)
								by: testObjectsFactory.
							#_coverageTracker988542_
								coverAll:
									{462 to: 466}
								evaluating: [ receiver7 today ]
								thatSends: #today
								to: receiver7 ] value
						registeringOn:
							(#_coverageTracker988542_
								cover: (485 to: 493)
								declaredAt: (71 to: 79)
								by: salesBook) ]
				thatSends: #toCheckout:ownedBy:charging:throught:on:registeringOn:
				to: receiver8 ] value).
	#_coverageTracker988542_
		cover: (500 to: 512)
		declaredAt: (500 to: 512)
		by:
			(debitBehavior _ [ :anAmount :aCreditCard |
			#_coverageTracker988542_
				cover: (547 to: 558)
				declaredAt: (98 to: 109)
				by:
					(debitedAmout _ #_coverageTracker988542_
						cover: (563 to: 570)
						declaredAt: (520 to: 527)
						by: anAmount).
			#_coverageTracker988542_
				cover: (575 to: 591)
				declaredAt: (111 to: 127)
				by:
					(debitedCreditCard _ #_coverageTracker988542_
						cover: (596 to: 606)
						declaredAt: (530 to: 540)
						by: aCreditCard) ]).
	#_coverageTracker988542_
		cover: (612 to: 616)
		declaredAt: (81 to: 85)
		by:
			(total _ [ | receiver10 |
			receiver10 _ [ | receiver9 |
			receiver9 _ #_coverageTracker988542_
				cover: (621 to: 627)
				declaredAt: (63 to: 69)
				by: cashier.
			#_coverageTracker988542_
				coverAll:
					{629 to: 636}
				evaluating: [ receiver9 checkOut ]
				thatSends: #checkOut
				to: receiver9 ] value.
			#_coverageTracker988542_
				coverAll:
					{638 to: 642}
				evaluating: [ receiver10 total ]
				thatSends: #total
				to: receiver10 ] value).
	[ | receiver12 |
	receiver12 _ #_coverageTracker988542_
		coverAll:
			{652 to: 655}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988542_
		coverAll:
			{657 to: 663}
		evaluating: [
			receiver12 assert:
				[ | receiver11 |
				receiver11 _ #_coverageTracker988542_
					cover: (665 to: 681)
					declaredAt: (111 to: 127)
					by: debitedCreditCard.
				#_coverageTracker988542_
					coverAll:
						{683 to: 683}
					evaluating: [
						receiver11 =
							(#_coverageTracker988542_
								cover: (685 to: 694)
								declaredAt: (87 to: 96)
								by: creditCard) ]
					thatSends: #=
					to: receiver11 ] value ]
		thatSends: #assert:
		to: receiver12 ] value.
	[ | receiver14 |
	receiver14 _ #_coverageTracker988542_
		coverAll:
			{698 to: 701}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988542_
		coverAll:
			{703 to: 709}
		evaluating: [
			receiver14 assert:
				[ | receiver13 |
				receiver13 _ #_coverageTracker988542_
					cover: (711 to: 722)
					declaredAt: (98 to: 109)
					by: debitedAmout.
				#_coverageTracker988542_
					coverAll:
						{724 to: 724}
					evaluating: [
						receiver13 =
							(#_coverageTracker988542_
								cover: (726 to: 730)
								declaredAt: (81 to: 85)
								by: total) ]
					thatSends: #=
					to: receiver13 ] value ]
		thatSends: #assert:
		to: receiver14 ] value.! !
!Behavior method!
signalInvalidNumber
	#_coverageTracker988590_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ #_coverageTracker988590_
		coverAll:
			{24 to: 27}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988590_
		coverAll:
			{29 to: 34}
		evaluating: [
			receiver2 error:
				[ | receiver1 |
				receiver1 _ #_coverageTracker988590_
					coverAll:
						{36 to: 39}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker988590_
					coverAll:
						{41 to: 69}
					evaluating: [ receiver1 invalidNumberErrorDescription ]
					thatSends: #invalidNumberErrorDescription
					to: receiver1 ] value ]
		thatSends: #error:
		to: receiver2 ] value.! !
!Behavior method!
generateCartId
	"Recuerden que esto es un ejemplo, por lo que voy a generar ids numericos consecutivos, pero en una 
	implementacion real no deberian se numeros consecutivos ni nada que genere problemas de seguridad - Hernan"
	#_coverageTracker988608_ markAsExecuted.
	#_coverageTracker988608_
		cover: (242 to: 247)
		declaredAt: (232 to: 237)
		by:
			(lastId _ [ | receiver1 |
			receiver1 _ #_coverageTracker988608_
				cover: (232 to: 237)
				declaredAt: (232 to: 237)
				by: lastId.
			#_coverageTracker988608_
				coverAll:
					{249 to: 249}
				evaluating: [
					receiver1 +
						(#_coverageTracker988608_
							coverAll:
								{251 to: 251}
							byLiteralOrPseudoVariable: 1) ]
				thatSends: #+
				to: receiver1 ] value).
	^ #_coverageTracker988608_
		cover: (256 to: 261)
		declaredAt: (232 to: 237)
		by: lastId.! !
!Behavior method!
toCheckout: aCart ownedBy: anOwner charging: aCreditCard throught: aMerchantProcessor on: aDate registeringOn: aSalesBook
	#_coverageTracker988624_ markAsExecuted.
	[ | receiver1 |
	receiver1 _ #_coverageTracker988624_
		coverAll:
			{126 to: 129}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988624_
		coverAll:
			{131 to: 147}
		evaluating: [
			receiver1 assertIsNotEmpty:
				(#_coverageTracker988624_
					cover: (149 to: 153)
					declaredAt: (13 to: 17)
					by: aCart) ]
		thatSends: #assertIsNotEmpty:
		to: receiver1 ] value.
	[ | receiver2 |
	receiver2 _ #_coverageTracker988624_
		coverAll:
			{157 to: 160}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988624_
		coverAll:
			{162 to: 180. 194 to: 196}
		evaluating: [
			receiver2
				assertIsNotExpired:
					(#_coverageTracker988624_
						cover: (182 to: 192)
						declaredAt: (46 to: 56)
						by: aCreditCard)
				on:
					(#_coverageTracker988624_
						cover: (198 to: 202)
						declaredAt: (91 to: 95)
						by: aDate) ]
		thatSends: #assertIsNotExpired:on:
		to: receiver2 ] value.
	^ [ | receiver4 |
	receiver4 _ [ | receiver3 |
	receiver3 _ #_coverageTracker988624_
		coverAll:
			{209 to: 212}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988624_
		coverAll:
			{214 to: 216}
		evaluating: [ receiver3 new ]
		thatSends: #new
		to: receiver3 ] value.
	#_coverageTracker988624_
		coverAll:
			{218 to: 238. 246 to: 253. 263 to: 271. 285 to: 293. 314 to: 327}
		evaluating: [
			receiver4
				initializeToCheckout:
					(#_coverageTracker988624_
						cover: (240 to: 244)
						declaredAt: (13 to: 17)
						by: aCart)
				ownedBy:
					(#_coverageTracker988624_
						cover: (255 to: 261)
						declaredAt: (28 to: 34)
						by: anOwner)
				charging:
					(#_coverageTracker988624_
						cover: (273 to: 283)
						declaredAt: (46 to: 56)
						by: aCreditCard)
				throught:
					(#_coverageTracker988624_
						cover: (295 to: 312)
						declaredAt: (68 to: 85)
						by: aMerchantProcessor)
				registeringOn:
					(#_coverageTracker988624_
						cover: (329 to: 338)
						declaredAt: (112 to: 121)
						by: aSalesBook) ]
		thatSends: #initializeToCheckout:ownedBy:charging:throught:registeringOn:
		to: receiver4 ] value.! !
!Behavior method!
isEmpty
	#_coverageTracker988654_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker988654_
		cover: (13 to: 17)
		declaredAt: (13 to: 17)
		by: items.
	#_coverageTracker988654_
		coverAll:
			{19 to: 25}
		evaluating: [ receiver1 isEmpty ]
		thatSends: #isEmpty
		to: receiver1 ] value.! !
!Behavior method!
content
	#_coverageTracker988665_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker988665_
		cover: (13 to: 17)
		declaredAt: (13 to: 17)
		by: items.
	#_coverageTracker988665_
		coverAll:
			{19 to: 22}
		evaluating: [ receiver1 copy ]
		thatSends: #copy
		to: receiver1 ] value.! !
!Behavior method!
today
	#_coverageTracker988674_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker988674_
		cover: (10 to: 21)
		declaredAt: (10 to: 21)
		by: systemFacade.
	#_coverageTracker988674_
		coverAll:
			{23 to: 27}
		evaluating: [ receiver1 today ]
		thatSends: #today
		to: receiver1 ] value.! !
!Behavior method!
invalidItemErrorMessage
	#_coverageTracker988685_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker988685_
		coverAll:
			{29 to: 32}
		by: Cart.
	#_coverageTracker988685_
		coverAll:
			{34 to: 56}
		evaluating: [ receiver1 invalidItemErrorMessage ]
		thatSends: #invalidItemErrorMessage
		to: receiver1 ] value.! !
!Behavior method!
do: aBlock
	| now |
	#_coverageTracker988707_ markAsExecuted.
	#_coverageTracker988707_
		cover: (24 to: 26)
		declaredAt: (16 to: 18)
		by:
			(now _ [ | receiver1 |
			receiver1 _ #_coverageTracker988707_
				coverAll:
					{31 to: 34}
				byLiteralOrPseudoVariable: self.
			#_coverageTracker988707_
				coverAll:
					{36 to: 38}
				evaluating: [ receiver1 now ]
				thatSends: #now
				to: receiver1 ] value).
	[ | receiver2 |
	receiver2 _ #_coverageTracker988707_
		coverAll:
			{42 to: 45}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988707_
		coverAll:
			{47 to: 68}
		evaluating: [
			receiver2 assertIsNotExpirtedAt:
				(#_coverageTracker988707_
					cover: (70 to: 72)
					declaredAt: (16 to: 18)
					by: now) ]
		thatSends: #assertIsNotExpirtedAt:
		to: receiver2 ] value.
	^ [ | receiver4 |
	receiver4 _ [
	[ | receiver3 |
	receiver3 _ #_coverageTracker988707_
		cover: (82 to: 87)
		declaredAt: (5 to: 10)
		by: aBlock.
	#_coverageTracker988707_
		coverAll:
			{89 to: 94}
		evaluating: [
			receiver3 value:
				(#_coverageTracker988707_
					coverAll:
						{96 to: 99}
					byLiteralOrPseudoVariable: self) ]
		thatSends: #value:
		to: receiver3 ] value ].
	#_coverageTracker988707_
		coverAll:
			{103 to: 109}
		evaluating: [
			receiver4 ensure: [
				#_coverageTracker988707_
					cover: (113 to: 124)
					declaredAt: (113 to: 124)
					by:
						(lastUsedTime _ #_coverageTracker988707_
							cover: (129 to: 131)
							declaredAt: (16 to: 18)
							by: now) ]]
		thatSends: #ensure:
		to: receiver4 ] value.! !
!Behavior method!
initializeDoneBy: aCustomer certifiedWith: aTicket
	#_coverageTracker988726_ markAsExecuted.
	#_coverageTracker988726_
		cover: (55 to: 62)
		declaredAt: (55 to: 62)
		by:
			(customer _ #_coverageTracker988726_
				cover: (67 to: 75)
				declaredAt: (19 to: 27)
				by: aCustomer).
	#_coverageTracker988726_
		cover: (79 to: 84)
		declaredAt: (79 to: 84)
		by:
			(ticket _ #_coverageTracker988726_
				cover: (89 to: 95)
				declaredAt: (44 to: 50)
				by: aTicket).! !
!Behavior method!
acceptingItemsOf: aCatalog
	#_coverageTracker988743_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker988743_
		coverAll:
			{31 to: 34}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988743_
		coverAll:
			{36 to: 38}
		evaluating: [ receiver1 new ]
		thatSends: #new
		to: receiver1 ] value.
	#_coverageTracker988743_
		coverAll:
			{40 to: 66}
		evaluating: [
			receiver2 initializeAcceptingItemsOf:
				(#_coverageTracker988743_
					cover: (68 to: 75)
					declaredAt: (19 to: 26)
					by: aCatalog) ]
		thatSends: #initializeAcceptingItemsOf:
		to: receiver2 ] value.! !
!Behavior method!
assertIsValidQuantity: aQuantity
	#_coverageTracker988770_ markAsExecuted.
	[ | receiver3 |
	receiver3 _ [ | receiver1 |
	receiver1 _ #_coverageTracker988770_
		cover: (36 to: 44)
		declaredAt: (24 to: 32)
		by: aQuantity.
	#_coverageTracker988770_
		coverAll:
			{46 to: 61}
		evaluating: [ receiver1 strictlyPositive ]
		thatSends: #strictlyPositive
		to: receiver1 ] value.
	#_coverageTracker988770_
		coverAll:
			{63 to: 70}
		evaluating: [
			receiver3 ifFalse: [
				[ | receiver2 |
				receiver2 _ #_coverageTracker988770_
					coverAll:
						{73 to: 76}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker988770_
					coverAll:
						{78 to: 98}
					evaluating: [ receiver2 signalInvalidQuantity ]
					thatSends: #signalInvalidQuantity
					to: receiver2 ] value ]]
		thatSends: #ifFalse:
		to: receiver3 ] value.! !
!Behavior method!
invalidNumberErrorDescription
	#_coverageTracker988778_ markAsExecuted.
	^ #_coverageTracker988778_
		coverAll:
			{35 to: 84}
		byLiteralOrPseudoVariable: 'Invalid credit card number. It must be 16 digits'.! !
!Behavior method!
initializeOwnedBy: aCustomer with: aCart on: aSystemFacade
	#_coverageTracker988788_ markAsExecuted.
	#_coverageTracker988788_
		cover: (62 to: 66)
		declaredAt: (62 to: 66)
		by:
			(owner _ #_coverageTracker988788_
				cover: (71 to: 79)
				declaredAt: (20 to: 28)
				by: aCustomer).
	#_coverageTracker988788_
		cover: (83 to: 86)
		declaredAt: (83 to: 86)
		by:
			(cart _ #_coverageTracker988788_
				cover: (91 to: 95)
				declaredAt: (36 to: 40)
				by: aCart).
	#_coverageTracker988788_
		cover: (99 to: 110)
		declaredAt: (99 to: 110)
		by:
			(systemFacade _ #_coverageTracker988788_
				cover: (115 to: 127)
				declaredAt: (46 to: 58)
				by: aSystemFacade).
	#_coverageTracker988788_
		cover: (131 to: 142)
		declaredAt: (131 to: 142)
		by:
			(lastUsedTime _ [ | receiver1 |
			receiver1 _ #_coverageTracker988788_
				coverAll:
					{147 to: 150}
				byLiteralOrPseudoVariable: self.
			#_coverageTracker988788_
				coverAll:
					{152 to: 154}
				evaluating: [ receiver1 now ]
				thatSends: #now
				to: receiver1 ] value).! !
!Behavior method!
createTicket
	| lineItems |
	#_coverageTracker988815_ markAsExecuted.
	#_coverageTracker988815_
		cover: (33 to: 41)
		declaredAt: (18 to: 26)
		by:
			(lineItems _ [ | receiver1 |
			receiver1 _ #_coverageTracker988815_
				coverAll:
					{46 to: 62}
				by: OrderedCollection.
			#_coverageTracker988815_
				coverAll:
					{64 to: 66}
				evaluating: [ receiver1 new ]
				thatSends: #new
				to: receiver1 ] value).
	[ | receiver4 |
	receiver4 _ #_coverageTracker988815_
		cover: (70 to: 73)
		declaredAt: (70 to: 73)
		by: cart.
	#_coverageTracker988815_
		coverAll:
			{75 to: 95}
		evaluating: [
			receiver4 itemsAndQuantitiesDo: [ :anItem :aQuantity |
				[ | receiver3 |
				receiver3 _ #_coverageTracker988815_
					cover: (123 to: 131)
					declaredAt: (18 to: 26)
					by: lineItems.
				#_coverageTracker988815_
					coverAll:
						{133 to: 136}
					evaluating: [
						receiver3 add:
							[ | receiver2 |
							receiver2 _ #_coverageTracker988815_
								coverAll:
									{139 to: 142}
								byLiteralOrPseudoVariable: self.
							#_coverageTracker988815_
								coverAll:
									{144 to: 160. 169 to: 177}
								evaluating: [
									receiver2
										createLineItemOf:
											(#_coverageTracker988815_
												cover: (162 to: 167)
												declaredAt: (100 to: 105)
												by: anItem)
										quantity:
											(#_coverageTracker988815_
												cover: (179 to: 187)
												declaredAt: (108 to: 116)
												by: aQuantity) ]
								thatSends: #createLineItemOf:quantity:
								to: receiver2 ] value ]
					thatSends: #add:
					to: receiver3 ] value ]]
		thatSends: #itemsAndQuantitiesDo:
		to: receiver4 ] value.
	#_coverageTracker988815_
		cover: (195 to: 200)
		declaredAt: (195 to: 200)
		by:
			(ticket _ [ | receiver5 |
			receiver5 _ #_coverageTracker988815_
				coverAll:
					{205 to: 210}
				by: Ticket.
			#_coverageTracker988815_
				coverAll:
					{212 to: 214}
				evaluating: [
					receiver5 of:
						(#_coverageTracker988815_
							cover: (216 to: 224)
							declaredAt: (18 to: 26)
							by: lineItems) ]
				thatSends: #of:
				to: receiver5 ] value).! !
!Behavior method!
creditCardHasNoCreditErrorMessage
	#_coverageTracker988836_ markAsExecuted.
	^ #_coverageTracker988836_
		coverAll:
			{39 to: 65}
		byLiteralOrPseudoVariable: 'Credit card has no credit'.! !
!Behavior method!
test06IsNotExpiredOnExpirationMonth
	| expirationMonth creditCard |
	#_coverageTracker988847_ markAsExecuted.
	#_coverageTracker988847_
		cover: (73 to: 87)
		declaredAt: (41 to: 55)
		by:
			(expirationMonth _ [ | receiver1 |
			receiver1 _ #_coverageTracker988847_
				coverAll:
					{92 to: 96}
				by: Month.
			#_coverageTracker988847_
				coverAll:
					{98 to: 103. 114 to: 118}
				evaluating: [
					receiver1
						month:
							(#_coverageTracker988847_
								coverAll:
									{105 to: 112}
								byLiteralOrPseudoVariable: #January)
						year:
							(#_coverageTracker988847_
								coverAll:
									{120 to: 123}
								byLiteralOrPseudoVariable: 2020) ]
				thatSends: #month:year:
				to: receiver1 ] value).
	#_coverageTracker988847_
		cover: (128 to: 137)
		declaredAt: (57 to: 66)
		by:
			(creditCard _ [ | receiver3 |
			receiver3 _ #_coverageTracker988847_
				coverAll:
					{142 to: 151}
				by: CreditCard.
			#_coverageTracker988847_
				coverAll:
					{156 to: 164. 188 to: 195. 220 to: 230}
				evaluating: [
					receiver3
						numbered:
							(#_coverageTracker988847_
								coverAll:
									{166 to: 183}
								byLiteralOrPseudoVariable: '1234567890123456')
						ownedBy:
							[ | receiver2 |
							receiver2 _ #_coverageTracker988847_
								coverAll:
									{197 to: 200}
								byLiteralOrPseudoVariable: self.
							#_coverageTracker988847_
								coverAll:
									{202 to: 215}
								evaluating: [ receiver2 validOwnerName ]
								thatSends: #validOwnerName
								to: receiver2 ] value
						expiringOn:
							(#_coverageTracker988847_
								cover: (232 to: 246)
								declaredAt: (41 to: 55)
								by: expirationMonth) ]
				thatSends: #numbered:ownedBy:expiringOn:
				to: receiver3 ] value).
	[ | receiver5 |
	receiver5 _ #_coverageTracker988847_
		coverAll:
			{253 to: 256}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988847_
		coverAll:
			{258 to: 262}
		evaluating: [
			receiver5 deny:
				[ | receiver4 |
				receiver4 _ #_coverageTracker988847_
					cover: (265 to: 274)
					declaredAt: (57 to: 66)
					by: creditCard.
				#_coverageTracker988847_
					coverAll:
						{276 to: 287}
					evaluating: [
						receiver4 isExpiredOn:
							(#_coverageTracker988847_
								cover: (289 to: 303)
								declaredAt: (41 to: 55)
								by: expirationMonth) ]
					thatSends: #isExpiredOn:
					to: receiver4 ] value ]
		thatSends: #deny:
		to: receiver5 ] value.! !
!Behavior method!
listPurchasesOf: aUser
	| sales soldItems total |
	#_coverageTracker988879_ markAsExecuted.
	#_coverageTracker988879_
		cover: (55 to: 59)
		declaredAt: (28 to: 32)
		by:
			(sales _ [ | receiver1 |
			receiver1 _ #_coverageTracker988879_
				coverAll:
					{64 to: 67}
				byLiteralOrPseudoVariable: self.
			#_coverageTracker988879_
				coverAll:
					{69 to: 80}
				evaluating: [
					receiver1 salesDoneBy:
						(#_coverageTracker988879_
							cover: (82 to: 86)
							declaredAt: (18 to: 22)
							by: aUser) ]
				thatSends: #salesDoneBy:
				to: receiver1 ] value).
	#_coverageTracker988879_
		cover: (91 to: 99)
		declaredAt: (34 to: 42)
		by:
			(soldItems _ [ | receiver4 |
			receiver4 _ #_coverageTracker988879_
				cover: (104 to: 108)
				declaredAt: (28 to: 32)
				by: sales.
			#_coverageTracker988879_
				coverAll:
					{112 to: 118. 137 to: 141}
				evaluating: [
					receiver4
						inject:
							[ | receiver2 |
							receiver2 _ #_coverageTracker988879_
								coverAll:
									{120 to: 129}
								by: Dictionary.
							#_coverageTracker988879_
								coverAll:
									{131 to: 133}
								evaluating: [ receiver2 new ]
								thatSends: #new
								to: receiver2 ] value
						into: [ :quantitiesByItem :aSale |
							[ | receiver3 |
							receiver3 _ #_coverageTracker988879_
								coverAll:
									{176 to: 179}
								byLiteralOrPseudoVariable: self.
							#_coverageTracker988879_
								coverAll:
									{181 to: 185. 193 to: 195}
								evaluating: [
									receiver3
										list:
											(#_coverageTracker988879_
												cover: (187 to: 191)
												declaredAt: (164 to: 168)
												by: aSale)
										on:
											(#_coverageTracker988879_
												cover: (197 to: 212)
												declaredAt: (146 to: 161)
												by: quantitiesByItem) ]
								thatSends: #list:on:
								to: receiver3 ] value.
							#_coverageTracker988879_
								cover: (218 to: 233)
								declaredAt: (146 to: 161)
								by: quantitiesByItem ]]
				thatSends: #inject:into:
				to: receiver4 ] value).
	#_coverageTracker988879_
		cover: (239 to: 243)
		declaredAt: (44 to: 48)
		by:
			(total _ [ | receiver6 |
			receiver6 _ #_coverageTracker988879_
				cover: (248 to: 252)
				declaredAt: (28 to: 32)
				by: sales.
			#_coverageTracker988879_
				coverAll:
					{254 to: 257. 284 to: 291}
				evaluating: [
					receiver6
						sum: [ :aSale |
							[ | receiver5 |
							receiver5 _ #_coverageTracker988879_
								cover: (270 to: 274)
								declaredAt: (262 to: 266)
								by: aSale.
							#_coverageTracker988879_
								coverAll:
									{276 to: 280}
								evaluating: [ receiver5 total ]
								thatSends: #total
								to: receiver5 ] value ]
						ifEmpty: [
							#_coverageTracker988879_
								coverAll:
									{295 to: 295}
								byLiteralOrPseudoVariable: 0 ]]
				thatSends: #sum:ifEmpty:
				to: receiver6 ] value).
	^ [ | receiver7 |
	receiver7 _ #_coverageTracker988879_
		coverAll:
			{302 to: 306}
		by: Array.
	#_coverageTracker988879_
		coverAll:
			{308 to: 312. 324 to: 328}
		evaluating: [
			receiver7
				with:
					(#_coverageTracker988879_
						cover: (314 to: 322)
						declaredAt: (34 to: 42)
						by: soldItems)
				with:
					(#_coverageTracker988879_
						cover: (330 to: 334)
						declaredAt: (44 to: 48)
						by: total) ]
		thatSends: #with:with:
		to: receiver7 ] value.! !
!Behavior method!
createCartFor: aUser authenticatedWith: aPassword
	#_coverageTracker988911_ markAsExecuted.
	^ [ | receiver5 |
	receiver5 _ #_coverageTracker988911_
		coverAll:
			{55 to: 58}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988911_
		coverAll:
			{60 to: 62. 70 to: 87. 99 to: 101}
		evaluating: [
			receiver5
				if:
					(#_coverageTracker988911_
						cover: (64 to: 68)
						declaredAt: (16 to: 20)
						by: aUser)
				authenticatesWith:
					(#_coverageTracker988911_
						cover: (89 to: 97)
						declaredAt: (41 to: 49)
						by: aPassword)
				do: [ | cartId cartSession |
					#_coverageTracker988911_
						cover: (132 to: 137)
						declaredAt: (107 to: 112)
						by:
							(cartId _ [ | receiver1 |
							receiver1 _ #_coverageTracker988911_
								coverAll:
									{142 to: 145}
								byLiteralOrPseudoVariable: self.
							#_coverageTracker988911_
								coverAll:
									{147 to: 160}
								evaluating: [ receiver1 generateCartId ]
								thatSends: #generateCartId
								to: receiver1 ] value).
					#_coverageTracker988911_
						cover: (165 to: 175)
						declaredAt: (114 to: 124)
						by:
							(cartSession _ [ | receiver3 |
							receiver3 _ #_coverageTracker988911_
								coverAll:
									{180 to: 190}
								by: CartSession.
							#_coverageTracker988911_
								coverAll:
									{192 to: 199. 207 to: 211. 246 to: 248}
								evaluating: [
									receiver3
										ownedBy:
											(#_coverageTracker988911_
												cover: (201 to: 205)
												declaredAt: (16 to: 20)
												by: aUser)
										with:
											[ | receiver2 |
											receiver2 _ #_coverageTracker988911_
												coverAll:
													{214 to: 217}
												by: Cart.
											#_coverageTracker988911_
												coverAll:
													{219 to: 235}
												evaluating: [
													receiver2 acceptingItemsOf:
														(#_coverageTracker988911_
															cover: (237 to: 243)
															declaredAt: (237 to: 243)
															by: catalog) ]
												thatSends: #acceptingItemsOf:
												to: receiver2 ] value
										on:
											(#_coverageTracker988911_
												coverAll:
													{250 to: 253}
												byLiteralOrPseudoVariable: self) ]
								thatSends: #ownedBy:with:on:
								to: receiver3 ] value).
					[ | receiver4 |
					receiver4 _ #_coverageTracker988911_
						cover: (259 to: 270)
						declaredAt: (259 to: 270)
						by: cartSessions.
					#_coverageTracker988911_
						coverAll:
							{272 to: 274. 283 to: 286}
						evaluating: [
							receiver4
								at:
									(#_coverageTracker988911_
										cover: (276 to: 281)
										declaredAt: (107 to: 112)
										by: cartId)
								put:
									(#_coverageTracker988911_
										cover: (288 to: 298)
										declaredAt: (114 to: 124)
										by: cartSession) ]
						thatSends: #at:put:
						to: receiver4 ] value.
					#_coverageTracker988911_
						cover: (305 to: 310)
						declaredAt: (107 to: 112)
						by: cartId ]]
		thatSends: #if:authenticatesWith:do:
		to: receiver5 ] value.! !
!Behavior method!
bookPerformance: anItem
	| totalMoney totalSales |
	#_coverageTracker988944_ markAsExecuted.
	#_coverageTracker988944_
		cover: (58 to: 67)
		declaredAt: (41 to: 50)
		by:
			(totalSales _ [ | receiver1 |
			receiver1 _ #_coverageTracker988944_
				coverAll:
					{72 to: 75}
				byLiteralOrPseudoVariable: self.
			#_coverageTracker988944_
				coverAll:
					{77 to: 89}
				evaluating: [
					receiver1 totalSalesOf:
						(#_coverageTracker988944_
							cover: (91 to: 96)
							declaredAt: (18 to: 23)
							by: anItem) ]
				thatSends: #totalSalesOf:
				to: receiver1 ] value).
	#_coverageTracker988944_
		cover: (100 to: 109)
		declaredAt: (30 to: 39)
		by:
			(totalMoney _ [ | receiver2 |
			receiver2 _ #_coverageTracker988944_
				coverAll:
					{114 to: 117}
				byLiteralOrPseudoVariable: self.
			#_coverageTracker988944_
				coverAll:
					{119 to: 137}
				evaluating: [
					receiver2 totalMoneyRaisedBy:
						(#_coverageTracker988944_
							cover: (139 to: 144)
							declaredAt: (18 to: 23)
							by: anItem) ]
				thatSends: #totalMoneyRaisedBy:
				to: receiver2 ] value).
	^ [ | receiver3 |
	receiver3 _ #_coverageTracker988944_
		coverAll:
			{152 to: 155}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker988944_
		coverAll:
			{157 to: 178. 187 to: 196. 210 to: 219}
		evaluating: [
			receiver3
				generateBookSummaryOf:
					(#_coverageTracker988944_
						cover: (180 to: 185)
						declaredAt: (18 to: 23)
						by: anItem)
				withSales:
					(#_coverageTracker988944_
						cover: (198 to: 207)
						declaredAt: (41 to: 50)
						by: totalSales)
				withMoney:
					(#_coverageTracker988944_
						cover: (221 to: 230)
						declaredAt: (30 to: 39)
						by: totalMoney) ]
		thatSends: #generateBookSummaryOf:withSales:withMoney:
		to: receiver3 ] value.! !
!Behavior method!
today
	#_coverageTracker988970_ markAsExecuted.
	^ #_coverageTracker988970_
		cover: (12 to: 16)
		declaredAt: (12 to: 16)
		by: today.! !
!Behavior method!
totalMoneyRaised
	#_coverageTracker988989_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker988989_
		coverAll:
			{22 to: 26}
		by: Delay.
	#_coverageTracker988989_
		coverAll:
			{28 to: 38}
		evaluating: [
			receiver1 forSeconds:
				(#_coverageTracker988989_
					coverAll:
						{40 to: 40}
					byLiteralOrPseudoVariable: 1) ]
		thatSends: #forSeconds:
		to: receiver1 ] value.
	#_coverageTracker988989_
		coverAll:
			{43 to: 46}
		evaluating: [ receiver2 wait ]
		thatSends: #wait
		to: receiver2 ] value.
	^ [ | receiver4 |
	receiver4 _ #_coverageTracker988989_
		cover: (53 to: 61)
		declaredAt: (53 to: 61)
		by: salesBook.
	#_coverageTracker988989_
		coverAll:
			{63 to: 66}
		evaluating: [
			receiver4 sum: [ :aSale |
				[ | receiver3 |
				receiver3 _ #_coverageTracker988989_
					cover: (78 to: 82)
					declaredAt: (70 to: 74)
					by: aSale.
				#_coverageTracker988989_
					coverAll:
						{84 to: 88}
					evaluating: [ receiver3 total ]
					thatSends: #total
					to: receiver3 ] value ]]
		thatSends: #sum:
		to: receiver4 ] value.! !
!Behavior method!
doneBy: aCustomer certifiedWith: aTicket
	#_coverageTracker989013_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker989013_
		coverAll:
			{46 to: 49}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989013_
		coverAll:
			{51 to: 53}
		evaluating: [ receiver1 new ]
		thatSends: #new
		to: receiver1 ] value.
	#_coverageTracker989013_
		coverAll:
			{55 to: 71. 83 to: 96}
		evaluating: [
			receiver2
				initializeDoneBy:
					(#_coverageTracker989013_
						cover: (73 to: 81)
						declaredAt: (9 to: 17)
						by: aCustomer)
				certifiedWith:
					(#_coverageTracker989013_
						cover: (98 to: 104)
						declaredAt: (34 to: 40)
						by: aTicket) ]
		thatSends: #initializeDoneBy:certifiedWith:
		to: receiver2 ] value.! !
!Behavior method!
assertIsNotExpirtedAt: aTime
	#_coverageTracker989021_ markAsExecuted.
	[ | receiver3 |
	receiver3 _ [ | receiver1 |
	receiver1 _ #_coverageTracker989021_
		coverAll:
			{33 to: 36}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989021_
		coverAll:
			{38 to: 49}
		evaluating: [
			receiver1 isExpiredAt:
				(#_coverageTracker989021_
					cover: (51 to: 55)
					declaredAt: (24 to: 28)
					by: aTime) ]
		thatSends: #isExpiredAt:
		to: receiver1 ] value.
	#_coverageTracker989021_
		coverAll:
			{58 to: 64}
		evaluating: [
			receiver3 ifTrue: [
				[ | receiver2 |
				receiver2 _ #_coverageTracker989021_
					coverAll:
						{68 to: 71}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker989021_
					coverAll:
						{73 to: 96}
					evaluating: [ receiver2 signalCartSessionExpired ]
					thatSends: #signalCartSessionExpired
					to: receiver2 ] value ]]
		thatSends: #ifTrue:
		to: receiver3 ] value.! !
!Behavior method!
item
	#_coverageTracker989043_ markAsExecuted.
	^ #_coverageTracker989043_
		cover: (11 to: 14)
		declaredAt: (11 to: 14)
		by: item.! !
!Behavior method!
debit: anAmount from: aCreditCard
	#_coverageTracker989055_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker989055_
		cover: (39 to: 51)
		declaredAt: (39 to: 51)
		by: debitBehavior.
	#_coverageTracker989055_
		coverAll:
			{53 to: 58. 69 to: 74}
		evaluating: [
			receiver1
				value:
					(#_coverageTracker989055_
						cover: (60 to: 67)
						declaredAt: (8 to: 15)
						by: anAmount)
				value:
					(#_coverageTracker989055_
						cover: (76 to: 86)
						declaredAt: (23 to: 33)
						by: aCreditCard) ]
		thatSends: #value:value:
		to: receiver1 ] value.! !
!Behavior method!
isExpiredOn: aDate
	#_coverageTracker989076_ markAsExecuted.
	^ [ | receiver6 |
	receiver6 _ [ | receiver1 |
	receiver1 _ #_coverageTracker989076_
		cover: (25 to: 34)
		declaredAt: (25 to: 34)
		by: expiration.
	#_coverageTracker989076_
		coverAll:
			{36 to: 40}
		evaluating: [ receiver1 start ]
		thatSends: #start
		to: receiver1 ] value.
	#_coverageTracker989076_
		coverAll:
			{42 to: 42}
		evaluating: [
			receiver6 <
				[ | receiver5 |
				receiver5 _ [ | receiver4 |
				receiver4 _ #_coverageTracker989076_
					coverAll:
						{45 to: 49}
					by: Month.
				#_coverageTracker989076_
					coverAll:
						{51 to: 56. 75 to: 79}
					evaluating: [
						receiver4
							month:
								[ | receiver2 |
								receiver2 _ #_coverageTracker989076_
									cover: (58 to: 62)
									declaredAt: (14 to: 18)
									by: aDate.
								#_coverageTracker989076_
									coverAll:
										{64 to: 73}
									evaluating: [ receiver2 monthIndex ]
									thatSends: #monthIndex
									to: receiver2 ] value
							year:
								[ | receiver3 |
								receiver3 _ #_coverageTracker989076_
									cover: (81 to: 85)
									declaredAt: (14 to: 18)
									by: aDate.
								#_coverageTracker989076_
									coverAll:
										{87 to: 96}
									evaluating: [ receiver3 yearNumber ]
									thatSends: #yearNumber
									to: receiver3 ] value ]
					thatSends: #month:year:
					to: receiver4 ] value.
				#_coverageTracker989076_
					coverAll:
						{99 to: 103}
					evaluating: [ receiver5 start ]
					thatSends: #start
					to: receiver5 ] value ]
		thatSends: #<
		to: receiver6 ] value.! !
!Behavior method!
ownedBy: aCustomer with: aCart on: aSystemFacade
	#_coverageTracker989088_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker989088_
		coverAll:
			{53 to: 56}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989088_
		coverAll:
			{58 to: 60}
		evaluating: [ receiver1 new ]
		thatSends: #new
		to: receiver1 ] value.
	#_coverageTracker989088_
		coverAll:
			{62 to: 79. 91 to: 95. 103 to: 105}
		evaluating: [
			receiver2
				initializeOwnedBy:
					(#_coverageTracker989088_
						cover: (81 to: 89)
						declaredAt: (10 to: 18)
						by: aCustomer)
				with:
					(#_coverageTracker989088_
						cover: (97 to: 101)
						declaredAt: (26 to: 30)
						by: aCart)
				on:
					(#_coverageTracker989088_
						cover: (107 to: 119)
						declaredAt: (36 to: 48)
						by: aSystemFacade) ]
		thatSends: #initializeOwnedBy:with:on:
		to: receiver2 ] value.! !
!Behavior method!
ownerName
	#_coverageTracker989108_ markAsExecuted.
	^ #_coverageTracker989108_
		cover: (15 to: 23)
		declaredAt: (15 to: 23)
		by: ownerName.! !
!Behavior method!
numbered: aNumber ownedBy: anOwnerName expiringOn: aMonth
	#_coverageTracker989120_ markAsExecuted.
	[ | receiver1 |
	receiver1 _ #_coverageTracker989120_
		coverAll:
			{63 to: 66}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989120_
		coverAll:
			{68 to: 87}
		evaluating: [
			receiver1 assertIsValidNumber:
				(#_coverageTracker989120_
					cover: (89 to: 95)
					declaredAt: (11 to: 17)
					by: aNumber) ]
		thatSends: #assertIsValidNumber:
		to: receiver1 ] value.
	[ | receiver2 |
	receiver2 _ #_coverageTracker989120_
		coverAll:
			{99 to: 102}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989120_
		coverAll:
			{104 to: 126}
		evaluating: [
			receiver2 assertIsValidOwnerName:
				(#_coverageTracker989120_
					cover: (128 to: 138)
					declaredAt: (28 to: 38)
					by: anOwnerName) ]
		thatSends: #assertIsValidOwnerName:
		to: receiver2 ] value.
	^ [ | receiver4 |
	receiver4 _ [ | receiver3 |
	receiver3 _ #_coverageTracker989120_
		coverAll:
			{145 to: 148}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989120_
		coverAll:
			{150 to: 152}
		evaluating: [ receiver3 new ]
		thatSends: #new
		to: receiver3 ] value.
	#_coverageTracker989120_
		coverAll:
			{154 to: 172. 182 to: 189. 203 to: 213}
		evaluating: [
			receiver4
				initializeNumbered:
					(#_coverageTracker989120_
						cover: (174 to: 180)
						declaredAt: (11 to: 17)
						by: aNumber)
				ownedBy:
					(#_coverageTracker989120_
						cover: (191 to: 201)
						declaredAt: (28 to: 38)
						by: anOwnerName)
				expiringOn:
					(#_coverageTracker989120_
						cover: (215 to: 220)
						declaredAt: (52 to: 57)
						by: aMonth) ]
		thatSends: #initializeNumbered:ownedBy:expiringOn:
		to: receiver4 ] value.! !
!Behavior method!
now: aTime
	#_coverageTracker989141_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker989141_
		coverAll:
			{17 to: 20}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989141_
		coverAll:
			{22 to: 24}
		evaluating: [ receiver1 new ]
		thatSends: #new
		to: receiver1 ] value.
	#_coverageTracker989141_
		coverAll:
			{26 to: 39}
		evaluating: [
			receiver2 initializeNow:
				(#_coverageTracker989141_
					cover: (41 to: 45)
					declaredAt: (6 to: 10)
					by: aTime) ]
		thatSends: #initializeNow:
		to: receiver2 ] value.! !
!Behavior method!
number
	#_coverageTracker989154_ markAsExecuted.
	^ #_coverageTracker989154_
		cover: (12 to: 17)
		declaredAt: (12 to: 17)
		by: number.! !
!Behavior method!
signalCartCanNotBeEmpty
	#_coverageTracker989173_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ #_coverageTracker989173_
		coverAll:
			{27 to: 30}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989173_
		coverAll:
			{32 to: 37}
		evaluating: [
			receiver2 error:
				[ | receiver1 |
				receiver1 _ #_coverageTracker989173_
					coverAll:
						{39 to: 42}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker989173_
					coverAll:
						{44 to: 72}
					evaluating: [ receiver1 cartCanNotBeEmptyErrorMessage ]
					thatSends: #cartCanNotBeEmptyErrorMessage
					to: receiver1 ] value ]
		thatSends: #error:
		to: receiver2 ] value.! !
!Behavior method!
invalidUserAndOrPasswordErrorDescription
	#_coverageTracker989188_ markAsExecuted.
	^ #_coverageTracker989188_
		coverAll:
			{46 to: 75}
		byLiteralOrPseudoVariable: 'Invalid user and/or password'.! !
!Behavior method!
setUp
	#_coverageTracker989204_ markAsExecuted.
	#_coverageTracker989204_
		cover: (10 to: 27)
		declaredAt: (10 to: 27)
		by:
			(testObjectsFactory _ [ | receiver1 |
			receiver1 _ #_coverageTracker989204_
				coverAll:
					{32 to: 54}
				by: StoreTestObjectsFactory.
			#_coverageTracker989204_
				coverAll:
					{56 to: 58}
				evaluating: [ receiver1 new ]
				thatSends: #new
				to: receiver1 ] value).
	#_coverageTracker989204_
		cover: (62 to: 74)
		declaredAt: (62 to: 74)
		by:
			(debitBehavior _ [ :anAmount :aCreditCard |
			nil ]).! !
!Behavior method!
quantity
	#_coverageTracker989220_ markAsExecuted.
	^ #_coverageTracker989220_
		cover: (13 to: 20)
		declaredAt: (13 to: 20)
		by: quantity.! !
!Behavior method!
test07CartDoesNotHoldNotAddedItems
	| cart |
	#_coverageTracker989235_ markAsExecuted.
	#_coverageTracker989235_
		cover: (50 to: 53)
		declaredAt: (40 to: 43)
		by:
			(cart _ [ | receiver1 |
			receiver1 _ #_coverageTracker989235_
				cover: (58 to: 75)
				declaredAt: (58 to: 75)
				by: testObjectsFactory.
			#_coverageTracker989235_
				coverAll:
					{77 to: 86}
				evaluating: [ receiver1 createCart ]
				thatSends: #createCart
				to: receiver1 ] value).
	[ | receiver4 |
	receiver4 _ #_coverageTracker989235_
		coverAll:
			{92 to: 95}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989235_
		coverAll:
			{97 to: 101}
		evaluating: [
			receiver4 deny:
				[ | receiver3 |
				receiver3 _ #_coverageTracker989235_
					cover: (104 to: 107)
					declaredAt: (40 to: 43)
					by: cart.
				#_coverageTracker989235_
					coverAll:
						{109 to: 117}
					evaluating: [
						receiver3 includes:
							[ | receiver2 |
							receiver2 _ #_coverageTracker989235_
								cover: (119 to: 136)
								declaredAt: (58 to: 75)
								by: testObjectsFactory.
							#_coverageTracker989235_
								coverAll:
									{138 to: 155}
								evaluating: [ receiver2 itemSellByTheStore ]
								thatSends: #itemSellByTheStore
								to: receiver2 ] value ]
					thatSends: #includes:
					to: receiver3 ] value ]
		thatSends: #deny:
		to: receiver4 ] value.! !
!Behavior method!
assertIsNotExpired: aCreditCard on: aDate
	#_coverageTracker989252_ markAsExecuted.
	[ | receiver3 |
	receiver3 _ [ | receiver1 |
	receiver1 _ #_coverageTracker989252_
		cover: (47 to: 57)
		declaredAt: (21 to: 31)
		by: aCreditCard.
	#_coverageTracker989252_
		coverAll:
			{59 to: 70}
		evaluating: [
			receiver1 isExpiredOn:
				(#_coverageTracker989252_
					cover: (72 to: 76)
					declaredAt: (37 to: 41)
					by: aDate) ]
		thatSends: #isExpiredOn:
		to: receiver1 ] value.
	#_coverageTracker989252_
		coverAll:
			{79 to: 85}
		evaluating: [
			receiver3 ifTrue: [
				[ | receiver2 |
				receiver2 _ #_coverageTracker989252_
					coverAll:
						{88 to: 91}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker989252_
					coverAll:
						{93 to: 129}
					evaluating: [ receiver2 signalCanNotChargeAnExpiredCreditCard ]
					thatSends: #signalCanNotChargeAnExpiredCreditCard
					to: receiver2 ] value ]]
		thatSends: #ifTrue:
		to: receiver3 ] value.! !
!Behavior method!
expiredCreditCard
	#_coverageTracker989266_ markAsExecuted.
	^ [ | receiver4 |
	receiver4 _ #_coverageTracker989266_
		coverAll:
			{23 to: 32}
		by: CreditCard.
	#_coverageTracker989266_
		coverAll:
			{34 to: 42. 71 to: 78. 100 to: 110}
		evaluating: [
			receiver4
				numbered:
					[ | receiver1 |
					receiver1 _ #_coverageTracker989266_
						coverAll:
							{44 to: 47}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker989266_
						coverAll:
							{49 to: 69}
						evaluating: [ receiver1 validCreditCardNumber ]
						thatSends: #validCreditCardNumber
						to: receiver1 ] value
				ownedBy:
					[ | receiver2 |
					receiver2 _ #_coverageTracker989266_
						coverAll:
							{80 to: 83}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker989266_
						coverAll:
							{85 to: 98}
						evaluating: [ receiver2 validOwnerName ]
						thatSends: #validOwnerName
						to: receiver2 ] value
				expiringOn:
					[ | receiver3 |
					receiver3 _ #_coverageTracker989266_
						coverAll:
							{112 to: 115}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker989266_
						coverAll:
							{117 to: 134}
						evaluating: [ receiver3 expiredMonthOfYear ]
						thatSends: #expiredMonthOfYear
						to: receiver3 ] value ]
		thatSends: #numbered:ownedBy:expiringOn:
		to: receiver4 ] value.! !
!Behavior method!
does: aUser authenticatesWith: aPassword
	"Recordar que esto es solo un ejemplo. No se deben guardar passwords en un sistema de verdad sino un
	hash o similar - Hernan"
	| storedPassword |
	#_coverageTracker989279_ markAsExecuted.
	#_coverageTracker989279_
		cover: (197 to: 210)
		declaredAt: (177 to: 190)
		by:
			(storedPassword _ [ | receiver1 |
			receiver1 _ #_coverageTracker989279_
				cover: (215 to: 236)
				declaredAt: (215 to: 236)
				by: validUsersAndPasswords.
			#_coverageTracker989279_
				coverAll:
					{238 to: 240. 248 to: 256}
				evaluating: [
					receiver1
						at:
							(#_coverageTracker989279_
								cover: (242 to: 246)
								declaredAt: (7 to: 11)
								by: aUser)
						ifAbsent: [ ^ #_coverageTracker989279_
								coverAll:
									{261 to: 265}
								byLiteralOrPseudoVariable: false ]]
				thatSends: #at:ifAbsent:
				to: receiver1 ] value).
	^ [ | receiver2 |
	receiver2 _ #_coverageTracker989279_
		cover: (272 to: 280)
		declaredAt: (32 to: 40)
		by: aPassword.
	#_coverageTracker989279_
		coverAll:
			{282 to: 282}
		evaluating: [
			receiver2 =
				(#_coverageTracker989279_
					cover: (284 to: 297)
					declaredAt: (177 to: 190)
					by: storedPassword) ]
		thatSends: #=
		to: receiver2 ] value.! !
!Behavior method!
test05IsExpiredOnNextExpirationMonth
	| expirationMonth expiredMonth creditCard |
	#_coverageTracker989301_ markAsExecuted.
	#_coverageTracker989301_
		cover: (87 to: 101)
		declaredAt: (42 to: 56)
		by:
			(expirationMonth _ [ | receiver1 |
			receiver1 _ #_coverageTracker989301_
				coverAll:
					{106 to: 110}
				by: Month.
			#_coverageTracker989301_
				coverAll:
					{112 to: 117. 128 to: 132}
				evaluating: [
					receiver1
						month:
							(#_coverageTracker989301_
								coverAll:
									{119 to: 126}
								byLiteralOrPseudoVariable: #January)
						year:
							(#_coverageTracker989301_
								coverAll:
									{134 to: 137}
								byLiteralOrPseudoVariable: 2020) ]
				thatSends: #month:year:
				to: receiver1 ] value).
	#_coverageTracker989301_
		cover: (142 to: 153)
		declaredAt: (58 to: 69)
		by:
			(expiredMonth _ [ | receiver2 |
			receiver2 _ #_coverageTracker989301_
				cover: (158 to: 172)
				declaredAt: (42 to: 56)
				by: expirationMonth.
			#_coverageTracker989301_
				coverAll:
					{174 to: 177}
				evaluating: [ receiver2 next ]
				thatSends: #next
				to: receiver2 ] value).
	#_coverageTracker989301_
		cover: (181 to: 190)
		declaredAt: (71 to: 80)
		by:
			(creditCard _ [ | receiver4 |
			receiver4 _ #_coverageTracker989301_
				coverAll:
					{195 to: 204}
				by: CreditCard.
			#_coverageTracker989301_
				coverAll:
					{209 to: 217. 241 to: 248. 273 to: 283}
				evaluating: [
					receiver4
						numbered:
							(#_coverageTracker989301_
								coverAll:
									{219 to: 236}
								byLiteralOrPseudoVariable: '1234567890123456')
						ownedBy:
							[ | receiver3 |
							receiver3 _ #_coverageTracker989301_
								coverAll:
									{250 to: 253}
								byLiteralOrPseudoVariable: self.
							#_coverageTracker989301_
								coverAll:
									{255 to: 268}
								evaluating: [ receiver3 validOwnerName ]
								thatSends: #validOwnerName
								to: receiver3 ] value
						expiringOn:
							(#_coverageTracker989301_
								cover: (285 to: 299)
								declaredAt: (42 to: 56)
								by: expirationMonth) ]
				thatSends: #numbered:ownedBy:expiringOn:
				to: receiver4 ] value).
	[ | receiver6 |
	receiver6 _ #_coverageTracker989301_
		coverAll:
			{306 to: 309}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989301_
		coverAll:
			{311 to: 317}
		evaluating: [
			receiver6 assert:
				[ | receiver5 |
				receiver5 _ #_coverageTracker989301_
					cover: (320 to: 329)
					declaredAt: (71 to: 80)
					by: creditCard.
				#_coverageTracker989301_
					coverAll:
						{331 to: 342}
					evaluating: [
						receiver5 isExpiredOn:
							(#_coverageTracker989301_
								cover: (344 to: 355)
								declaredAt: (58 to: 69)
								by: expiredMonth) ]
					thatSends: #isExpiredOn:
					to: receiver5 ] value ]
		thatSends: #assert:
		to: receiver6 ] value.! !
!Behavior method!
signalInvalidItem
	#_coverageTracker989333_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ #_coverageTracker989333_
		coverAll:
			{22 to: 25}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989333_
		coverAll:
			{27 to: 32}
		evaluating: [
			receiver2 error:
				[ | receiver1 |
				receiver1 _ #_coverageTracker989333_
					coverAll:
						{34 to: 37}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker989333_
					coverAll:
						{39 to: 61}
					evaluating: [ receiver1 invalidItemErrorMessage ]
					thatSends: #invalidItemErrorMessage
					to: receiver1 ] value ]
		thatSends: #error:
		to: receiver2 ] value.! !
!Behavior method!
test01NewCartsAreCreatedEmpty
	#_coverageTracker989348_ markAsExecuted.
	[ | receiver3 |
	receiver3 _ #_coverageTracker989348_
		coverAll:
			{33 to: 36}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989348_
		coverAll:
			{38 to: 44}
		evaluating: [
			receiver3 assert:
				[ | receiver2 |
				receiver2 _ [ | receiver1 |
				receiver1 _ #_coverageTracker989348_
					cover: (46 to: 63)
					declaredAt: (46 to: 63)
					by: testObjectsFactory.
				#_coverageTracker989348_
					coverAll:
						{65 to: 74}
					evaluating: [ receiver1 createCart ]
					thatSends: #createCart
					to: receiver1 ] value.
				#_coverageTracker989348_
					coverAll:
						{76 to: 82}
					evaluating: [ receiver2 isEmpty ]
					thatSends: #isEmpty
					to: receiver2 ] value ]
		thatSends: #assert:
		to: receiver3 ] value.! !
!Behavior method!
salesBook
	#_coverageTracker989372_ markAsExecuted.
	^ #_coverageTracker989372_
		cover: (15 to: 23)
		declaredAt: (15 to: 23)
		by: salesBook.! !
!Behavior method!
signalInvalidUserAndOrPassword
	#_coverageTracker989394_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ #_coverageTracker989394_
		coverAll:
			{35 to: 38}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989394_
		coverAll:
			{40 to: 45}
		evaluating: [
			receiver2 error:
				[ | receiver1 |
				receiver1 _ #_coverageTracker989394_
					coverAll:
						{47 to: 50}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker989394_
					coverAll:
						{52 to: 91}
					evaluating: [ receiver1 invalidUserAndOrPasswordErrorDescription ]
					thatSends: #invalidUserAndOrPasswordErrorDescription
					to: receiver1 ] value ]
		thatSends: #error:
		to: receiver2 ] value.! !
!Behavior method!
invalidQuantityErrorMessage
	#_coverageTracker989413_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker989413_
		coverAll:
			{33 to: 36}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989413_
		coverAll:
			{38 to: 42}
		evaluating: [ receiver1 class ]
		thatSends: #class
		to: receiver1 ] value.
	#_coverageTracker989413_
		coverAll:
			{44 to: 70}
		evaluating: [ receiver2 invalidQuantityErrorMessage ]
		thatSends: #invalidQuantityErrorMessage
		to: receiver2 ] value.! !
!Behavior method!
expiration
	#_coverageTracker989428_ markAsExecuted.
	^ #_coverageTracker989428_
		cover: (16 to: 25)
		declaredAt: (16 to: 25)
		by: expiration.! !
!Behavior method!
sessionDuration
	#_coverageTracker989445_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker989445_
		coverAll:
			{21 to: 22}
		byLiteralOrPseudoVariable: 30.
	#_coverageTracker989445_
		coverAll:
			{24 to: 30}
		evaluating: [ receiver1 minutes ]
		thatSends: #minutes
		to: receiver1 ] value.! !
!Behavior method!
withCartSessionIdentifiedAs: aCartId do: aBlock
	| cartSession |
	#_coverageTracker989467_ markAsExecuted.
	#_coverageTracker989467_
		cover: (70 to: 80)
		declaredAt: (53 to: 63)
		by:
			(cartSession _ [ | receiver2 |
			receiver2 _ #_coverageTracker989467_
				cover: (85 to: 96)
				declaredAt: (85 to: 96)
				by: cartSessions.
			#_coverageTracker989467_
				coverAll:
					{98 to: 100. 110 to: 118}
				evaluating: [
					receiver2
						at:
							(#_coverageTracker989467_
								cover: (102 to: 108)
								declaredAt: (30 to: 36)
								by: aCartId)
						ifAbsent: [
							[ | receiver1 |
							receiver1 _ #_coverageTracker989467_
								coverAll:
									{121 to: 124}
								byLiteralOrPseudoVariable: self.
							#_coverageTracker989467_
								coverAll:
									{126 to: 144}
								evaluating: [ receiver1 signalInvalidCartId ]
								thatSends: #signalInvalidCartId
								to: receiver1 ] value ]]
				thatSends: #at:ifAbsent:
				to: receiver2 ] value).
	^ [ | receiver3 |
	receiver3 _ #_coverageTracker989467_
		cover: (151 to: 161)
		declaredAt: (53 to: 63)
		by: cartSession.
	#_coverageTracker989467_
		coverAll:
			{163 to: 165}
		evaluating: [
			receiver3 do:
				(#_coverageTracker989467_
					cover: (167 to: 172)
					declaredAt: (42 to: 47)
					by: aBlock) ]
		thatSends: #do:
		to: receiver3 ] value.! !
!Behavior method!
createSale
	#_coverageTracker989479_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker989479_
		coverAll:
			{16 to: 19}
		by: Sale.
	#_coverageTracker989479_
		coverAll:
			{21 to: 27. 35 to: 48}
		evaluating: [
			receiver1
				doneBy:
					(#_coverageTracker989479_
						cover: (29 to: 33)
						declaredAt: (29 to: 33)
						by: owner)
				certifiedWith:
					(#_coverageTracker989479_
						cover: (50 to: 55)
						declaredAt: (50 to: 55)
						by: ticket) ]
		thatSends: #doneBy:certifiedWith:
		to: receiver1 ] value.! !
!Behavior method!
occurrencesOf: anItem
	#_coverageTracker989498_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker989498_
		cover: (26 to: 30)
		declaredAt: (26 to: 30)
		by: items.
	#_coverageTracker989498_
		coverAll:
			{32 to: 45}
		evaluating: [
			receiver1 occurrencesOf:
				(#_coverageTracker989498_
					cover: (47 to: 52)
					declaredAt: (16 to: 21)
					by: anItem) ]
		thatSends: #occurrencesOf:
		to: receiver1 ] value.! !
!Behavior method!
signalInvalidQuantity
	#_coverageTracker989530_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ #_coverageTracker989530_
		coverAll:
			{26 to: 29}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989530_
		coverAll:
			{31 to: 36}
		evaluating: [
			receiver2 error:
				[ | receiver1 |
				receiver1 _ #_coverageTracker989530_
					coverAll:
						{38 to: 41}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker989530_
					coverAll:
						{43 to: 69}
					evaluating: [ receiver1 invalidQuantityErrorMessage ]
					thatSends: #invalidQuantityErrorMessage
					to: receiver1 ] value ]
		thatSends: #error:
		to: receiver2 ] value.! !
!Behavior method!
totalOf: anItem quantity: aQuantity
	#_coverageTracker989536_ markAsExecuted.
	^ [ | receiver3 |
	receiver3 _ [ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker989536_
		cover: (42 to: 45)
		declaredAt: (42 to: 45)
		by: cart.
	#_coverageTracker989536_
		coverAll:
			{47 to: 53}
		evaluating: [ receiver1 catalog ]
		thatSends: #catalog
		to: receiver1 ] value.
	#_coverageTracker989536_
		coverAll:
			{55 to: 57}
		evaluating: [
			receiver2 at:
				(#_coverageTracker989536_
					cover: (59 to: 64)
					declaredAt: (10 to: 15)
					by: anItem) ]
		thatSends: #at:
		to: receiver2 ] value.
	#_coverageTracker989536_
		coverAll:
			{67 to: 67}
		evaluating: [
			receiver3 *
				(#_coverageTracker989536_
					cover: (69 to: 77)
					declaredAt: (27 to: 35)
					by: aQuantity) ]
		thatSends: #*
		to: receiver3 ] value.! !
!Behavior method!
assertIsValidItem: anItem
	#_coverageTracker989548_ markAsExecuted.
	[ | receiver3 |
	receiver3 _ [ | receiver1 |
	receiver1 _ #_coverageTracker989548_
		cover: (30 to: 36)
		declaredAt: (30 to: 36)
		by: catalog.
	#_coverageTracker989548_
		coverAll:
			{38 to: 49}
		evaluating: [
			receiver1 includesKey:
				(#_coverageTracker989548_
					cover: (51 to: 56)
					declaredAt: (20 to: 25)
					by: anItem) ]
		thatSends: #includesKey:
		to: receiver1 ] value.
	#_coverageTracker989548_
		coverAll:
			{59 to: 66}
		evaluating: [
			receiver3 ifFalse: [
				[ | receiver2 |
				receiver2 _ #_coverageTracker989548_
					coverAll:
						{70 to: 73}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker989548_
					coverAll:
						{75 to: 91}
					evaluating: [ receiver2 signalInvalidItem ]
					thatSends: #signalInvalidItem
					to: receiver2 ] value ]]
		thatSends: #ifFalse:
		to: receiver3 ] value.! !
!Behavior method!
test03AfterAddingAnItemTheCartIsNotEmptyAnymore
	| cart |
	#_coverageTracker989569_ markAsExecuted.
	#_coverageTracker989569_
		cover: (63 to: 66)
		declaredAt: (53 to: 56)
		by:
			(cart _ [ | receiver1 |
			receiver1 _ #_coverageTracker989569_
				cover: (71 to: 88)
				declaredAt: (71 to: 88)
				by: testObjectsFactory.
			#_coverageTracker989569_
				coverAll:
					{90 to: 99}
				evaluating: [ receiver1 createCart ]
				thatSends: #createCart
				to: receiver1 ] value).
	[ | receiver3 |
	receiver3 _ #_coverageTracker989569_
		cover: (105 to: 108)
		declaredAt: (53 to: 56)
		by: cart.
	#_coverageTracker989569_
		coverAll:
			{110 to: 113}
		evaluating: [
			receiver3 add:
				[ | receiver2 |
				receiver2 _ #_coverageTracker989569_
					cover: (115 to: 132)
					declaredAt: (71 to: 88)
					by: testObjectsFactory.
				#_coverageTracker989569_
					coverAll:
						{134 to: 151}
					evaluating: [ receiver2 itemSellByTheStore ]
					thatSends: #itemSellByTheStore
					to: receiver2 ] value ]
		thatSends: #add:
		to: receiver3 ] value.
	[ | receiver5 |
	receiver5 _ #_coverageTracker989569_
		coverAll:
			{155 to: 158}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989569_
		coverAll:
			{160 to: 164}
		evaluating: [
			receiver5 deny:
				[ | receiver4 |
				receiver4 _ #_coverageTracker989569_
					cover: (166 to: 169)
					declaredAt: (53 to: 56)
					by: cart.
				#_coverageTracker989569_
					coverAll:
						{171 to: 177}
					evaluating: [ receiver4 isEmpty ]
					thatSends: #isEmpty
					to: receiver4 ] value ]
		thatSends: #deny:
		to: receiver5 ] value.! !
!Behavior method!
wasDoneBy: aCustomer
	#_coverageTracker989594_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker989594_
		cover: (25 to: 32)
		declaredAt: (25 to: 32)
		by: customer.
	#_coverageTracker989594_
		coverAll:
			{34 to: 34}
		evaluating: [
			receiver1 =
				(#_coverageTracker989594_
					cover: (36 to: 44)
					declaredAt: (12 to: 20)
					by: aCustomer) ]
		thatSends: #=
		to: receiver1 ] value.! !
!Behavior method!
cartCanNotBeEmptyErrorMessage
	#_coverageTracker989607_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker989607_
		coverAll:
			{35 to: 41}
		by: Cashier.
	#_coverageTracker989607_
		coverAll:
			{43 to: 71}
		evaluating: [ receiver1 cartCanNotBeEmptyErrorMessage ]
		thatSends: #cartCanNotBeEmptyErrorMessage
		to: receiver1 ] value.! !
!Behavior method!
initializeNumbered: aNumber ownedBy: anOwnerName expiringOn: aMonth
	#_coverageTracker989624_ markAsExecuted.
	#_coverageTracker989624_
		cover: (73 to: 78)
		declaredAt: (73 to: 78)
		by:
			(number _ #_coverageTracker989624_
				cover: (83 to: 89)
				declaredAt: (21 to: 27)
				by: aNumber).
	#_coverageTracker989624_
		cover: (93 to: 101)
		declaredAt: (93 to: 101)
		by:
			(ownerName _ #_coverageTracker989624_
				cover: (106 to: 116)
				declaredAt: (38 to: 48)
				by: anOwnerName).
	#_coverageTracker989624_
		cover: (120 to: 129)
		declaredAt: (120 to: 129)
		by:
			(expiration _ #_coverageTracker989624_
				cover: (134 to: 139)
				declaredAt: (62 to: 67)
				by: aMonth).! !
!Behavior method!
revertTime: aDuration
	#_coverageTracker989639_ markAsExecuted.
	#_coverageTracker989639_
		cover: (34 to: 36)
		declaredAt: (27 to: 29)
		by:
			(now _ [ | receiver2 |
			receiver2 _ #_coverageTracker989639_
				cover: (27 to: 29)
				declaredAt: (27 to: 29)
				by: now.
			#_coverageTracker989639_
				coverAll:
					{38 to: 38}
				evaluating: [
					receiver2 +
						[ | receiver1 |
						receiver1 _ #_coverageTracker989639_
							cover: (40 to: 48)
							declaredAt: (13 to: 21)
							by: aDuration.
						#_coverageTracker989639_
							coverAll:
								{50 to: 56}
							evaluating: [ receiver1 negated ]
							thatSends: #negated
							to: receiver1 ] value ]
				thatSends: #+
				to: receiver2 ] value).! !
!Behavior method!
createLineItemOf: anItem quantity: aQuantity
	#_coverageTracker989658_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ #_coverageTracker989658_
		coverAll:
			{50 to: 57}
		by: LineItem.
	#_coverageTracker989658_
		coverAll:
			{59 to: 61. 70 to: 78. 90 to: 95}
		evaluating: [
			receiver2
				of:
					(#_coverageTracker989658_
						cover: (63 to: 68)
						declaredAt: (19 to: 24)
						by: anItem)
				quantity:
					(#_coverageTracker989658_
						cover: (80 to: 88)
						declaredAt: (36 to: 44)
						by: aQuantity)
				total:
					[ | receiver1 |
					receiver1 _ #_coverageTracker989658_
						coverAll:
							{98 to: 101}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker989658_
						coverAll:
							{103 to: 110. 119 to: 127}
						evaluating: [
							receiver1
								totalOf:
									(#_coverageTracker989658_
										cover: (112 to: 117)
										declaredAt: (19 to: 24)
										by: anItem)
								quantity:
									(#_coverageTracker989658_
										cover: (129 to: 137)
										declaredAt: (36 to: 44)
										by: aQuantity) ]
						thatSends: #totalOf:quantity:
						to: receiver1 ] value ]
		thatSends: #of:quantity:total:
		to: receiver2 ] value.! !
!Behavior method!
assertIsNotEmpty: aCart
	#_coverageTracker989667_ markAsExecuted.
	[ | receiver3 |
	receiver3 _ [ | receiver1 |
	receiver1 _ #_coverageTracker989667_
		cover: (29 to: 33)
		declaredAt: (19 to: 23)
		by: aCart.
	#_coverageTracker989667_
		coverAll:
			{35 to: 41}
		evaluating: [ receiver1 isEmpty ]
		thatSends: #isEmpty
		to: receiver1 ] value.
	#_coverageTracker989667_
		coverAll:
			{43 to: 49}
		evaluating: [
			receiver3 ifTrue: [
				[ | receiver2 |
				receiver2 _ #_coverageTracker989667_
					coverAll:
						{52 to: 55}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker989667_
					coverAll:
						{57 to: 79}
					evaluating: [ receiver2 signalCartCanNotBeEmpty ]
					thatSends: #signalCartCanNotBeEmpty
					to: receiver2 ] value ]]
		thatSends: #ifTrue:
		to: receiver3 ] value.! !
!Behavior method!
test02CreditCardNumberWithMoreThan16DigitsIsNotValid
	#_coverageTracker989689_ markAsExecuted.
	[ | receiver6 |
	receiver6 _ #_coverageTracker989689_
		coverAll:
			{56 to: 59}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989689_
		coverAll:
			{64 to: 70. 174 to: 179. 213 to: 228}
		evaluating: [
			receiver6
				should: [
					[ | receiver3 |
					receiver3 _ #_coverageTracker989689_
						coverAll:
							{74 to: 83}
						by: CreditCard.
					#_coverageTracker989689_
						coverAll:
							{85 to: 93. 115 to: 122. 144 to: 154}
						evaluating: [
							receiver3
								numbered:
									(#_coverageTracker989689_
										coverAll:
											{95 to: 113}
										byLiteralOrPseudoVariable: '12345678901234567')
								ownedBy:
									[ | receiver1 |
									receiver1 _ #_coverageTracker989689_
										coverAll:
											{124 to: 127}
										byLiteralOrPseudoVariable: self.
									#_coverageTracker989689_
										coverAll:
											{129 to: 142}
										evaluating: [ receiver1 validOwnerName ]
										thatSends: #validOwnerName
										to: receiver1 ] value
								expiringOn:
									[ | receiver2 |
									receiver2 _ #_coverageTracker989689_
										coverAll:
											{156 to: 160}
										by: Month.
									#_coverageTracker989689_
										coverAll:
											{162 to: 168}
										evaluating: [ receiver2 current ]
										thatSends: #current
										to: receiver2 ] value ]
						thatSends: #numbered:ownedBy:expiringOn:
						to: receiver3 ] value ]
				raise:
					[ | receiver4 |
					receiver4 _ #_coverageTracker989689_
						coverAll:
							{181 to: 185}
						by: Error.
					#_coverageTracker989689_
						coverAll:
							{187 to: 187}
						evaluating: [
							receiver4 -
								(#_coverageTracker989689_
									coverAll:
										{189 to: 208}
									by: MessageNotUnderstood) ]
						thatSends: #-
						to: receiver4 ] value
				withMessageText:
					[ | receiver5 |
					receiver5 _ #_coverageTracker989689_
						coverAll:
							{230 to: 239}
						by: CreditCard.
					#_coverageTracker989689_
						coverAll:
							{241 to: 269}
						evaluating: [ receiver5 invalidNumberErrorDescription ]
						thatSends: #invalidNumberErrorDescription
						to: receiver5 ] value ]
		thatSends: #should:raise:withMessageText:
		to: receiver6 ] value.! !
!Behavior method!
invalidQuantityErrorMessage
	#_coverageTracker989705_ markAsExecuted.
	^ #_coverageTracker989705_
		coverAll:
			{33 to: 57}
		byLiteralOrPseudoVariable: 'Invalid number of items'.! !
!Behavior method!
invalidCartIdErrorDescription
	#_coverageTracker989720_ markAsExecuted.
	^ #_coverageTracker989720_
		coverAll:
			{35 to: 51}
		byLiteralOrPseudoVariable: 'Invalid cart id'.! !
!Behavior method!
transactionId: anId
	#_coverageTracker989735_ markAsExecuted.
	#_coverageTracker989735_
		cover: (23 to: 35)
		declaredAt: (23 to: 35)
		by:
			(transactionId _ #_coverageTracker989735_
				cover: (40 to: 43)
				declaredAt: (16 to: 19)
				by: anId).! !
!Behavior method!
assertIsValidNumber: aNumber
	#_coverageTracker989754_ markAsExecuted.
	[ | receiver4 |
	receiver4 _ [ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker989754_
		cover: (32 to: 38)
		declaredAt: (22 to: 28)
		by: aNumber.
	#_coverageTracker989754_
		coverAll:
			{40 to: 43}
		evaluating: [ receiver1 size ]
		thatSends: #size
		to: receiver1 ] value.
	#_coverageTracker989754_
		coverAll:
			{45 to: 45}
		evaluating: [
			receiver2 =
				(#_coverageTracker989754_
					coverAll:
						{47 to: 48}
					byLiteralOrPseudoVariable: 16) ]
		thatSends: #=
		to: receiver2 ] value.
	#_coverageTracker989754_
		coverAll:
			{50 to: 57}
		evaluating: [
			receiver4 ifFalse: [
				[ | receiver3 |
				receiver3 _ #_coverageTracker989754_
					coverAll:
						{61 to: 64}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker989754_
					coverAll:
						{66 to: 84}
					evaluating: [ receiver3 signalInvalidNumber ]
					thatSends: #signalInvalidNumber
					to: receiver3 ] value ]]
		thatSends: #ifFalse:
		to: receiver4 ] value.
	[ | receiver9 |
	receiver9 _ [ | receiver7 |
	receiver7 _ #_coverageTracker989754_
		cover: (91 to: 97)
		declaredAt: (22 to: 28)
		by: aNumber.
	#_coverageTracker989754_
		coverAll:
			{99 to: 109}
		evaluating: [
			receiver7 anySatisfy: [ :aCharacter |
				[ | receiver6 |
				receiver6 _ [ | receiver5 |
				receiver5 _ #_coverageTracker989754_
					cover: (127 to: 136)
					declaredAt: (114 to: 123)
					by: aCharacter.
				#_coverageTracker989754_
					coverAll:
						{138 to: 144}
					evaluating: [ receiver5 isDigit ]
					thatSends: #isDigit
					to: receiver5 ] value.
				#_coverageTracker989754_
					coverAll:
						{146 to: 148}
					evaluating: [ receiver6 not ]
					thatSends: #not
					to: receiver6 ] value ]]
		thatSends: #anySatisfy:
		to: receiver7 ] value.
	#_coverageTracker989754_
		coverAll:
			{153 to: 159}
		evaluating: [
			receiver9 ifTrue: [
				[ | receiver8 |
				receiver8 _ #_coverageTracker989754_
					coverAll:
						{163 to: 166}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker989754_
					coverAll:
						{168 to: 186}
					evaluating: [ receiver8 signalInvalidNumber ]
					thatSends: #signalInvalidNumber
					to: receiver8 ] value ]]
		thatSends: #ifTrue:
		to: receiver9 ] value.! !
!Behavior method!
itemNotSellByTheStore
	#_coverageTracker989767_ markAsExecuted.
	^ #_coverageTracker989767_
		coverAll:
			{27 to: 39}
		byLiteralOrPseudoVariable: 'invalidBook'.! !
!Behavior method!
test01CanNotCheckoutAnEmptyCart
	| salesBook |
	#_coverageTracker989790_ markAsExecuted.
	#_coverageTracker989790_
		cover: (52 to: 60)
		declaredAt: (37 to: 45)
		by:
			(salesBook _ [ | receiver1 |
			receiver1 _ #_coverageTracker989790_
				coverAll:
					{65 to: 81}
				by: OrderedCollection.
			#_coverageTracker989790_
				coverAll:
					{83 to: 85}
				evaluating: [ receiver1 new ]
				thatSends: #new
				to: receiver1 ] value).
	[ | receiver14 |
	receiver14 _ #_coverageTracker989790_
		coverAll:
			{89 to: 92}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989790_
		coverAll:
			{97 to: 103. 339 to: 344. 377 to: 392}
		evaluating: [
			receiver14
				should: [
					[ | receiver6 |
					receiver6 _ #_coverageTracker989790_
						coverAll:
							{107 to: 113}
						by: Cashier.
					#_coverageTracker989790_
						coverAll:
							{119 to: 129. 165 to: 172. 205 to: 213. 259 to: 267. 277 to: 279. 309 to: 322}
						evaluating: [
							receiver6
								toCheckout:
									[ | receiver2 |
									receiver2 _ #_coverageTracker989790_
										cover: (131 to: 148)
										declaredAt: (131 to: 148)
										by: testObjectsFactory.
									#_coverageTracker989790_
										coverAll:
											{150 to: 159}
										evaluating: [ receiver2 createCart ]
										thatSends: #createCart
										to: receiver2 ] value
								ownedBy:
									[ | receiver3 |
									receiver3 _ #_coverageTracker989790_
										cover: (174 to: 191)
										declaredAt: (131 to: 148)
										by: testObjectsFactory.
									#_coverageTracker989790_
										coverAll:
											{193 to: 200}
										evaluating: [ receiver3 customer ]
										thatSends: #customer
										to: receiver3 ] value
								charging:
									[ | receiver4 |
									receiver4 _ #_coverageTracker989790_
										cover: (215 to: 232)
										declaredAt: (131 to: 148)
										by: testObjectsFactory.
									#_coverageTracker989790_
										coverAll:
											{234 to: 253}
										evaluating: [ receiver4 notExpiredCreditCard ]
										thatSends: #notExpiredCreditCard
										to: receiver4 ] value
								throught:
									(#_coverageTracker989790_
										coverAll:
											{269 to: 272}
										byLiteralOrPseudoVariable: self)
								on:
									[ | receiver5 |
									receiver5 _ #_coverageTracker989790_
										cover: (281 to: 298)
										declaredAt: (131 to: 148)
										by: testObjectsFactory.
									#_coverageTracker989790_
										coverAll:
											{300 to: 304}
										evaluating: [ receiver5 today ]
										thatSends: #today
										to: receiver5 ] value
								registeringOn:
									(#_coverageTracker989790_
										cover: (325 to: 333)
										declaredAt: (37 to: 45)
										by: salesBook) ]
						thatSends: #toCheckout:ownedBy:charging:throught:on:registeringOn:
						to: receiver6 ] value ]
				raise:
					[ | receiver7 |
					receiver7 _ #_coverageTracker989790_
						coverAll:
							{346 to: 350}
						by: Error.
					#_coverageTracker989790_
						coverAll:
							{352 to: 352}
						evaluating: [
							receiver7 -
								(#_coverageTracker989790_
									coverAll:
										{354 to: 373}
									by: MessageNotUnderstood) ]
						thatSends: #-
						to: receiver7 ] value
				withExceptionDo: [ :anError |
					[ | receiver11 |
					receiver11 _ #_coverageTracker989790_
						coverAll:
							{410 to: 413}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker989790_
						coverAll:
							{415 to: 421}
						evaluating: [
							receiver11 assert:
								[ | receiver10 |
								receiver10 _ [ | receiver8 |
								receiver8 _ #_coverageTracker989790_
									cover: (423 to: 429)
									declaredAt: (397 to: 403)
									by: anError.
								#_coverageTracker989790_
									coverAll:
										{431 to: 441}
									evaluating: [ receiver8 messageText ]
									thatSends: #messageText
									to: receiver8 ] value.
								#_coverageTracker989790_
									coverAll:
										{443 to: 443}
									evaluating: [
										receiver10 =
											[ | receiver9 |
											receiver9 _ #_coverageTracker989790_
												coverAll:
													{445 to: 451}
												by: Cashier.
											#_coverageTracker989790_
												coverAll:
													{453 to: 481}
												evaluating: [ receiver9 cartCanNotBeEmptyErrorMessage ]
												thatSends: #cartCanNotBeEmptyErrorMessage
												to: receiver9 ] value ]
									thatSends: #=
									to: receiver10 ] value ]
						thatSends: #assert:
						to: receiver11 ] value.
					[ | receiver13 |
					receiver13 _ #_coverageTracker989790_
						coverAll:
							{487 to: 490}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker989790_
						coverAll:
							{492 to: 498}
						evaluating: [
							receiver13 assert:
								[ | receiver12 |
								receiver12 _ #_coverageTracker989790_
									cover: (500 to: 508)
									declaredAt: (37 to: 45)
									by: salesBook.
								#_coverageTracker989790_
									coverAll:
										{510 to: 516}
									evaluating: [ receiver12 isEmpty ]
									thatSends: #isEmpty
									to: receiver12 ] value ]
						thatSends: #assert:
						to: receiver13 ] value ]]
		thatSends: #should:raise:withExceptionDo:
		to: receiver14 ] value.! !
!Behavior method!
checkOutCartWithCreditCardNumbered: aCreditCartNumber ownedBy: anOwner expiringOn: anExpirationMonthOfYear
	#_coverageTracker989837_ markAsExecuted.
	^ [ | receiver6 |
	receiver6 _ [ | receiver5 |
	receiver5 _ #_coverageTracker989837_
		coverAll:
			{113 to: 119}
		by: Cashier.
	#_coverageTracker989837_
		coverAll:
			{124 to: 134. 144 to: 151. 161 to: 169. 268 to: 276. 312 to: 314. 330 to: 343}
		evaluating: [
			receiver5
				toCheckout:
					(#_coverageTracker989837_
						cover: (136 to: 139)
						declaredAt: (136 to: 139)
						by: cart)
				ownedBy:
					(#_coverageTracker989837_
						cover: (153 to: 157)
						declaredAt: (153 to: 157)
						by: owner)
				charging:
					[ | receiver1 |
					receiver1 _ #_coverageTracker989837_
						coverAll:
							{172 to: 181}
						by: CreditCard.
					#_coverageTracker989837_
						coverAll:
							{183 to: 191. 211 to: 218. 228 to: 238}
						evaluating: [
							receiver1
								numbered:
									(#_coverageTracker989837_
										cover: (193 to: 209)
										declaredAt: (37 to: 53)
										by: aCreditCartNumber)
								ownedBy:
									(#_coverageTracker989837_
										cover: (220 to: 226)
										declaredAt: (64 to: 70)
										by: anOwner)
								expiringOn:
									(#_coverageTracker989837_
										cover: (240 to: 262)
										declaredAt: (84 to: 106)
										by: anExpirationMonthOfYear) ]
						thatSends: #numbered:ownedBy:expiringOn:
						to: receiver1 ] value
				throught:
					[ | receiver2 |
					receiver2 _ #_coverageTracker989837_
						cover: (278 to: 289)
						declaredAt: (278 to: 289)
						by: systemFacade.
					#_coverageTracker989837_
						coverAll:
							{291 to: 307}
						evaluating: [ receiver2 merchantProcessor ]
						thatSends: #merchantProcessor
						to: receiver2 ] value
				on:
					[ | receiver3 |
					receiver3 _ #_coverageTracker989837_
						coverAll:
							{316 to: 319}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker989837_
						coverAll:
							{321 to: 325}
						evaluating: [ receiver3 today ]
						thatSends: #today
						to: receiver3 ] value
				registeringOn:
					[ | receiver4 |
					receiver4 _ #_coverageTracker989837_
						cover: (345 to: 356)
						declaredAt: (278 to: 289)
						by: systemFacade.
					#_coverageTracker989837_
						coverAll:
							{358 to: 366}
						evaluating: [ receiver4 salesBook ]
						thatSends: #salesBook
						to: receiver4 ] value ]
		thatSends: #toCheckout:ownedBy:charging:throught:on:registeringOn:
		to: receiver5 ] value.
	#_coverageTracker989837_
		coverAll:
			{369 to: 376}
		evaluating: [ receiver6 checkOut ]
		thatSends: #checkOut
		to: receiver6 ] value.! !
!Behavior method!
cartCanNotBeEmptyErrorMessage
	#_coverageTracker989866_ markAsExecuted.
	^ #_coverageTracker989866_
		coverAll:
			{35 to: 67}
		byLiteralOrPseudoVariable: 'Can not check out an empty cart'.! !
!Behavior method!
checkOutCartIdentifiedAs: aCartId withCreditCardNumbered: aCreditCartNumber ownedBy: anOwner expiringOn: anExpirationMonthOfYear
	#_coverageTracker989890_ markAsExecuted.
	^ [ | receiver4 |
	receiver4 _ #_coverageTracker989890_
		coverAll:
			{133 to: 136}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989890_
		coverAll:
			{141 to: 168. 181 to: 183}
		evaluating: [
			receiver4
				withCartSessionIdentifiedAs:
					(#_coverageTracker989890_
						cover: (170 to: 176)
						declaredAt: (27 to: 33)
						by: aCartId)
				do: [ :cartSession | | ticket |
					#_coverageTracker989890_
						cover: (217 to: 222)
						declaredAt: (204 to: 209)
						by:
							(ticket _ [ | receiver1 |
							receiver1 _ #_coverageTracker989890_
								cover: (227 to: 237)
								declaredAt: (188 to: 198)
								by: cartSession.
							#_coverageTracker989890_
								coverAll:
									{244 to: 278. 303 to: 310. 325 to: 335}
								evaluating: [
									receiver1
										checkOutCartWithCreditCardNumbered:
											(#_coverageTracker989890_
												cover: (280 to: 296)
												declaredAt: (59 to: 75)
												by: aCreditCartNumber)
										ownedBy:
											(#_coverageTracker989890_
												cover: (312 to: 318)
												declaredAt: (86 to: 92)
												by: anOwner)
										expiringOn:
											(#_coverageTracker989890_
												cover: (337 to: 359)
												declaredAt: (106 to: 128)
												by: anExpirationMonthOfYear) ]
								thatSends: #checkOutCartWithCreditCardNumbered:ownedBy:expiringOn:
								to: receiver1 ] value).
					[ | receiver2 |
					receiver2 _ #_coverageTracker989890_
						coverAll:
							{365 to: 368}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker989890_
						coverAll:
							{370 to: 382}
						evaluating: [
							receiver2 removeCartId:
								(#_coverageTracker989890_
									cover: (384 to: 390)
									declaredAt: (27 to: 33)
									by: aCartId) ]
						thatSends: #removeCartId:
						to: receiver2 ] value.
					[ | receiver3 |
					receiver3 _ #_coverageTracker989890_
						cover: (396 to: 401)
						declaredAt: (204 to: 209)
						by: ticket.
					#_coverageTracker989890_
						coverAll:
							{403 to: 415}
						evaluating: [ receiver3 transactionId ]
						thatSends: #transactionId
						to: receiver3 ] value ]]
		thatSends: #withCartSessionIdentifiedAs:do:
		to: receiver4 ] value.! !
!Behavior method!
catalog
	#_coverageTracker989913_ markAsExecuted.
	^ #_coverageTracker989913_
		cover: (14 to: 20)
		declaredAt: (14 to: 20)
		by: catalog.! !
!Behavior method!
signalInvalidCartId
	#_coverageTracker989922_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ #_coverageTracker989922_
		coverAll:
			{24 to: 27}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989922_
		coverAll:
			{29 to: 34}
		evaluating: [
			receiver2 error:
				[ | receiver1 |
				receiver1 _ #_coverageTracker989922_
					coverAll:
						{36 to: 39}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker989922_
					coverAll:
						{41 to: 69}
					evaluating: [ receiver1 invalidCartIdErrorDescription ]
					thatSends: #invalidCartIdErrorDescription
					to: receiver1 ] value ]
		thatSends: #error:
		to: receiver2 ] value.! !
!Behavior method!
transactionId
	#_coverageTracker989943_ markAsExecuted.
	^ #_coverageTracker989943_
		cover: (18 to: 30)
		declaredAt: (18 to: 30)
		by: transactionId.! !
!Behavior method!
authenticatingWith: aValidUsersAndPasswords acceptingItemsOf: aCatalog registeringOn: aSalesBook debitingThrought: aMerchantProcessor measuringTimeWith: aClock
	#_coverageTracker989972_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker989972_
		coverAll:
			{172 to: 175}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker989972_
		coverAll:
			{177 to: 179}
		evaluating: [ receiver1 new ]
		thatSends: #new
		to: receiver1 ] value.
	#_coverageTracker989972_
		coverAll:
			{184 to: 212. 241 to: 257. 271 to: 284. 300 to: 316. 340 to: 357}
		evaluating: [
			receiver2
				initializeAuthenticatingWith:
					(#_coverageTracker989972_
						cover: (214 to: 236)
						declaredAt: (21 to: 43)
						by: aValidUsersAndPasswords)
				acceptingItemsOf:
					(#_coverageTracker989972_
						cover: (259 to: 266)
						declaredAt: (65 to: 72)
						by: aCatalog)
				registeringOn:
					(#_coverageTracker989972_
						cover: (286 to: 295)
						declaredAt: (91 to: 100)
						by: aSalesBook)
				debitingThrought:
					(#_coverageTracker989972_
						cover: (318 to: 335)
						declaredAt: (122 to: 139)
						by: aMerchantProcessor)
				measuringTimeWith:
					(#_coverageTracker989972_
						cover: (359 to: 364)
						declaredAt: (162 to: 167)
						by: aClock) ]
		thatSends: #initializeAuthenticatingWith:acceptingItemsOf:registeringOn:debitingThrought:measuringTimeWith:
		to: receiver2 ] value.! !
!Behavior method!
anotherItemSellByTheStore
	#_coverageTracker989988_ markAsExecuted.
	^ #_coverageTracker989988_
		coverAll:
			{31 to: 48}
		byLiteralOrPseudoVariable: 'anotherValidBook'.! !
!Behavior method!
totalSales
	#_coverageTracker990000_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker990000_
		coverAll:
			{16 to: 20}
		by: Delay.
	#_coverageTracker990000_
		coverAll:
			{22 to: 32}
		evaluating: [
			receiver1 forSeconds:
				(#_coverageTracker990000_
					coverAll:
						{34 to: 34}
					byLiteralOrPseudoVariable: 1) ]
		thatSends: #forSeconds:
		to: receiver1 ] value.
	#_coverageTracker990000_
		coverAll:
			{37 to: 40}
		evaluating: [ receiver2 wait ]
		thatSends: #wait
		to: receiver2 ] value.
	^ [ | receiver6 |
	receiver6 _ #_coverageTracker990000_
		cover: (46 to: 54)
		declaredAt: (46 to: 54)
		by: salesBook.
	#_coverageTracker990000_
		coverAll:
			{56 to: 59}
		evaluating: [
			receiver6 sum: [ :aSale | | totalQuantity |
				#_coverageTracker990000_
					cover: (91 to: 103)
					declaredAt: (73 to: 85)
					by:
						(totalQuantity _ #_coverageTracker990000_
							coverAll:
								{108 to: 108}
							byLiteralOrPseudoVariable: 0).
				[ | receiver5 |
				receiver5 _ #_coverageTracker990000_
					cover: (113 to: 117)
					declaredAt: (63 to: 67)
					by: aSale.
				#_coverageTracker990000_
					coverAll:
						{119 to: 130}
					evaluating: [
						receiver5 lineItemsDo: [ :aLineItem |
							#_coverageTracker990000_
								cover: (163 to: 175)
								declaredAt: (73 to: 85)
								by:
									(totalQuantity _ [ | receiver4 |
									receiver4 _ #_coverageTracker990000_
										cover: (146 to: 158)
										declaredAt: (73 to: 85)
										by: totalQuantity.
									#_coverageTracker990000_
										coverAll:
											{177 to: 177}
										evaluating: [
											receiver4 +
												[ | receiver3 |
												receiver3 _ #_coverageTracker990000_
													cover: (179 to: 187)
													declaredAt: (134 to: 142)
													by: aLineItem.
												#_coverageTracker990000_
													coverAll:
														{189 to: 196}
													evaluating: [ receiver3 quantity ]
													thatSends: #quantity
													to: receiver3 ] value ]
										thatSends: #+
										to: receiver4 ] value) ]]
					thatSends: #lineItemsDo:
					to: receiver5 ] value.
				#_coverageTracker990000_
					cover: (202 to: 214)
					declaredAt: (73 to: 85)
					by: totalQuantity ]]
		thatSends: #sum:
		to: receiver6 ] value.! !
!Behavior method!
test07CanGetCreditCardInfoFromIt
	| expirationMonth creditCard creditCardNumber creditCardOwner |
	#_coverageTracker990031_ markAsExecuted.
	#_coverageTracker990031_
		cover: (103 to: 117)
		declaredAt: (38 to: 52)
		by:
			(expirationMonth _ [ | receiver1 |
			receiver1 _ #_coverageTracker990031_
				coverAll:
					{122 to: 126}
				by: Month.
			#_coverageTracker990031_
				coverAll:
					{128 to: 133. 144 to: 148}
				evaluating: [
					receiver1
						month:
							(#_coverageTracker990031_
								coverAll:
									{135 to: 142}
								byLiteralOrPseudoVariable: #January)
						year:
							(#_coverageTracker990031_
								coverAll:
									{150 to: 153}
								byLiteralOrPseudoVariable: 2020) ]
				thatSends: #month:year:
				to: receiver1 ] value).
	#_coverageTracker990031_
		cover: (158 to: 173)
		declaredAt: (65 to: 80)
		by:
			(creditCardNumber _ [ | receiver2 |
			receiver2 _ #_coverageTracker990031_
				coverAll:
					{178 to: 181}
				byLiteralOrPseudoVariable: self.
			#_coverageTracker990031_
				coverAll:
					{183 to: 203}
				evaluating: [ receiver2 validCreditCardNumber ]
				thatSends: #validCreditCardNumber
				to: receiver2 ] value).
	#_coverageTracker990031_
		cover: (207 to: 221)
		declaredAt: (82 to: 96)
		by:
			(creditCardOwner _ [ | receiver3 |
			receiver3 _ #_coverageTracker990031_
				coverAll:
					{226 to: 229}
				byLiteralOrPseudoVariable: self.
			#_coverageTracker990031_
				coverAll:
					{231 to: 244}
				evaluating: [ receiver3 validOwnerName ]
				thatSends: #validOwnerName
				to: receiver3 ] value).
	#_coverageTracker990031_
		cover: (250 to: 259)
		declaredAt: (54 to: 63)
		by:
			(creditCard _ [ | receiver4 |
			receiver4 _ #_coverageTracker990031_
				coverAll:
					{264 to: 273}
				by: CreditCard.
			#_coverageTracker990031_
				coverAll:
					{278 to: 286. 308 to: 315. 336 to: 346}
				evaluating: [
					receiver4
						numbered:
							(#_coverageTracker990031_
								cover: (288 to: 303)
								declaredAt: (65 to: 80)
								by: creditCardNumber)
						ownedBy:
							(#_coverageTracker990031_
								cover: (317 to: 331)
								declaredAt: (82 to: 96)
								by: creditCardOwner)
						expiringOn:
							(#_coverageTracker990031_
								cover: (348 to: 362)
								declaredAt: (38 to: 52)
								by: expirationMonth) ]
				thatSends: #numbered:ownedBy:expiringOn:
				to: receiver4 ] value).
	[ | receiver6 |
	receiver6 _ #_coverageTracker990031_
		coverAll:
			{369 to: 372}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker990031_
		coverAll:
			{374 to: 380. 399 to: 405}
		evaluating: [
			receiver6
				assert:
					(#_coverageTracker990031_
						cover: (382 to: 397)
						declaredAt: (65 to: 80)
						by: creditCardNumber)
				equals:
					[ | receiver5 |
					receiver5 _ #_coverageTracker990031_
						cover: (407 to: 416)
						declaredAt: (54 to: 63)
						by: creditCard.
					#_coverageTracker990031_
						coverAll:
							{418 to: 423}
						evaluating: [ receiver5 number ]
						thatSends: #number
						to: receiver5 ] value ]
		thatSends: #assert:equals:
		to: receiver6 ] value.
	[ | receiver8 |
	receiver8 _ #_coverageTracker990031_
		coverAll:
			{427 to: 430}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker990031_
		coverAll:
			{432 to: 438. 456 to: 462}
		evaluating: [
			receiver8
				assert:
					(#_coverageTracker990031_
						cover: (440 to: 454)
						declaredAt: (82 to: 96)
						by: creditCardOwner)
				equals:
					[ | receiver7 |
					receiver7 _ #_coverageTracker990031_
						cover: (464 to: 473)
						declaredAt: (54 to: 63)
						by: creditCard.
					#_coverageTracker990031_
						coverAll:
							{475 to: 483}
						evaluating: [ receiver7 ownerName ]
						thatSends: #ownerName
						to: receiver7 ] value ]
		thatSends: #assert:equals:
		to: receiver8 ] value.
	[ | receiver10 |
	receiver10 _ #_coverageTracker990031_
		coverAll:
			{487 to: 490}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker990031_
		coverAll:
			{492 to: 498. 516 to: 522}
		evaluating: [
			receiver10
				assert:
					(#_coverageTracker990031_
						cover: (500 to: 514)
						declaredAt: (38 to: 52)
						by: expirationMonth)
				equals:
					[ | receiver9 |
					receiver9 _ #_coverageTracker990031_
						cover: (524 to: 533)
						declaredAt: (54 to: 63)
						by: creditCard.
					#_coverageTracker990031_
						coverAll:
							{535 to: 544}
						evaluating: [ receiver9 expiration ]
						thatSends: #expiration
						to: receiver9 ] value ]
		thatSends: #assert:equals:
		to: receiver10 ] value.! !
!Behavior method!
validCreditCardNumber
	#_coverageTracker990072_ markAsExecuted.
	^ #_coverageTracker990072_
		coverAll:
			{27 to: 44}
		byLiteralOrPseudoVariable: '1234567890123456'.! !
!Behavior method!
itemSellByTheStorePrice
	#_coverageTracker990086_ markAsExecuted.
	^ #_coverageTracker990086_
		coverAll:
			{29 to: 30}
		byLiteralOrPseudoVariable: 10.! !
!Behavior method!
add: anAmount of: aBook toCartIdentifiedAs: aCartId
	#_coverageTracker990102_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ #_coverageTracker990102_
		coverAll:
			{55 to: 58}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker990102_
		coverAll:
			{60 to: 87. 97 to: 99}
		evaluating: [
			receiver2
				withCartSessionIdentifiedAs:
					(#_coverageTracker990102_
						cover: (89 to: 95)
						declaredAt: (45 to: 51)
						by: aCartId)
				do: [ :cartSession |
					[ | receiver1 |
					receiver1 _ #_coverageTracker990102_
						cover: (118 to: 128)
						declaredAt: (104 to: 114)
						by: cartSession.
					#_coverageTracker990102_
						coverAll:
							{130 to: 139. 150 to: 152}
						evaluating: [
							receiver1
								addToCart:
									(#_coverageTracker990102_
										cover: (141 to: 148)
										declaredAt: (6 to: 13)
										by: anAmount)
								of:
									(#_coverageTracker990102_
										cover: (154 to: 158)
										declaredAt: (19 to: 23)
										by: aBook) ]
						thatSends: #addToCart:of:
						to: receiver1 ] value ]]
		thatSends: #withCartSessionIdentifiedAs:do:
		to: receiver2 ] value.! !
!Behavior method!
itemSellByTheStore
	#_coverageTracker990120_ markAsExecuted.
	^ #_coverageTracker990120_
		coverAll:
			{25 to: 35}
		byLiteralOrPseudoVariable: 'validBook'.! !
!Behavior method!
total
	#_coverageTracker990138_ markAsExecuted.
	^ #_coverageTracker990138_
		cover: (12 to: 16)
		declaredAt: (12 to: 16)
		by: total.! !
!Behavior method!
storePerformance
	| totalMoney totalSales |
	#_coverageTracker990154_ markAsExecuted.
	#_coverageTracker990154_
		cover: (49 to: 58)
		declaredAt: (33 to: 42)
		by:
			(totalSales _ [ | receiver1 |
			receiver1 _ #_coverageTracker990154_
				coverAll:
					{63 to: 66}
				byLiteralOrPseudoVariable: self.
			#_coverageTracker990154_
				coverAll:
					{68 to: 77}
				evaluating: [ receiver1 totalSales ]
				thatSends: #totalSales
				to: receiver1 ] value).
	#_coverageTracker990154_
		cover: (81 to: 90)
		declaredAt: (22 to: 31)
		by:
			(totalMoney _ [ | receiver2 |
			receiver2 _ #_coverageTracker990154_
				coverAll:
					{95 to: 98}
				byLiteralOrPseudoVariable: self.
			#_coverageTracker990154_
				coverAll:
					{100 to: 115}
				evaluating: [ receiver2 totalMoneyRaised ]
				thatSends: #totalMoneyRaised
				to: receiver2 ] value).
	^ [ | receiver3 |
	receiver3 _ #_coverageTracker990154_
		coverAll:
			{122 to: 125}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker990154_
		coverAll:
			{127 to: 156. 169 to: 178}
		evaluating: [
			receiver3
				generateStoreSummaryWithSales:
					(#_coverageTracker990154_
						cover: (158 to: 167)
						declaredAt: (33 to: 42)
						by: totalSales)
				withMoney:
					(#_coverageTracker990154_
						cover: (180 to: 189)
						declaredAt: (22 to: 31)
						by: totalMoney) ]
		thatSends: #generateStoreSummaryWithSales:withMoney:
		to: receiver3 ] value.! !
!Behavior method!
initializeToCheckout: aCart ownedBy: anOwner charging: aCreditCard throught: aMerchantProcessor registeringOn: aSalesBook
	#_coverageTracker990177_ markAsExecuted.
	#_coverageTracker990177_
		cover: (126 to: 129)
		declaredAt: (126 to: 129)
		by:
			(cart _ #_coverageTracker990177_
				cover: (134 to: 138)
				declaredAt: (23 to: 27)
				by: aCart).
	#_coverageTracker990177_
		cover: (142 to: 146)
		declaredAt: (142 to: 146)
		by:
			(owner _ #_coverageTracker990177_
				cover: (151 to: 157)
				declaredAt: (38 to: 44)
				by: anOwner).
	#_coverageTracker990177_
		cover: (161 to: 170)
		declaredAt: (161 to: 170)
		by:
			(creditCard _ #_coverageTracker990177_
				cover: (175 to: 185)
				declaredAt: (56 to: 66)
				by: aCreditCard).
	#_coverageTracker990177_
		cover: (189 to: 205)
		declaredAt: (189 to: 205)
		by:
			(merchantProcessor _ #_coverageTracker990177_
				cover: (210 to: 227)
				declaredAt: (78 to: 95)
				by: aMerchantProcessor).
	#_coverageTracker990177_
		cover: (231 to: 239)
		declaredAt: (231 to: 239)
		by:
			(salesBook _ #_coverageTracker990177_
				cover: (244 to: 253)
				declaredAt: (112 to: 121)
				by: aSalesBook).! !
!Behavior method!
removeCartId: aCartId
	"I'll not generate an error if the cartId is invalid because when used from http
	request can be duplicated - Hernan"
	#_coverageTracker990200_ markAsExecuted.
	[ | receiver1 |
	receiver1 _ #_coverageTracker990200_
		cover: (144 to: 155)
		declaredAt: (144 to: 155)
		by: cartSessions.
	#_coverageTracker990200_
		coverAll:
			{157 to: 166. 176 to: 184}
		evaluating: [
			receiver1
				removeKey:
					(#_coverageTracker990200_
						cover: (168 to: 174)
						declaredAt: (15 to: 21)
						by: aCartId)
				ifAbsent: [ ]]
		thatSends: #removeKey:ifAbsent:
		to: receiver1 ] value.! !
!Behavior method!
if: aUser authenticatesWith: aPassword do: aBlock
	#_coverageTracker990207_ markAsExecuted.
	^ [ | receiver3 |
	receiver3 _ [ | receiver1 |
	receiver1 _ #_coverageTracker990207_
		coverAll:
			{56 to: 59}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker990207_
		coverAll:
			{61 to: 65. 73 to: 90}
		evaluating: [
			receiver1
				does:
					(#_coverageTracker990207_
						cover: (67 to: 71)
						declaredAt: (5 to: 9)
						by: aUser)
				authenticatesWith:
					(#_coverageTracker990207_
						cover: (92 to: 100)
						declaredAt: (30 to: 38)
						by: aPassword) ]
		thatSends: #does:authenticatesWith:
		to: receiver1 ] value.
	#_coverageTracker990207_
		coverAll:
			{106 to: 112. 124 to: 131}
		evaluating: [
			receiver3
				ifTrue:
					(#_coverageTracker990207_
						cover: (114 to: 119)
						declaredAt: (44 to: 49)
						by: aBlock)
				ifFalse: [
					[ | receiver2 |
					receiver2 _ #_coverageTracker990207_
						coverAll:
							{135 to: 138}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker990207_
						coverAll:
							{140 to: 169}
						evaluating: [ receiver2 signalInvalidUserAndOrPassword ]
						thatSends: #signalInvalidUserAndOrPassword
						to: receiver2 ] value ]]
		thatSends: #ifTrue:ifFalse:
		to: receiver3 ] value.! !
!Behavior method!
totalMoneyRaisedBy: anItem
	#_coverageTracker990234_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker990234_
		coverAll:
			{32 to: 36}
		by: Delay.
	#_coverageTracker990234_
		coverAll:
			{38 to: 48}
		evaluating: [
			receiver1 forSeconds:
				(#_coverageTracker990234_
					coverAll:
						{50 to: 50}
					byLiteralOrPseudoVariable: 1) ]
		thatSends: #forSeconds:
		to: receiver1 ] value.
	#_coverageTracker990234_
		coverAll:
			{53 to: 56}
		evaluating: [ receiver2 wait ]
		thatSends: #wait
		to: receiver2 ] value.
	^ [ | receiver9 |
	receiver9 _ #_coverageTracker990234_
		cover: (62 to: 70)
		declaredAt: (62 to: 70)
		by: salesBook.
	#_coverageTracker990234_
		coverAll:
			{72 to: 75}
		evaluating: [
			receiver9 sum: [ :aSale | | totalPerItem |
				#_coverageTracker990234_
					cover: (106 to: 117)
					declaredAt: (89 to: 100)
					by:
						(totalPerItem _ #_coverageTracker990234_
							coverAll:
								{121 to: 121}
							byLiteralOrPseudoVariable: 0).
				[ | receiver8 |
				receiver8 _ #_coverageTracker990234_
					cover: (126 to: 130)
					declaredAt: (79 to: 83)
					by: aSale.
				#_coverageTracker990234_
					coverAll:
						{132 to: 143}
					evaluating: [
						receiver8 lineItemsDo: [ :aLineItem |
							[ | receiver7 |
							receiver7 _ [ | receiver4 |
							receiver4 _ [ | receiver3 |
							receiver3 _ #_coverageTracker990234_
								cover: (160 to: 168)
								declaredAt: (147 to: 155)
								by: aLineItem.
							#_coverageTracker990234_
								coverAll:
									{170 to: 173}
								evaluating: [ receiver3 item ]
								thatSends: #item
								to: receiver3 ] value.
							#_coverageTracker990234_
								coverAll:
									{175 to: 175}
								evaluating: [
									receiver4 =
										(#_coverageTracker990234_
											cover: (177 to: 182)
											declaredAt: (21 to: 26)
											by: anItem) ]
								thatSends: #=
								to: receiver4 ] value.
							#_coverageTracker990234_
								coverAll:
									{185 to: 191}
								evaluating: [
									receiver7 ifTrue: [
										#_coverageTracker990234_
											cover: (210 to: 221)
											declaredAt: (89 to: 100)
											by:
												(totalPerItem _ [ | receiver6 |
												receiver6 _ #_coverageTracker990234_
													cover: (194 to: 205)
													declaredAt: (89 to: 100)
													by: totalPerItem.
												#_coverageTracker990234_
													coverAll:
														{223 to: 223}
													evaluating: [
														receiver6 +
															[ | receiver5 |
															receiver5 _ #_coverageTracker990234_
																cover: (225 to: 233)
																declaredAt: (147 to: 155)
																by: aLineItem.
															#_coverageTracker990234_
																coverAll:
																	{235 to: 239}
																evaluating: [ receiver5 total ]
																thatSends: #total
																to: receiver5 ] value ]
													thatSends: #+
													to: receiver6 ] value) ]]
								thatSends: #ifTrue:
								to: receiver7 ] value ]]
					thatSends: #lineItemsDo:
					to: receiver8 ] value.
				#_coverageTracker990234_
					cover: (246 to: 257)
					declaredAt: (89 to: 100)
					by: totalPerItem ]]
		thatSends: #sum:
		to: receiver9 ] value.! !
!Behavior method!
initialize
	#_coverageTracker990259_ markAsExecuted.
	#_coverageTracker990259_
		cover: (14 to: 18)
		declaredAt: (14 to: 18)
		by:
			(today _ [ | receiver1 |
			receiver1 _ #_coverageTracker990259_
				coverAll:
					{23 to: 33}
				by: DateAndTime.
			#_coverageTracker990259_
				coverAll:
					{35 to: 37}
				evaluating: [ receiver1 now ]
				thatSends: #now
				to: receiver1 ] value).! !
!Behavior method!
assertIsValidOwnerName: anOwnerName
	#_coverageTracker990277_ markAsExecuted.
	[ | receiver3 |
	receiver3 _ [ | receiver1 |
	receiver1 _ #_coverageTracker990277_
		cover: (39 to: 49)
		declaredAt: (25 to: 35)
		by: anOwnerName.
	#_coverageTracker990277_
		coverAll:
			{51 to: 57}
		evaluating: [ receiver1 isEmpty ]
		thatSends: #isEmpty
		to: receiver1 ] value.
	#_coverageTracker990277_
		coverAll:
			{59 to: 65}
		evaluating: [
			receiver3 ifTrue: [
				[ | receiver2 |
				receiver2 _ #_coverageTracker990277_
					coverAll:
						{69 to: 72}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker990277_
					coverAll:
						{74 to: 95}
					evaluating: [ receiver2 signalInvalidOwnerName ]
					thatSends: #signalInvalidOwnerName
					to: receiver2 ] value ]]
		thatSends: #ifTrue:
		to: receiver3 ] value.! !
!Behavior method!
initializeOf: aCollectionOfLineItems
	#_coverageTracker990287_ markAsExecuted.
	#_coverageTracker990287_
		cover: (41 to: 49)
		declaredAt: (41 to: 49)
		by:
			(lineItems _ #_coverageTracker990287_
				cover: (54 to: 75)
				declaredAt: (15 to: 36)
				by: aCollectionOfLineItems).! !
!Behavior method!
canNotChargeAnExpiredCreditCardErrorMessage
	#_coverageTracker990308_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker990308_
		coverAll:
			{49 to: 55}
		by: Cashier.
	#_coverageTracker990308_
		coverAll:
			{57 to: 99}
		evaluating: [ receiver1 canNotChargeAnExpiredCreditCardErrorMessage ]
		thatSends: #canNotChargeAnExpiredCreditCardErrorMessage
		to: receiver1 ] value.! !
!Behavior method!
customer
	#_coverageTracker990320_ markAsExecuted.
	^ #_coverageTracker990320_
		coverAll:
			{14 to: 24}
		byLiteralOrPseudoVariable: 'aCustomer'.! !
!Behavior method!
validOwnerName
	#_coverageTracker990339_ markAsExecuted.
	^ #_coverageTracker990339_
		coverAll:
			{20 to: 33}
		byLiteralOrPseudoVariable: 'Pepe Sanchez'.! !
!Behavior method!
initializeNow: aTime
	#_coverageTracker990348_ markAsExecuted.
	#_coverageTracker990348_
		cover: (25 to: 27)
		declaredAt: (25 to: 27)
		by:
			(now _ #_coverageTracker990348_
				cover: (32 to: 36)
				declaredAt: (16 to: 20)
				by: aTime).! !
!Behavior method!
add: aQuantity of: anItem
	#_coverageTracker990371_ markAsExecuted.
	[ | receiver1 |
	receiver1 _ #_coverageTracker990371_
		coverAll:
			{29 to: 32}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker990371_
		coverAll:
			{34 to: 55}
		evaluating: [
			receiver1 assertIsValidQuantity:
				(#_coverageTracker990371_
					cover: (57 to: 65)
					declaredAt: (6 to: 14)
					by: aQuantity) ]
		thatSends: #assertIsValidQuantity:
		to: receiver1 ] value.
	[ | receiver2 |
	receiver2 _ #_coverageTracker990371_
		coverAll:
			{69 to: 72}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker990371_
		coverAll:
			{74 to: 91}
		evaluating: [
			receiver2 assertIsValidItem:
				(#_coverageTracker990371_
					cover: (93 to: 98)
					declaredAt: (20 to: 25)
					by: anItem) ]
		thatSends: #assertIsValidItem:
		to: receiver2 ] value.
	[ | receiver3 |
	receiver3 _ #_coverageTracker990371_
		cover: (103 to: 107)
		declaredAt: (103 to: 107)
		by: items.
	#_coverageTracker990371_
		coverAll:
			{109 to: 112. 121 to: 136}
		evaluating: [
			receiver3
				add:
					(#_coverageTracker990371_
						cover: (114 to: 119)
						declaredAt: (20 to: 25)
						by: anItem)
				withOccurrences:
					(#_coverageTracker990371_
						cover: (138 to: 146)
						declaredAt: (6 to: 14)
						by: aQuantity) ]
		thatSends: #add:withOccurrences:
		to: receiver3 ] value.! !
!Behavior method!
cartContent
	#_coverageTracker990384_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker990384_
		cover: (16 to: 19)
		declaredAt: (16 to: 19)
		by: cart.
	#_coverageTracker990384_
		coverAll:
			{21 to: 27}
		evaluating: [ receiver1 content ]
		thatSends: #content
		to: receiver1 ] value.! !
!Behavior method!
generateBookSummaryOf: anItem withSales: totalSales withMoney: totalMoney
	| bookSummary |
	#_coverageTracker990396_ markAsExecuted.
	#_coverageTracker990396_
		cover: (92 to: 102)
		declaredAt: (78 to: 88)
		by:
			(bookSummary _ [ | receiver1 |
			receiver1 _ #_coverageTracker990396_
				coverAll:
					{107 to: 116}
				by: Dictionary.
			#_coverageTracker990396_
				coverAll:
					{118 to: 120}
				evaluating: [ receiver1 new ]
				thatSends: #new
				to: receiver1 ] value).
	[ | receiver2 |
	receiver2 _ #_coverageTracker990396_
		cover: (124 to: 134)
		declaredAt: (78 to: 88)
		by: bookSummary.
	#_coverageTracker990396_
		coverAll:
			{136 to: 138. 151 to: 154}
		evaluating: [
			receiver2
				at:
					(#_coverageTracker990396_
						coverAll:
							{140 to: 149}
						byLiteralOrPseudoVariable: 'quantity')
				put:
					(#_coverageTracker990396_
						cover: (156 to: 165)
						declaredAt: (42 to: 51)
						by: totalSales) ]
		thatSends: #at:put:
		to: receiver2 ] value.
	[ | receiver3 |
	receiver3 _ #_coverageTracker990396_
		cover: (169 to: 179)
		declaredAt: (78 to: 88)
		by: bookSummary.
	#_coverageTracker990396_
		coverAll:
			{181 to: 183. 193 to: 196}
		evaluating: [
			receiver3
				at:
					(#_coverageTracker990396_
						coverAll:
							{185 to: 191}
						byLiteralOrPseudoVariable: 'total')
				put:
					(#_coverageTracker990396_
						cover: (198 to: 207)
						declaredAt: (64 to: 73)
						by: totalMoney) ]
		thatSends: #at:put:
		to: receiver3 ] value.
	[ | receiver10 |
	receiver10 _ #_coverageTracker990396_
		cover: (211 to: 221)
		declaredAt: (78 to: 88)
		by: bookSummary.
	#_coverageTracker990396_
		coverAll:
			{223 to: 225. 237 to: 240}
		evaluating: [
			receiver10
				at:
					(#_coverageTracker990396_
						coverAll:
							{227 to: 235}
						byLiteralOrPseudoVariable: 'summary')
				put:
					[ | receiver9 |
					receiver9 _ [ | receiver7 |
					receiver7 _ [ | receiver6 |
					receiver6 _ [ | receiver4 |
					receiver4 _ #_coverageTracker990396_
						cover: (242 to: 247)
						declaredAt: (24 to: 29)
						by: anItem.
					#_coverageTracker990396_
						coverAll:
							{248 to: 248}
						evaluating: [
							receiver4 ,
								(#_coverageTracker990396_
									coverAll:
										{249 to: 262}
									byLiteralOrPseudoVariable: ' was selled ') ]
						thatSends: #,
						to: receiver4 ] value.
					#_coverageTracker990396_
						coverAll:
							{263 to: 263}
						evaluating: [
							receiver6 ,
								[ | receiver5 |
								receiver5 _ #_coverageTracker990396_
									cover: (264 to: 273)
									declaredAt: (42 to: 51)
									by: totalSales.
								#_coverageTracker990396_
									coverAll:
										{275 to: 282}
									evaluating: [ receiver5 asString ]
									thatSends: #asString
									to: receiver5 ] value ]
						thatSends: #,
						to: receiver6 ] value.
					#_coverageTracker990396_
						coverAll:
							{283 to: 283}
						evaluating: [
							receiver7 ,
								(#_coverageTracker990396_
									coverAll:
										{285 to: 338}
									byLiteralOrPseudoVariable: ' times and raised a total amount of money equal to: ') ]
						thatSends: #,
						to: receiver7 ] value.
					#_coverageTracker990396_
						coverAll:
							{339 to: 339}
						evaluating: [
							receiver9 ,
								[ | receiver8 |
								receiver8 _ #_coverageTracker990396_
									cover: (341 to: 350)
									declaredAt: (64 to: 73)
									by: totalMoney.
								#_coverageTracker990396_
									coverAll:
										{352 to: 359}
									evaluating: [ receiver8 asString ]
									thatSends: #asString
									to: receiver8 ] value ]
						thatSends: #,
						to: receiver9 ] value ]
		thatSends: #at:put:
		to: receiver10 ] value.
	^ #_coverageTracker990396_
		cover: (366 to: 376)
		declaredAt: (78 to: 88)
		by: bookSummary.! !
!Behavior method!
today
	#_coverageTracker990428_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker990428_
		cover: (11 to: 13)
		declaredAt: (11 to: 13)
		by: now.
	#_coverageTracker990428_
		coverAll:
			{15 to: 18}
		evaluating: [ receiver1 date ]
		thatSends: #date
		to: receiver1 ] value.! !
!Behavior method!
totalSalesOf: anItem
	#_coverageTracker990448_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ [ | receiver1 |
	receiver1 _ #_coverageTracker990448_
		coverAll:
			{26 to: 30}
		by: Delay.
	#_coverageTracker990448_
		coverAll:
			{32 to: 42}
		evaluating: [
			receiver1 forSeconds:
				(#_coverageTracker990448_
					coverAll:
						{44 to: 44}
					byLiteralOrPseudoVariable: 1) ]
		thatSends: #forSeconds:
		to: receiver1 ] value.
	#_coverageTracker990448_
		coverAll:
			{47 to: 50}
		evaluating: [ receiver2 wait ]
		thatSends: #wait
		to: receiver2 ] value.
	^ [ | receiver9 |
	receiver9 _ #_coverageTracker990448_
		cover: (56 to: 64)
		declaredAt: (56 to: 64)
		by: salesBook.
	#_coverageTracker990448_
		coverAll:
			{66 to: 69}
		evaluating: [
			receiver9 sum: [ :aSale | | quantityPerItem |
				#_coverageTracker990448_
					cover: (104 to: 118)
					declaredAt: (83 to: 97)
					by:
						(quantityPerItem _ #_coverageTracker990448_
							coverAll:
								{123 to: 123}
							byLiteralOrPseudoVariable: 0).
				[ | receiver8 |
				receiver8 _ #_coverageTracker990448_
					cover: (128 to: 132)
					declaredAt: (73 to: 77)
					by: aSale.
				#_coverageTracker990448_
					coverAll:
						{134 to: 145}
					evaluating: [
						receiver8 lineItemsDo: [ :aLineItem |
							[ | receiver7 |
							receiver7 _ [ | receiver4 |
							receiver4 _ [ | receiver3 |
							receiver3 _ #_coverageTracker990448_
								cover: (162 to: 170)
								declaredAt: (149 to: 157)
								by: aLineItem.
							#_coverageTracker990448_
								coverAll:
									{172 to: 175}
								evaluating: [ receiver3 item ]
								thatSends: #item
								to: receiver3 ] value.
							#_coverageTracker990448_
								coverAll:
									{177 to: 177}
								evaluating: [
									receiver4 =
										(#_coverageTracker990448_
											cover: (179 to: 184)
											declaredAt: (15 to: 20)
											by: anItem) ]
								thatSends: #=
								to: receiver4 ] value.
							#_coverageTracker990448_
								coverAll:
									{187 to: 193}
								evaluating: [
									receiver7 ifTrue: [
										#_coverageTracker990448_
											cover: (215 to: 229)
											declaredAt: (83 to: 97)
											by:
												(quantityPerItem _ [ | receiver6 |
												receiver6 _ #_coverageTracker990448_
													cover: (196 to: 210)
													declaredAt: (83 to: 97)
													by: quantityPerItem.
												#_coverageTracker990448_
													coverAll:
														{231 to: 231}
													evaluating: [
														receiver6 +
															[ | receiver5 |
															receiver5 _ #_coverageTracker990448_
																cover: (233 to: 241)
																declaredAt: (149 to: 157)
																by: aLineItem.
															#_coverageTracker990448_
																coverAll:
																	{243 to: 250}
																evaluating: [ receiver5 quantity ]
																thatSends: #quantity
																to: receiver5 ] value ]
													thatSends: #+
													to: receiver6 ] value) ]]
								thatSends: #ifTrue:
								to: receiver7 ] value ]]
					thatSends: #lineItemsDo:
					to: receiver8 ] value.
				#_coverageTracker990448_
					cover: (257 to: 271)
					declaredAt: (83 to: 97)
					by: quantityPerItem ]]
		thatSends: #sum:
		to: receiver9 ] value.! !
!Behavior method!
now
	#_coverageTracker990480_ markAsExecuted.
	^ #_coverageTracker990480_
		cover: (10 to: 12)
		declaredAt: (10 to: 12)
		by: now.! !
!Behavior method!
now
	#_coverageTracker990487_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker990487_
		cover: (8 to: 19)
		declaredAt: (8 to: 19)
		by: systemFacade.
	#_coverageTracker990487_
		coverAll:
			{21 to: 23}
		evaluating: [ receiver1 now ]
		thatSends: #now
		to: receiver1 ] value.! !
!Behavior method!
salesDoneBy: aUser
	"Esto es un indicio de que por ahi conviene empezar a pensar en modelar un SaleBook - Hernan"
	#_coverageTracker990499_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ #_coverageTracker990499_
		cover: (119 to: 127)
		declaredAt: (119 to: 127)
		by: salesBook.
	#_coverageTracker990499_
		coverAll:
			{129 to: 135}
		evaluating: [
			receiver2 select: [ :aSale |
				[ | receiver1 |
				receiver1 _ #_coverageTracker990499_
					cover: (148 to: 152)
					declaredAt: (140 to: 144)
					by: aSale.
				#_coverageTracker990499_
					coverAll:
						{154 to: 163}
					evaluating: [
						receiver1 wasDoneBy:
							(#_coverageTracker990499_
								cover: (165 to: 169)
								declaredAt: (14 to: 18)
								by: aUser) ]
					thatSends: #wasDoneBy:
					to: receiver1 ] value ]]
		thatSends: #select:
		to: receiver2 ] value.! !
!Behavior method!
checkOut
	#_coverageTracker990516_ markAsExecuted.
	[ | receiver1 |
	receiver1 _ #_coverageTracker990516_
		coverAll:
			{12 to: 15}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker990516_
		coverAll:
			{17 to: 28}
		evaluating: [ receiver1 createTicket ]
		thatSends: #createTicket
		to: receiver1 ] value.
	[ | receiver2 |
	receiver2 _ #_coverageTracker990516_
		coverAll:
			{32 to: 35}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker990516_
		coverAll:
			{37 to: 46}
		evaluating: [ receiver2 debitTotal ]
		thatSends: #debitTotal
		to: receiver2 ] value.
	[ | receiver3 |
	receiver3 _ #_coverageTracker990516_
		coverAll:
			{50 to: 53}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker990516_
		coverAll:
			{55 to: 66}
		evaluating: [ receiver3 registerSale ]
		thatSends: #registerSale
		to: receiver3 ] value.
	^ #_coverageTracker990516_
		cover: (73 to: 78)
		declaredAt: (73 to: 78)
		by: ticket.! !
!Behavior method!
sessionHasExpiredErrorDescription
	#_coverageTracker990529_ markAsExecuted.
	^ [ | receiver5 |
	receiver5 _ [ | receiver4 |
	receiver4 _ #_coverageTracker990529_
		coverAll:
			{39 to: 67}
		byLiteralOrPseudoVariable: 'Can not use the cart after '.
	#_coverageTracker990529_
		coverAll:
			{68 to: 68}
		evaluating: [
			receiver4 ,
				[ | receiver3 |
				receiver3 _ [ | receiver2 |
				receiver2 _ [ | receiver1 |
				receiver1 _ #_coverageTracker990529_
					coverAll:
						{70 to: 73}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker990529_
					coverAll:
						{75 to: 89}
					evaluating: [ receiver1 sessionDuration ]
					thatSends: #sessionDuration
					to: receiver1 ] value.
				#_coverageTracker990529_
					coverAll:
						{91 to: 97}
					evaluating: [ receiver2 minutes ]
					thatSends: #minutes
					to: receiver2 ] value.
				#_coverageTracker990529_
					coverAll:
						{99 to: 109}
					evaluating: [ receiver3 printString ]
					thatSends: #printString
					to: receiver3 ] value ]
		thatSends: #,
		to: receiver4 ] value.
	#_coverageTracker990529_
		coverAll:
			{111 to: 111}
		evaluating: [
			receiver5 ,
				(#_coverageTracker990529_
					coverAll:
						{113 to: 136}
					byLiteralOrPseudoVariable: ' minutes of inactivity') ]
		thatSends: #,
		to: receiver5 ] value.! !
!Behavior method!
debitTotal
	| transactionId |
	#_coverageTracker990547_ markAsExecuted.
	#_coverageTracker990547_
		cover: (35 to: 47)
		declaredAt: (16 to: 28)
		by:
			(transactionId _ [ | receiver2 |
			receiver2 _ #_coverageTracker990547_
				cover: (52 to: 68)
				declaredAt: (52 to: 68)
				by: merchantProcessor.
			#_coverageTracker990547_
				coverAll:
					{70 to: 75. 90 to: 94}
				evaluating: [
					receiver2
						debit:
							[ | receiver1 |
							receiver1 _ #_coverageTracker990547_
								cover: (77 to: 82)
								declaredAt: (77 to: 82)
								by: ticket.
							#_coverageTracker990547_
								coverAll:
									{84 to: 88}
								evaluating: [ receiver1 total ]
								thatSends: #total
								to: receiver1 ] value
						from:
							(#_coverageTracker990547_
								cover: (96 to: 105)
								declaredAt: (96 to: 105)
								by: creditCard) ]
				thatSends: #debit:from:
				to: receiver2 ] value).
	[ | receiver3 |
	receiver3 _ #_coverageTracker990547_
		cover: (109 to: 114)
		declaredAt: (77 to: 82)
		by: ticket.
	#_coverageTracker990547_
		coverAll:
			{116 to: 129}
		evaluating: [
			receiver3 transactionId:
				(#_coverageTracker990547_
					cover: (131 to: 143)
					declaredAt: (16 to: 28)
					by: transactionId) ]
		thatSends: #transactionId:
		to: receiver3 ] value.! !
!Behavior method!
today
	#_coverageTracker990566_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker990566_
		cover: (11 to: 15)
		declaredAt: (11 to: 15)
		by: clock.
	#_coverageTracker990566_
		coverAll:
			{17 to: 21}
		evaluating: [ receiver1 today ]
		thatSends: #today
		to: receiver1 ] value.! !
!Behavior method!
now
	#_coverageTracker990583_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker990583_
		cover: (9 to: 13)
		declaredAt: (9 to: 13)
		by: clock.
	#_coverageTracker990583_
		coverAll:
			{15 to: 17}
		evaluating: [ receiver1 now ]
		thatSends: #now
		to: receiver1 ] value.! !
!Behavior method!
add: anItem
	#_coverageTracker990593_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker990593_
		coverAll:
			{17 to: 20}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker990593_
		coverAll:
			{22 to: 25. 29 to: 31}
		evaluating: [
			receiver1
				add:
					(#_coverageTracker990593_
						coverAll:
							{27 to: 27}
						byLiteralOrPseudoVariable: 1)
				of:
					(#_coverageTracker990593_
						cover: (33 to: 38)
						declaredAt: (6 to: 11)
						by: anItem) ]
		thatSends: #add:of:
		to: receiver1 ] value.! !
!Behavior method!
validOwnerName
	#_coverageTracker990602_ markAsExecuted.
	^ #_coverageTracker990602_
		coverAll:
			{20 to: 33}
		byLiteralOrPseudoVariable: 'Pepe Sanchez'.! !
!Behavior method!
total
	#_coverageTracker990618_ markAsExecuted.
	^ [ | receiver1 |
	receiver1 _ #_coverageTracker990618_
		cover: (12 to: 17)
		declaredAt: (12 to: 17)
		by: ticket.
	#_coverageTracker990618_
		coverAll:
			{19 to: 23}
		evaluating: [ receiver1 total ]
		thatSends: #total
		to: receiver1 ] value.! !
!Behavior method!
test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit
	| cart cashier salesBook creditCard |
	#_coverageTracker990633_ markAsExecuted.
	#_coverageTracker990633_
		cover: (96 to: 99)
		declaredAt: (58 to: 61)
		by:
			(cart _ [ | receiver1 |
			receiver1 _ #_coverageTracker990633_
				cover: (104 to: 121)
				declaredAt: (104 to: 121)
				by: testObjectsFactory.
			#_coverageTracker990633_
				coverAll:
					{123 to: 132}
				evaluating: [ receiver1 createCart ]
				thatSends: #createCart
				to: receiver1 ] value).
	[ | receiver3 |
	receiver3 _ #_coverageTracker990633_
		cover: (136 to: 139)
		declaredAt: (58 to: 61)
		by: cart.
	#_coverageTracker990633_
		coverAll:
			{141 to: 144}
		evaluating: [
			receiver3 add:
				[ | receiver2 |
				receiver2 _ #_coverageTracker990633_
					cover: (146 to: 163)
					declaredAt: (104 to: 121)
					by: testObjectsFactory.
				#_coverageTracker990633_
					coverAll:
						{165 to: 182}
					evaluating: [ receiver2 itemSellByTheStore ]
					thatSends: #itemSellByTheStore
					to: receiver2 ] value ]
		thatSends: #add:
		to: receiver3 ] value.
	#_coverageTracker990633_
		cover: (186 to: 195)
		declaredAt: (81 to: 90)
		by:
			(creditCard _ [ | receiver4 |
			receiver4 _ #_coverageTracker990633_
				cover: (200 to: 217)
				declaredAt: (104 to: 121)
				by: testObjectsFactory.
			#_coverageTracker990633_
				coverAll:
					{219 to: 238}
				evaluating: [ receiver4 notExpiredCreditCard ]
				thatSends: #notExpiredCreditCard
				to: receiver4 ] value).
	#_coverageTracker990633_
		cover: (242 to: 250)
		declaredAt: (71 to: 79)
		by:
			(salesBook _ [ | receiver5 |
			receiver5 _ #_coverageTracker990633_
				coverAll:
					{255 to: 271}
				by: OrderedCollection.
			#_coverageTracker990633_
				coverAll:
					{273 to: 275}
				evaluating: [ receiver5 new ]
				thatSends: #new
				to: receiver5 ] value).
	#_coverageTracker990633_
		cover: (280 to: 292)
		declaredAt: (280 to: 292)
		by:
			(debitBehavior _ [ :anAmount :aCreditCard |
			[ | receiver7 |
			receiver7 _ #_coverageTracker990633_
				coverAll:
					{324 to: 327}
				byLiteralOrPseudoVariable: self.
			#_coverageTracker990633_
				coverAll:
					{329 to: 334}
				evaluating: [
					receiver7 error:
						[ | receiver6 |
						receiver6 _ #_coverageTracker990633_
							coverAll:
								{336 to: 342}
							by: Cashier.
						#_coverageTracker990633_
							coverAll:
								{344 to: 376}
							evaluating: [ receiver6 creditCardHasNoCreditErrorMessage ]
							thatSends: #creditCardHasNoCreditErrorMessage
							to: receiver6 ] value ]
				thatSends: #error:
				to: receiver7 ] value ]).
	#_coverageTracker990633_
		cover: (383 to: 389)
		declaredAt: (63 to: 69)
		by:
			(cashier _ [ | receiver10 |
			receiver10 _ #_coverageTracker990633_
				coverAll:
					{393 to: 399}
				by: Cashier.
			#_coverageTracker990633_
				coverAll:
					{404 to: 414. 424 to: 431. 463 to: 471. 486 to: 494. 503 to: 505. 534 to: 547}
				evaluating: [
					receiver10
						toCheckout:
							(#_coverageTracker990633_
								cover: (416 to: 419)
								declaredAt: (58 to: 61)
								by: cart)
						ownedBy:
							[ | receiver8 |
							receiver8 _ #_coverageTracker990633_
								cover: (433 to: 450)
								declaredAt: (104 to: 121)
								by: testObjectsFactory.
							#_coverageTracker990633_
								coverAll:
									{452 to: 459}
								evaluating: [ receiver8 customer ]
								thatSends: #customer
								to: receiver8 ] value
						charging:
							(#_coverageTracker990633_
								cover: (473 to: 482)
								declaredAt: (81 to: 90)
								by: creditCard)
						throught:
							(#_coverageTracker990633_
								coverAll:
									{496 to: 499}
								byLiteralOrPseudoVariable: self)
						on:
							[ | receiver9 |
							receiver9 _ #_coverageTracker990633_
								cover: (507 to: 524)
								declaredAt: (104 to: 121)
								by: testObjectsFactory.
							#_coverageTracker990633_
								coverAll:
									{526 to: 530}
								evaluating: [ receiver9 today ]
								thatSends: #today
								to: receiver9 ] value
						registeringOn:
							(#_coverageTracker990633_
								cover: (549 to: 557)
								declaredAt: (71 to: 79)
								by: salesBook) ]
				thatSends: #toCheckout:ownedBy:charging:throught:on:registeringOn:
				to: receiver10 ] value).
	[ | receiver19 |
	receiver19 _ #_coverageTracker990633_
		coverAll:
			{564 to: 567}
		byLiteralOrPseudoVariable: self.
	#_coverageTracker990633_
		coverAll:
			{572 to: 578. 602 to: 607. 640 to: 655}
		evaluating: [
			receiver19
				should: [
					[ | receiver11 |
					receiver11 _ #_coverageTracker990633_
						cover: (581 to: 587)
						declaredAt: (63 to: 69)
						by: cashier.
					#_coverageTracker990633_
						coverAll:
							{589 to: 596}
						evaluating: [ receiver11 checkOut ]
						thatSends: #checkOut
						to: receiver11 ] value ]
				raise:
					[ | receiver12 |
					receiver12 _ #_coverageTracker990633_
						coverAll:
							{609 to: 613}
						by: Error.
					#_coverageTracker990633_
						coverAll:
							{615 to: 615}
						evaluating: [
							receiver12 -
								(#_coverageTracker990633_
									coverAll:
										{617 to: 636}
									by: MessageNotUnderstood) ]
						thatSends: #-
						to: receiver12 ] value
				withExceptionDo: [ :anError |
					[ | receiver16 |
					receiver16 _ #_coverageTracker990633_
						coverAll:
							{673 to: 676}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker990633_
						coverAll:
							{678 to: 684}
						evaluating: [
							receiver16 assert:
								[ | receiver15 |
								receiver15 _ [ | receiver13 |
								receiver13 _ #_coverageTracker990633_
									cover: (686 to: 692)
									declaredAt: (660 to: 666)
									by: anError.
								#_coverageTracker990633_
									coverAll:
										{694 to: 704}
									evaluating: [ receiver13 messageText ]
									thatSends: #messageText
									to: receiver13 ] value.
								#_coverageTracker990633_
									coverAll:
										{706 to: 706}
									evaluating: [
										receiver15 =
											[ | receiver14 |
											receiver14 _ #_coverageTracker990633_
												coverAll:
													{708 to: 714}
												by: Cashier.
											#_coverageTracker990633_
												coverAll:
													{716 to: 748}
												evaluating: [ receiver14 creditCardHasNoCreditErrorMessage ]
												thatSends: #creditCardHasNoCreditErrorMessage
												to: receiver14 ] value ]
									thatSends: #=
									to: receiver15 ] value ]
						thatSends: #assert:
						to: receiver16 ] value.
					[ | receiver18 |
					receiver18 _ #_coverageTracker990633_
						coverAll:
							{754 to: 757}
						byLiteralOrPseudoVariable: self.
					#_coverageTracker990633_
						coverAll:
							{759 to: 765}
						evaluating: [
							receiver18 assert:
								[ | receiver17 |
								receiver17 _ #_coverageTracker990633_
									cover: (767 to: 775)
									declaredAt: (71 to: 79)
									by: salesBook.
								#_coverageTracker990633_
									coverAll:
										{777 to: 783}
									evaluating: [ receiver17 isEmpty ]
									thatSends: #isEmpty
									to: receiver17 ] value ]
						thatSends: #assert:
						to: receiver18 ] value ]]
		thatSends: #should:raise:withExceptionDo:
		to: receiver19 ] value.! !
!Behavior method!
expiredMonthOfYear
	#_coverageTracker990682_ markAsExecuted.
	^ [ | receiver4 |
	receiver4 _ #_coverageTracker990682_
		coverAll:
			{25 to: 29}
		by: Month.
	#_coverageTracker990682_
		coverAll:
			{31 to: 36. 55 to: 59}
		evaluating: [
			receiver4
				month:
					[ | receiver1 |
					receiver1 _ #_coverageTracker990682_
						cover: (38 to: 42)
						declaredAt: (38 to: 42)
						by: today.
					#_coverageTracker990682_
						coverAll:
							{44 to: 53}
						evaluating: [ receiver1 monthIndex ]
						thatSends: #monthIndex
						to: receiver1 ] value
				year:
					[ | receiver3 |
					receiver3 _ [ | receiver2 |
					receiver2 _ #_coverageTracker990682_
						cover: (61 to: 65)
						declaredAt: (38 to: 42)
						by: today.
					#_coverageTracker990682_
						coverAll:
							{67 to: 76}
						evaluating: [ receiver2 yearNumber ]
						thatSends: #yearNumber
						to: receiver2 ] value.
					#_coverageTracker990682_
						coverAll:
							{78 to: 78}
						evaluating: [
							receiver3 -
								(#_coverageTracker990682_
									coverAll:
										{79 to: 80}
									byLiteralOrPseudoVariable: 1) ]
						thatSends: #-
						to: receiver3 ] value ]
		thatSends: #month:year:
		to: receiver4 ] value.! !
!Behavior method!
total
	#_coverageTracker990692_ markAsExecuted.
	^ [ | receiver2 |
	receiver2 _ #_coverageTracker990692_
		cover: (11 to: 19)
		declaredAt: (11 to: 19)
		by: lineItems.
	#_coverageTracker990692_
		coverAll:
			{21 to: 24}
		evaluating: [
			receiver2 sum: [ :aLineItem |
				[ | receiver1 |
				receiver1 _ #_coverageTracker990692_
					cover: (41 to: 49)
					declaredAt: (29 to: 37)
					by: aLineItem.
				#_coverageTracker990692_
					coverAll:
						{51 to: 55}
					evaluating: [ receiver1 total ]
					thatSends: #total
					to: receiver1 ] value ]]
		thatSends: #sum:
		to: receiver2 ] value.! !
!Behavior method!
registerSale
	#_coverageTracker990712_ markAsExecuted.
	[ | receiver2 |
	receiver2 _ #_coverageTracker990712_
		cover: (16 to: 24)
		declaredAt: (16 to: 24)
		by: salesBook.
	#_coverageTracker990712_
		coverAll:
			{26 to: 29}
		evaluating: [
			receiver2 add:
				[ | receiver1 |
				receiver1 _ #_coverageTracker990712_
					coverAll:
						{31 to: 34}
					byLiteralOrPseudoVariable: self.
				#_coverageTracker990712_
					coverAll:
						{36 to: 45}
					evaluating: [ receiver1 createSale ]
					thatSends: #createSale
					to: receiver1 ] value ]
		thatSends: #add:
		to: receiver2 ] value.! !
!Behavior method!
validCreditCardNumber
	#_coverageTracker990726_ markAsExecuted.
	^ #_coverageTracker990726_
		coverAll:
			{27 to: 44}
		byLiteralOrPseudoVariable: '1234567890123456'.! !

!testRun: #TusLibrosSystemFacadeTest #test20BookPerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:14:26'!
FAILURE!

!testRun: #TusLibrosSystemFacadeTest #test20BookPerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:14:28'!
FAILURE!

!testRun: #TusLibrosSystemFacadeTest #test20BookPerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:14:40'!
FAILURE!

!testRun: #TusLibrosSystemFacadeTest #test20BookPerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:14:42'!
FAILURE!

!classDefinition: #BlockExecutor category: 'TusLibros-Model' stamp: 'JULI 6/20/2023 21:17:09'!
Object subclass: #BlockExecutor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Model'!
!TusLibrosSystemFacade methodsFor: 'private' stamp: 'JULI 6/20/2023 21:16:58' prior: 50664139!
storePerformance

	| totalMoney totalSales aThread|
	
	aThread := BlockExecutor run:[totalSales := self totalSales.].
	
	"totalSales := self totalSales."
	totalMoney := self totalMoneyRaised.
	
	aThread wait.
	
	^self generateStoreSummaryWithSales: totalSales withMoney: totalMoney. 
! !

!testRun: #TusLibrosSystemFacadeTest #test21StorePerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:17:31'!
ERROR!

!testRun: #TusLibrosSystemFacadeTest #test21StorePerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:17:31'!
ERROR!
!TusLibrosSystemFacade methodsFor: 'private' stamp: 'JULI 6/20/2023 21:19:10' prior: 50670300!
storePerformance

	| totalMoney totalSales aThread|
	
	aThread := BlockExecutor run:[self totalSales.].
	
	totalMoney := self totalMoneyRaised.
	
	totalSales := aThread wait.
	
	^self generateStoreSummaryWithSales: totalSales withMoney: totalMoney. 
! !

!testRun: #TusLibrosSystemFacadeTest #test21StorePerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:19:22'!
ERROR!

!testRun: #TusLibrosSystemFacadeTest #test21StorePerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:19:22'!
ERROR!
!BlockExecutor class methodsFor: 'instance creation' stamp: 'JULI 6/20/2023 21:19:29'!
run: aBlockClosure 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeRun: aBlockClosure ! !
!BlockExecutor class methodsFor: 'instance creation' stamp: 'JULI 6/20/2023 21:19:58' prior: 50670339!
run: aBlock
	^self new initializeRun: aBlock! !

!testRun: #TusLibrosSystemFacadeTest #test21StorePerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:20:01'!
ERROR!

!classDefinition: #BlockExecutor category: 'TusLibros-Model' stamp: 'JULI 6/20/2023 21:20:19'!
Object subclass: #BlockExecutor
	instanceVariableNames: 'block'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Model'!
!BlockExecutor methodsFor: 'initialize' stamp: 'JULI 6/20/2023 21:20:19'!
initializeRun: aBlock 
	self shouldBeImplemented.
	block := aBlock.! !

!classDefinition: #BlockExecutor category: 'TusLibros-Model' stamp: 'JULI 6/20/2023 21:21:18'!
Object subclass: #BlockExecutor
	instanceVariableNames: 'block sem'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Model'!

!classDefinition: #BlockExecutor category: 'TusLibros-Model' stamp: 'JULI 6/20/2023 21:21:19'!
Object subclass: #BlockExecutor
	instanceVariableNames: 'block sem returnedValue'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Model'!
!BlockExecutor methodsFor: 'initialize' stamp: 'JULI 6/20/2023 21:21:15' prior: 50670364!
initializeRun: aBlock 
	sem := Semaphore new.
	[ returnedValue := aBlock value.
		sem signal.
		] fork.! !

!testRun: #TusLibrosSystemFacadeTest #test21StorePerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:21:23'!
ERROR!
!BlockExecutor methodsFor: 'synchronization' stamp: 'JULI 6/20/2023 21:21:57'!
wait
	self shouldBeImplemented.! !
!BlockExecutor methodsFor: 'synchronization' stamp: 'JULI 6/20/2023 21:22:16' prior: 50670395!
wait
	sem wait.
	^returnedValue.! !

!testRun: #TusLibrosSystemFacadeTest #test21StorePerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:22:17'!
FAILURE!

!testRun: #TusLibrosSystemFacadeTest #test21StorePerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:22:19'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test21StorePerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:22:30'!
PASSED!
!TusLibrosSystemFacade methodsFor: 'private' stamp: 'JULI 6/20/2023 21:23:46' prior: 50664149!
bookPerformance: anItem
	|  totalMoney totalSales aThread|
	
	aThread := BlockExecutor run:[ self totalSalesOf: anItem. ].
	
	totalMoney := self totalMoneyRaisedBy: anItem.
	
	totalSales := aThread wait.

	^self generateBookSummaryOf: anItem withSales: totalSales  withMoney: totalMoney.

	

! !

!testRun: #TusLibrosSystemFacadeTest #test20BookPerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:23:57'!
PASSED!

!testRun: #TusLibrosSystemFacadeTest #test21StorePerformanceShouldNotTakeTooLong stamp: 'JULI 6/20/2023 21:23:58'!
PASSED!

----SNAPSHOT----(20 June 2023 21:24:04) CuisUniversity-5832.image priorSource: 10632164!

----SNAPSHOT----(20 June 2023 21:27:17) CuisUniversity-5832.image priorSource: 10841118!

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.!
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/20/2023 21:31:05' prior: 50663619!
createCart

	| newCartId |
	
	newCartId := restInterface createCartFor: 'herna1n' password: 'smalltalk'.
	cartIds add: newCartId.
	self triggerEvent: #newCartIdArrived! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/20/2023 21:35:46' prior: 50670446!
createCart

	| newCartId |
	
	newCartId := restInterface 
		createCartFor: 'herna1n' 
		password: 'smalltalk'.
	
	cartIds add: newCartId.
	
	self triggerEvent: #newCartIdArrived! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.!
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/20/2023 21:41:52' prior: 50670455!
createCart

	| newCartId |
	
	[newCartId := restInterface 
		createCartFor: 'herna1n' 
		password: 'smalltalk'.
	
	cartIds add: newCartId.
	
	self triggerEvent: #newCartIdArrived
	] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']! !
!TusLibrosClientTestWindow methodsFor: 'initialization' stamp: 'JULI 6/20/2023 21:43:15' prior: 50663385!
initializeWith: aTitle

	self setLabel: aTitle.
	self model: (TusLibrosClientTestWindowModel new).
	self morphExtent: (self defaultExtent).
	self buildMorphicWindow.
	self openInWorld.
			
	self model when: #newCartIdArrived send: #refreshListOfCartIds to: self.		
	self model when: #selectedCartChanged send: #refreshCartButtonsLabels: to: self.	
	self model when: #bookAddedToCart send: #informBook:addedToCart: to: self.
	self model when: #newCurrentSelectedCartContentArrived send: #refreshCurrentSelectedCartContent: to: self.
	self model when: #showPopUpErrorMessage send: #popUpErrorMessage: to: self.! !
!TusLibrosClientTestWindow methodsFor: 'events' stamp: 'JULI 6/20/2023 21:44:05'!
popUpErrorMessage: aMessageError
	self inform: aMessageError.! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/20/2023 21:46:40' prior: 50670468!
createCart

	| newCartId |
	
	[newCartId := restInterface 
		createCartFor: 'herna1n' 
		password: 'smalltalk'.
	
	cartIds add: newCartId.
	
	self triggerEvent: #newCartIdArrived.
	] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.!
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/20/2023 21:48:08' prior: 50663606!
addToCart

	| cartId bookIsbn |
	[
	(self areCartIdAndBookSelected) ifTrue:[
		cartId := self selectedCartId.
		bookIsbn := self selectedBook.
		restInterface 
			add: 1 
			of: bookIsbn 
			toCartIdentifiedAs: cartId.
		self triggerEvent: #bookAddedToCart withArguments: (Array with: bookIsbn with: cartId)].
	] on: Error do: [ :anError |  ]! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/20/2023 21:48:21' prior: 50670524!
addToCart

	| cartId bookIsbn |
	[
	(self areCartIdAndBookSelected) ifTrue:[
		cartId := self selectedCartId.
		bookIsbn := self selectedBook.
		restInterface 
			add: 1 
			of: bookIsbn 
			toCartIdentifiedAs: cartId.
		self triggerEvent: #bookAddedToCart withArguments: (Array with: bookIsbn with: cartId)].
	] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/20/2023 21:48:41' prior: 50663628!
listCart

	| cartId |
	[
	(self isCartIdSelected) ifTrue:[
		cartId := self selectedCartId.
		currentSelectedCartContent := restInterface 
			listCart: cartId.
		self triggerEvent: #newCurrentSelectedCartContentArrived with: cartId ].
	]on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error '].! !

----SNAPSHOT----(20 June 2023 21:59:18) CuisUniversity-5832.image priorSource: 10841208!
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/20/2023 22:03:30' prior: 50670508!
createCart
	restInterface 
		createCartFor: 'hernan' 
		password: 'smalltalk'
		execute: [ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived . ]
		executeIfFails: [ :anError | self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ' ].
	
	"cartIds add: newCartId.
	
	self triggerEvent: #newCartIdArrived.
	] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error '] "! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/20/2023 22:07:37' prior: 50670539!
addToCart

	| cartId bookIsbn |
	
	(self areCartIdAndBookSelected) ifTrue:[
		cartId := self selectedCartId.
		bookIsbn := self selectedBook.
		restInterface 
			add: 1 
			of: bookIsbn 
			toCartIdentifiedAs: cartId
			execute: [ :content | self triggerEvent: #bookAddedToCart withArguments: (Array with: bookIsbn with: cartId) ]
			executeIfFails: [ :anError | self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error' ].
	].		
		"self triggerEvent: #bookAddedToCart withArguments: (Array with: bookIsbn with: cartId)].
	] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/20/2023 22:09:56' prior: 50670556!
listCart

	| cartId |

	(self isCartIdSelected) ifTrue:[
		cartId := self selectedCartId.
		currentSelectedCartContent := restInterface 
			listCart: cartId
			execute: [ self triggerEvent: #newCurrentSelectedCartContentArrived with: cartId  ]
			executeIfFails:[ :anError | self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error'].
		].
! !
!TusLibrosClientRestInterface methodsFor: 'nil' stamp: 'JULI 6/20/2023 22:40:13'!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock
	| resp |
	resp := WebClient htmlSubmit: url fields: fieldDict .
	
	resp isSuccess 
		ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
		ifFalse: [ aFailureBlock value: resp content]! !

----STARTUP---- (20 June 2023 22:45:35) as C:\Users\crist\Desktop\TusLibrosIT4\CuisUniversity-5832.image!

!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/20/2023 22:51:00' prior: 50670508!
createCart

	| newCartId |
	
	[newCartId := restInterface 
		createCartFor: 'hernan' 
		password: 'smalltalk'.
	
	cartIds add: newCartId.
	
	self triggerEvent: #newCartIdArrived.
	] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.!

----STARTUP---- (21 June 2023 00:03:42) as C:\Users\crist\Desktop\TusLibrosIT4\CuisUniversity-5832.image!


----SNAPSHOT----(21 June 2023 00:03:55) CuisUniversity-5832.image priorSource: 10845385!
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 00:04:30' prior: 50670508!
createCart

	| newCartId |
	
	"["newCartId := restInterface 
		createCartFor: 'herna1n' 
		password: 'smalltalk'.
	
	cartIds add: newCartId.
	
	self triggerEvent: #newCartIdArrived.
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 00:04:44' prior: 50670556!
listCart

	| cartId |
"	["
	(self isCartIdSelected) ifTrue:[
		cartId := self selectedCartId.
		currentSelectedCartContent := restInterface 
			listCart: cartId.
		self triggerEvent: #newCurrentSelectedCartContentArrived with: cartId ].
	"]on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']."! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 00:04:59' prior: 50670539!
addToCart

	| cartId bookIsbn |
"	["
	(self areCartIdAndBookSelected) ifTrue:[
		cartId := self selectedCartId.
		bookIsbn := self selectedBook.
		restInterface 
			add: 1 
			of: bookIsbn 
			toCartIdentifiedAs: cartId.
		self triggerEvent: #bookAddedToCart withArguments: (Array with: bookIsbn with: cartId)].
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.!
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 00:11:51' prior: 50670668!
createCart

	| newCartId |
	
	"["newCartId := restInterface 
		createCartFor: 'hernan' 
		password: 'smalltalk'.
	
	cartIds add: newCartId.
	
	self triggerEvent: #newCartIdArrived.
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 00:13:33' prior: 50670715!
createCart

	| newCartId |
	
	"["newCartId := restInterface 
		createCartFor: 'hernan' 
		password: 'smalltalk'
		execute:[ cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ].
	
"	cartIds add: newCartId.
	
	self triggerEvent: #newCartIdArrived."
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 00:14:34' prior: 50670728!
createCart

	restInterface 
		createCartFor: 'hernan' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ].
	
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 00:20:24' prior: 50670681!
listCart

	| cartId |
"	["
	(self isCartIdSelected) ifTrue:[
		cartId := self selectedCartId.
		restInterface 
			listCart: cartId
			execute: [ :listCarts| currentSelectedCartContent := listCarts .
				self triggerEvent: #newCurrentSelectedCartContentArrived with: cartId ].
			].
	"]on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']."! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 00:21:01' prior: 50670755!
listCart

	| cartId |
"	["
	(self isCartIdSelected) ifTrue:[
		cartId := self selectedCartId.
		restInterface 
			listCart: cartId
			execute: [ :listCarts| 
					currentSelectedCartContent := listCarts .
					self triggerEvent: #newCurrentSelectedCartContentArrived with: cartId ].
		].
	"]on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']."! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 00:22:14' prior: 50670695!
addToCart

	| cartId bookIsbn |
"	["
	(self areCartIdAndBookSelected) ifTrue:[
		cartId := self selectedCartId.
		bookIsbn := self selectedBook.
		restInterface 
			add: 1 
			of: bookIsbn 
			toCartIdentifiedAs: cartId
			execute: [ :content | 		self triggerEvent: #bookAddedToCart withArguments: (Array with: bookIsbn with: cartId)].
		].	
			
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:22:53'!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId execute: addBookBlock

	| fieldDict resp |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		
		
	resp := WebClient htmlSubmit: (self url,'/addToCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))]
		ifFalse:[^self error: resp content]! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:26:44' prior: 50670804!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId execute: addBookBlock

	| fieldDict  |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		
	
	self
		request: (self url,'/addToCart')
		withFields: fieldDict 
		onSuccess: [ :resp | addBookBlock value: (WebUtils jsonDecode: ((resp content) readStream)) ]
		onFailure: [ :resp | self error :resp ]		.
"		
	resp := WebClient htmlSubmit: (self url,'/addToCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))]
		ifFalse:[^self error: resp content]"! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:29:05'!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: (WebUtils jsonDecode: ((resp content) readStream)) ]
		onFailure: [ :resp | self error: resp ].
	"
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content] "! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:31:08'!
listCart: cartId execute: listCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. }.		
	
	self
		request: (self url,'/listCart')
		withFields: fieldDict 
		onSuccess: [ :resp | listCartBlock value: (WebUtils jsonDecode: ((resp content) readStream)) asOrderedCollection ]
		onFailure: [ :resp | self error: resp ].
	
	" resp := WebClient htmlSubmit: (self url,'/listCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream)) asOrderedCollection] 
		ifFalse:[^self error: resp content] "! !
!TusLibrosClientRestInterface methodsFor: 'nil' stamp: 'JULI 6/21/2023 00:34:19'!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock
	|resp|
	
	resp := WebClient htmlSubmit: url fields: fieldDict .
	resp isSuccess 
		ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
		ifFalse: [aFailureBlock value: resp content ].! !

!methodRemoval: TusLibrosClientRestInterface #add:of:toCartIdentifiedAs: stamp: 'JULI 6/21/2023 00:34:33'!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId

	| fieldDict resp |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		
		
	resp := WebClient htmlSubmit: (self url,'/addToCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))]
		ifFalse:[^self error: resp content]!

!methodRemoval: TusLibrosClientRestInterface #createCartFor:password: stamp: 'JULI 6/21/2023 00:34:36'!
createCartFor: aUser password: aPassword

	| fieldDict resp |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content]!

!methodRemoval: TusLibrosClientRestInterface #listCart: stamp: 'JULI 6/21/2023 00:34:41'!
listCart: cartId

	| fieldDict resp |
	
	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. }.		
	
	resp := WebClient htmlSubmit: (self url,'/listCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream)) asOrderedCollection] 
		ifFalse:[^self error: resp content]!

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.!
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 00:38:01' prior: 50670743!
createCart
	self halt.
	restInterface 
		createCartFor: 'hernan' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ].
	
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:40:33' prior: 50670842!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: (WebUtils jsonDecode: (resp readStream)) ]
		onFailure: [ :resp | self error: resp ].
	"
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content] "! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:40:44' prior: 50670960!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: (WebUtils jsonDecode: (resp readStream) ) ]
		onFailure: [ :resp | self error: resp ].
	"
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content] "! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!

WebServer reset.
!
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 00:41:14' prior: 50670944!
createCart
	"self halt."
	restInterface 
		createCartFor: 'hernan' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ].
	
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:42:11' prior: 50670820!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId execute: addBookBlock

	| fieldDict  |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		
	
	self
		request: (self url,'/addToCart')
		withFields: fieldDict 
		onSuccess: [ :resp | addBookBlock value: (WebUtils jsonDecode: (resp  readStream)) ]
		onFailure: [ :resp | self error :resp ]		.
"		
	resp := WebClient htmlSubmit: (self url,'/addToCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))]
		ifFalse:[^self error: resp content]"! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:42:26' prior: 50670864!
listCart: cartId execute: listCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. }.		
	
	self
		request: (self url,'/listCart')
		withFields: fieldDict 
		onSuccess: [ :resp | listCartBlock value: (WebUtils jsonDecode: (resp  readStream)) asOrderedCollection ]
		onFailure: [ :resp | self error: resp ].
	
	" resp := WebClient htmlSubmit: (self url,'/listCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream)) asOrderedCollection] 
		ifFalse:[^self error: resp content] "! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:43:43' prior: 50671024!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId execute: addBookBlock

	| fieldDict  |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		
	
	self
		request: (self url,'/addToCart')
		withFields: fieldDict 
		onSuccess: [ :resp | addBookBlock value: (WebUtils jsonDecode: (resp  readStream)) ]
		onFailure: [ :resp | self error: resp ]		.
"		
	resp := WebClient htmlSubmit: (self url,'/addToCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))]
		ifFalse:[^self error: resp content]"! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:45:26' prior: 50671072!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId execute: addBookBlock

	| fieldDict  |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		
	self halt.
	self
		request: (self url,'/addToCart')
		withFields: fieldDict 
		onSuccess: [ :resp | addBookBlock value: (WebUtils jsonDecode: (resp  readStream)) ]
		onFailure: [ :resp | self error: resp ]		.
"		
	resp := WebClient htmlSubmit: (self url,'/addToCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))]
		ifFalse:[^self error: resp content]"! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:53:28' prior: 50670885!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock
	|resp|
	
	resp := WebClient htmlSubmit: url fields: fieldDict .
	resp isSuccess 
		ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp  readStream )]
		ifFalse: [aFailureBlock value: resp content ].! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:54:24' prior: 50671098!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId execute: addBookBlock

	| fieldDict  |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		
	"self halt."
	self
		request: (self url,'/addToCart')
		withFields: fieldDict 
		onSuccess: [ :resp | addBookBlock value: (WebUtils jsonDecode: (resp  readStream)) ]
		onFailure: [ :resp | self error: resp ]		.
"		
	resp := WebClient htmlSubmit: (self url,'/addToCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))]
		ifFalse:[^self error: resp content]"! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:55:44' prior: 50670982!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: (WebUtils jsonDecode: (resp content readStream) ) ]
		onFailure: [ :resp | self error: resp ].
	"
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content] "! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:56:30' prior: 50671170!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: (WebUtils jsonDecode: ((resp content) readStream) ) ]
		onFailure: [ :resp | self error: resp ].
	"
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content] "! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:55:44' prior: 50671195!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: (WebUtils jsonDecode: (resp content readStream) ) ]
		onFailure: [ :resp | self error: resp ].
	"
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content] "! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:55:44' prior: 50671220!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: (WebUtils jsonDecode: (resp content readStream) ) ]
		onFailure: [ :resp | self error: resp ].
	"
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content] "! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:57:40' prior: 50671242!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: (WebUtils jsonDecode: (resp readStream) ) ]
		onFailure: [ :resp | self error: resp ].
	"
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content] "! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:58:24' prior: 50671264!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: resp ]
		onFailure: [ :resp | self error: resp ].
	"
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content] "! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:58:24' prior: 50671286!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: resp ]
		onFailure: [ :resp | self error: resp ].
	"
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content] "! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 00:58:24' prior: 50671310!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: resp ]
		onFailure: [ :resp | self error: resp ].
	"
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content] "! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 01:02:10' prior: 50671331!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: (WebUtils jsonDecode: (resp  readStream)) ]
		onFailure: [ :resp | self error: resp ].
	"
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content] "! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 01:02:40' prior: 50671128!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock
	|resp|
	
	resp := WebClient htmlSubmit: url fields: fieldDict .
	resp isSuccess 
		ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
		ifFalse: [aFailureBlock value: resp content ].! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 01:02:50' prior: 50671352!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: resp ]
		onFailure: [ :resp | self error: resp ].
	"
	resp := WebClient htmlSubmit: (self url,'/createCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))] 
		ifFalse:[^self error: resp content] "! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 01:03:25' prior: 50671144!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId execute: addBookBlock

	| fieldDict  |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		
	"self halt."
	self
		request: (self url,'/addToCart')
		withFields: fieldDict 
		onSuccess: [ :resp | addBookBlock value: resp ]
		onFailure: [ :resp | self error: resp ]		.
"		
	resp := WebClient htmlSubmit: (self url,'/addToCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream))]
		ifFalse:[^self error: resp content]"! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 01:03:41' prior: 50671047!
listCart: cartId execute: listCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. }.		
	
	self
		request: (self url,'/listCart')
		withFields: fieldDict 
		onSuccess: [ :resp | listCartBlock value: resp asOrderedCollection ]
		onFailure: [ :resp | self error: resp ].
	
	" resp := WebClient htmlSubmit: (self url,'/listCart') fields: fieldDict.
		
	resp isSuccess 
		ifTrue:[^(WebUtils jsonDecode: ((resp content) readStream)) asOrderedCollection] 
		ifFalse:[^self error: resp content] "! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!

WebServer reset.
!

TusLibrosServerRestInterface installForDefaultSystem.
!

TusLibrosClientTestWindow open.
!

----SNAPSHOT----(21 June 2023 01:04:56) CuisUniversity-5832.image priorSource: 10848422!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 01:05:41' prior: 50671377!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock
	[
		|resp|
	
		resp := WebClient htmlSubmit: url fields: fieldDict .
		resp isSuccess 
		ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
		ifFalse: [aFailureBlock value: resp content ].
	] fork.! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 01:07:50' prior: 50671436!
listCart: cartId execute: listCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. }.		
	
	self
		request: (self url,'/listCart')
		withFields: fieldDict 
		onSuccess: [ :resp | listCartBlock value: resp asOrderedCollection ]
		onFailure: [ :resp | self error: resp ].
	! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 01:07:57' prior: 50671390!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: resp ]
		onFailure: [ :resp | self error: resp ].
! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 01:08:02' prior: 50671414!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId execute: addBookBlock

	| fieldDict  |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		
	"self halt."
	self
		request: (self url,'/addToCart')
		withFields: fieldDict 
		onSuccess: [ :resp | addBookBlock value: resp ]
		onFailure: [ :resp | self error: resp ]		.
! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 01:21:36' prior: 50671008!
createCart
	"self halt."
	restInterface 
		createCartFor: 'hernan' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ].
		"debería enviarle el triggerEvent desde window model para que lo ejecute el client rest interface como estoy haciendo con el #newCartIdArrived"
	
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !

----SNAPSHOT----(21 June 2023 01:25:18) CuisUniversity-5832.image priorSource: 10873960!
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 02:05:58' prior: 50671526!
createCart
	"self halt."
	restInterface 
		createCartFor: 'hernan' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ].
		"debería enviarle el triggerEvent desde window model para que lo ejecute el client rest interface como estoy haciendo con el #newCartIdArrived"
		
	
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 02:08:15' prior: 50671546!
createCart
	"self halt."
	restInterface 
		createCartFor: 'hernan' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ]
		"debería enviarle el triggerEvent desde window model para que lo ejecute el client rest interface como estoy haciendo con el #newCartIdArrived"
		executeIfFails: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ' ].
	
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 02:08:41' prior: 50670787!
addToCart

	| cartId bookIsbn |
"	["
	(self areCartIdAndBookSelected) ifTrue:[
		cartId := self selectedCartId.
		bookIsbn := self selectedBook.
		restInterface 
			add: 1 
			of: bookIsbn 
			toCartIdentifiedAs: cartId
			execute: [ :content | 		self triggerEvent: #bookAddedToCart withArguments: (Array with: bookIsbn with: cartId)]
			executeIfFails: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ' ].
		].	
			
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 02:09:09' prior: 50670771!
listCart

	| cartId |
"	["
	(self isCartIdSelected) ifTrue:[
		cartId := self selectedCartId.
		restInterface 
			listCart: cartId
			execute: [ :listCarts| 
					currentSelectedCartContent := listCarts .
					self triggerEvent: #newCurrentSelectedCartContentArrived with: cartId ]
			executeIfFails: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ' ].
		].
	"]on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']."! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 02:12:30'!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId execute: addBookBlock executeIfFails: errorHandler

	| fieldDict  |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		
	"self halt."
	self
		request: (self url,'/addToCart')
		withFields: fieldDict 
		onSuccess: [ :resp | addBookBlock value: resp ]
		onFailure: [ :resp | self error: resp ]		
		withErrorHandler: errorHandler.
! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 02:13:39'!
createCartFor: aUser password: aPassword execute: createCartBlock executeIfFails: errorHandler

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: resp ]
		onFailure: [ :resp | self error: resp ]
		withErrorHandler: errorHandler.
! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 02:14:03'!
listCart: cartId execute: listCartBlock executeIfFails: errorHandler

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. }.		
	
	self
		request: (self url,'/listCart')
		withFields: fieldDict 
		onSuccess: [ :resp | listCartBlock value: resp asOrderedCollection ]
		onFailure: [ :resp | self error: resp ]
		withErrorHandler: errorHandler.
	! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 02:15:47'!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock withErrorHandler: errorHandler
	[
		[
			|resp|
		
			resp := WebClient htmlSubmit: url fields: fieldDict .
			resp isSuccess 
			ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
			ifFalse: [aFailureBlock value: resp content ].
		] on: Error do:[ :anError | errorHandler value: anError messageText ].
	] fork.! !

WebServer reset.
!

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 02:19:21' prior: 50671563!
createCart
	"self halt."
	restInterface 
		createCartFor: 'hernan1' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ]
		"debería enviarle el triggerEvent desde window model para que lo ejecute el client rest interface como estoy haciendo con el #newCartIdArrived"
		executeIfFails: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ' ].
	
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 02:20:03' prior: 50671670!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock withErrorHandler: errorHandler
	[
		[
			|resp|
		
			resp := WebClient htmlSubmit: url fields: fieldDict .
			resp isSuccess 
			ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
			ifFalse: [aFailureBlock value: resp content ].
		] on: Error do:[ :anError | errorHandler value": anError messageText" ].
	] fork.! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 02:23:13' prior: 50671691!
createCart
	"self halt."
	restInterface 
		createCartFor: 'hernan1' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ]
		"debería enviarle el triggerEvent desde window model para que lo ejecute el client rest interface como estoy haciendo con el #newCartIdArrived"
		executeIfFails: [ :errorMessage | self triggerEvent: #showPopUpErrorMessage with: errorMessage]. "'Ha ocurrido un error ' ]."
	
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 02:23:36' prior: 50671604!
listCart

	| cartId |
"	["
	(self isCartIdSelected) ifTrue:[
		cartId := self selectedCartId.
		restInterface 
			listCart: cartId
			execute: [ :listCarts| 
					currentSelectedCartContent := listCarts .
					self triggerEvent: #newCurrentSelectedCartContentArrived with: cartId ]
			executeIfFails: [ :errorMessage | self triggerEvent: #showPopUpErrorMessage with: errorMessage]. "'Ha ocurrido un error ' ]."
		].
	"]on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']."! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 02:23:41' prior: 50671583!
addToCart

	| cartId bookIsbn |
"	["
	(self areCartIdAndBookSelected) ifTrue:[
		cartId := self selectedCartId.
		bookIsbn := self selectedBook.
		restInterface 
			add: 1 
			of: bookIsbn 
			toCartIdentifiedAs: cartId
			execute: [ :content | 		self triggerEvent: #bookAddedToCart withArguments: (Array with: bookIsbn with: cartId)]
			executeIfFails: [ :errorMessage | self triggerEvent: #showPopUpErrorMessage with: errorMessage]. "'Ha ocurrido un error ' ]."
		].	
			
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 02:23:55' prior: 50671711!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock withErrorHandler: errorHandler
	[
		[
			|resp|
		
			resp := WebClient htmlSubmit: url fields: fieldDict .
			resp isSuccess 
			ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
			ifFalse: [aFailureBlock value: resp content ].
		] on: Error do:[ :anError | errorHandler value: anError messageText ].
	] fork.! !

----SNAPSHOT----(21 June 2023 02:24:27) CuisUniversity-5832.image priorSource: 10876523!

----STARTUP---- (21 June 2023 20:00:16) as C:\Users\crist\Desktop\TusLibrosIT4\CuisUniversity-5832.image!

!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 20:28:50' prior: 50671770!
addToCart

	| cartId bookIsbn |

	(self areCartIdAndBookSelected) ifTrue:[
		cartId := self selectedCartId.
		bookIsbn := self selectedBook.
		restInterface 
			add: 1 
			of: bookIsbn 
			toCartIdentifiedAs: cartId
			execute: [ :content | 		self triggerEvent: #bookAddedToCart withArguments: (Array with: bookIsbn with: cartId)]
			executeIfFails: [ :errorMessage | self triggerEvent: #showPopUpErrorMessage with: errorMessage].
		].! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 20:29:08' prior: 50671750!
listCart

	| cartId |

	(self isCartIdSelected) ifTrue:[
		cartId := self selectedCartId.
		restInterface 
			listCart: cartId
			execute: [ :listCarts| 
					currentSelectedCartContent := listCarts .
					self triggerEvent: #newCurrentSelectedCartContentArrived with: cartId ]
			executeIfFails: [ :errorMessage | self triggerEvent: #showPopUpErrorMessage with: errorMessage].
		].! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 20:29:43' prior: 50671510!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId execute: addBookBlock

	| fieldDict  |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		

	self
		request: (self url,'/addToCart')
		withFields: fieldDict 
		onSuccess: [ :resp | addBookBlock value: resp ]
		onFailure: [ :resp | self error: resp ]		.
! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 21:08:41' prior: 50671792!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock withErrorHandler: errorHandler
	[|resp|
		[
			"|resp|"
		
			resp := WebClient htmlSubmit: url fields: fieldDict .
			resp isSuccess 
			ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
			ifFalse: [aFailureBlock value: resp content ].
		] on: Error do:[ :anError | errorHandler value: anError messageText ].
	] fork.! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 21:09:20' prior: 50671865!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock withErrorHandler: errorHandler
	[|resp|
		[
			"|resp|"
		
			resp := WebClient htmlSubmit: url fields: fieldDict .
			resp isSuccess 
			ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
			ifFalse: [aFailureBlock value: resp content ].
		] on: Error do: [ errorHandler value: resp content messageText ]." [ :anError | errorHandler value: anError messageText ]."
	] fork.! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 21:09:43' prior: 50671729!
createCart
	"self halt."
	restInterface 
		createCartFor: 'hernan' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ]
		"debería enviarle el triggerEvent desde window model para que lo ejecute el client rest interface como estoy haciendo con el #newCartIdArrived"
		executeIfFails: [ :errorMessage | self triggerEvent: #showPopUpErrorMessage with: errorMessage]. "'Ha ocurrido un error ' ]."
	
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 21:10:16' prior: 50671905!
createCart
	"self halt."
	restInterface 
		createCartFor: 'hernan1' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ]
		"debería enviarle el triggerEvent desde window model para que lo ejecute el client rest interface como estoy haciendo con el #newCartIdArrived"
		executeIfFails: [ :errorMessage | self triggerEvent: #showPopUpErrorMessage with: errorMessage]. "'Ha ocurrido un error ' ]."
	
	"] on: Error do: [ self triggerEvent: #showPopUpErrorMessage with: 'Ha ocurrido un error ']"! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 21:11:30' prior: 50671882!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock withErrorHandler: errorHandler
	[|resp|
		[
			"|resp|"
		
			resp := WebClient htmlSubmit: url fields: fieldDict .
			resp isSuccess 
			ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
			ifFalse: [aFailureBlock value: resp content ].
		] on: Error do: [ errorHandler value: ((resp content readStream ) messageText) ]." [ :anError | errorHandler value: anError messageText ]."
	] fork.! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 21:12:14' prior: 50671947!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock withErrorHandler: errorHandler
	[|resp|
		[
			"|resp|"
		
			resp := WebClient htmlSubmit: url fields: fieldDict .
			resp isSuccess 
			ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
			ifFalse: [aFailureBlock value: resp content ].
		] on: Error do: [ :anError | errorHandler value: anError messageText ].
	] fork.! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 21:57:27' prior: 50671970!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock withErrorHandler: errorHandler
	[|resp|
		[
			"|resp|"
		
			resp := WebClient htmlSubmit: url fields: fieldDict .
			resp isSuccess 
			ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
			ifFalse:[ self error: resp content ]". [aFailureBlock value: resp content ]."
		] on: Error do: [ :anError | errorHandler value: anError messageText ].
	] fork.! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!

!methodRemoval: TusLibrosClientRestInterface #add:of:toCartIdentifiedAs:execute: stamp: 'JULI 6/21/2023 22:25:06'!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId execute: addBookBlock

	| fieldDict  |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		

	self
		request: (self url,'/addToCart')
		withFields: fieldDict 
		onSuccess: [ :resp | addBookBlock value: resp ]
		onFailure: [ :resp | self error: resp ]		.
!

!methodRemoval: TusLibrosClientRestInterface #createCartFor:password:execute: stamp: 'JULI 6/21/2023 22:25:11'!
createCartFor: aUser password: aPassword execute: createCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: resp ]
		onFailure: [ :resp | self error: resp ].
!

!methodRemoval: TusLibrosClientRestInterface #listCart:execute: stamp: 'JULI 6/21/2023 22:25:14'!
listCart: cartId execute: listCartBlock

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. }.		
	
	self
		request: (self url,'/listCart')
		withFields: fieldDict 
		onSuccess: [ :resp | listCartBlock value: resp asOrderedCollection ]
		onFailure: [ :resp | self error: resp ].
	!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 22:26:26' prior: 50671466!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock 
	[|resp|
		[
			resp := WebClient htmlSubmit: url fields: fieldDict .
			resp isSuccess 
			ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
			ifFalse:[ self error: resp content ]
		] on: Error do: [ :anError | aFailureBlock value: anError messageText ].
	] fork.! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 22:27:10' prior: 50671622!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId execute: addBookBlock executeIfFails: errorHandler

	| fieldDict  |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		
	"self halt."
	self
		request: (self url,'/addToCart')
		withFields: fieldDict 
		onSuccess: [ :resp | addBookBlock value: resp ]
		onFailure: errorHandler.
! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 22:27:27' prior: 50671639!
createCartFor: aUser password: aPassword execute: createCartBlock executeIfFails: errorHandler

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'clientId'. aUser. 'password'. aPassword}.		
	
	self
		request: (self url,'/createCart')
		withFields: fieldDict 
		onSuccess: [ :resp | createCartBlock value: resp ]
		onFailure: errorHandler .
! !
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 22:27:39' prior: 50671655!
listCart: cartId execute: listCartBlock executeIfFails: errorHandler

	| fieldDict  |
	
	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. }.		
	
	self
		request: (self url,'/listCart')
		withFields: fieldDict 
		onSuccess: [ :resp | listCartBlock value: resp asOrderedCollection ]
		onFailure: errorHandler .

	! !

!methodRemoval: TusLibrosClientRestInterface #request:withFields:onSuccess:onFailure:withErrorHandler: stamp: 'JULI 6/21/2023 22:27:51'!
request: url withFields: fieldDict onSuccess: aSuccessBlock onFailure: aFailureBlock withErrorHandler: errorHandler
	[|resp|
		[
			"|resp|"
		
			resp := WebClient htmlSubmit: url fields: fieldDict .
			resp isSuccess 
			ifTrue: [ aSuccessBlock value: ( WebUtils jsonDecode: resp content readStream )]
			ifFalse:[ self error: resp content ]". [aFailureBlock value: resp content ]."
		] on: Error do: [ :anError | errorHandler value: anError messageText ].
	] fork.!
!TusLibrosClientRestInterface methodsFor: 'requests' stamp: 'JULI 6/21/2023 22:28:00' prior: 50672071!
add: quantity of: bookIsbn toCartIdentifiedAs: cartId execute: addBookBlock executeIfFails: errorHandler

	| fieldDict  |

	fieldDict := Dictionary newFromPairs: {'cartId'. cartId. 'bookIsbn'. bookIsbn. 'bookQuantity'. quantity}.		

	self
		request: (self url,'/addToCart')
		withFields: fieldDict 
		onSuccess: [ :resp | addBookBlock value: resp ]
		onFailure: errorHandler.
! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 22:30:02' prior: 50671926!
createCart

	restInterface 
		createCartFor: 'hernan1' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ]
		
		executeIfFails: [ :errorMessage | self triggerEvent: #showPopUpErrorMessage with: errorMessage].
! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 22:30:07' prior: 50672151!
createCart

	restInterface 
		createCartFor: 'hernan1' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ]
		executeIfFails: [ :errorMessage | self triggerEvent: #showPopUpErrorMessage with: errorMessage].
! !
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 22:30:17' prior: 50672164!
createCart

	restInterface 
		createCartFor: 'hernan' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ]
		executeIfFails: [ :errorMessage | self triggerEvent: #showPopUpErrorMessage with: errorMessage].
! !

WebServer reset.
TusLibrosServerRestInterface installForDefaultSystem.
TusLibrosClientTestWindow open.
!
!TusLibrosClientTestWindowModel methodsFor: 'buttonSelectors' stamp: 'JULI 6/21/2023 22:31:45' prior: 50672176!
createCart

	restInterface 
		createCartFor: 'herna1n' 
		password: 'smalltalk'
		execute:[ :newCartId | cartIds add: newCartId. self triggerEvent: #newCartIdArrived. ]
		executeIfFails: [ :errorMessage | self triggerEvent: #showPopUpErrorMessage with: errorMessage].
! !

----SNAPSHOT----(21 June 2023 22:35:23) CuisUniversity-5832.image priorSource: 10885038!